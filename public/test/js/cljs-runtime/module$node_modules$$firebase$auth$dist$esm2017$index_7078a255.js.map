{
"version":3,
"file":"module$node_modules$$firebase$auth$dist$esm2017$index_7078a255.js",
"lineCount":304,
"mappings":"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",
"sources":["node_modules/@firebase/auth/dist/esm2017/index-7078a255.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$$firebase$auth$dist$esm2017$index_7078a255\"] = function(global,require,module,exports) {\n\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.$ = sendPasswordResetEmail;\nexports.D = initializeAuth;\nexports.E = connectAuthEmulator;\nexports.W = signInAnonymously;\nexports.X = signInWithCredential;\nexports.Y = linkWithCredential;\nexports.Z = reauthenticateWithCredential;\nexports._ = signInWithCustomToken;\nexports.a0 = confirmPasswordReset;\nexports.a1 = applyActionCode;\nexports.a2 = checkActionCode;\nexports.a3 = verifyPasswordResetCode;\nexports.a4 = createUserWithEmailAndPassword;\nexports.a5 = signInWithEmailAndPassword;\nexports.a6 = sendSignInLinkToEmail;\nexports.a7 = isSignInWithEmailLink;\nexports.a8 = signInWithEmailLink;\nexports.a9 = fetchSignInMethodsForEmail;\nexports.aA = _getRedirectResult;\nexports.aB = _clearRedirectOutcomes;\nexports.aC = _castAuth;\nexports.aF = _getClientVersion;\nexports.aG = _generateEventId;\nexports.aa = sendEmailVerification;\nexports.ab = verifyBeforeUpdateEmail;\nexports.ad = parseActionCodeURL;\nexports.ae = updateProfile;\nexports.af = updateEmail;\nexports.ag = updatePassword;\nexports.ah = getIdToken;\nexports.ai = getIdTokenResult;\nexports.aj = unlink;\nexports.ak = getAdditionalUserInfo;\nexports.al = reload;\nexports.am = getMultiFactorResolver;\nexports.an = multiFactor;\nexports.ao = _isIOS7Or8;\nexports.ap = debugAssert;\nexports.aq = _isIOS;\nexports.ar = _isAndroid;\nexports.as = _fail;\nexports.at = _getRedirectUrl;\nexports.au = _getProjectConfig;\nexports.av = _createError;\nexports.aw = _assert;\nexports.ax = _getInstance;\nexports.ay = _persistenceKeyName;\nexports.c = signInWithPopup;\nexports.d = linkWithPopup;\nexports.e = reauthenticateWithPopup;\nexports.f = signInWithRedirect;\nexports.g = linkWithRedirect;\nexports.h = reauthenticateWithRedirect;\nexports.j = getRedirectResult;\nexports.l = linkWithPhoneNumber;\nexports.n = getAuth;\nexports.p = setPersistence;\nexports.q = onIdTokenChanged;\nexports.r = reauthenticateWithPhoneNumber;\nexports.s = signInWithPhoneNumber;\nexports.t = onAuthStateChanged;\nexports.u = updatePhoneNumber;\nexports.v = useDeviceLanguage;\nexports.w = updateCurrentUser;\nexports.x = signOut;\nexports.y = deleteUser;\nexports.z = exports.o = exports.m = exports.k = exports.i = exports.b = exports.az = exports.ac = exports.aJ = exports.aI = exports.aH = exports.aE = exports.aD = exports.a = exports.V = exports.U = exports.T = exports.S = exports.R = exports.Q = exports.P = exports.O = exports.N = exports.M = exports.L = exports.K = exports.J = exports.I = exports.H = exports.G = exports.F = exports.C = exports.B = exports.A = void 0;\n\nvar _util = require(\"@firebase/util\");\n\nvar _app = require(\"@firebase/app\");\n\nvar _tslib = require(\"tslib\");\n\nvar _logger = require(\"@firebase/logger\");\n\nvar _component = require(\"@firebase/component\");\n\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * An enum of factors that may be used for multifactor authentication.\r\n *\r\n * @public\r\n */\nconst FactorId = {\n  /** Phone as second factor */\n  PHONE: 'phone'\n};\n/**\r\n * Enumeration of supported providers.\r\n *\r\n * @public\r\n */\n\nexports.F = FactorId;\nconst ProviderId = {\n  /** Facebook provider ID */\n  FACEBOOK: 'facebook.com',\n\n  /** GitHub provider ID */\n  GITHUB: 'github.com',\n\n  /** Google provider ID */\n  GOOGLE: 'google.com',\n\n  /** Password provider */\n  PASSWORD: 'password',\n\n  /** Phone provider */\n  PHONE: 'phone',\n\n  /** Twitter provider ID */\n  TWITTER: 'twitter.com'\n};\n/**\r\n * Enumeration of supported sign-in methods.\r\n *\r\n * @public\r\n */\n\nexports.o = ProviderId;\nconst SignInMethod = {\n  /** Email link sign in method */\n  EMAIL_LINK: 'emailLink',\n\n  /** Email/password sign in method */\n  EMAIL_PASSWORD: 'password',\n\n  /** Facebook sign in method */\n  FACEBOOK: 'facebook.com',\n\n  /** GitHub sign in method */\n  GITHUB: 'github.com',\n\n  /** Google sign in method */\n  GOOGLE: 'google.com',\n\n  /** Phone sign in method */\n  PHONE: 'phone',\n\n  /** Twitter sign in method */\n  TWITTER: 'twitter.com'\n};\n/**\r\n * Enumeration of supported operation types.\r\n *\r\n * @public\r\n */\n\nexports.S = SignInMethod;\nconst OperationType = {\n  /** Operation involving linking an additional provider to an already signed-in user. */\n  LINK: 'link',\n\n  /** Operation involving using a provider to reauthenticate an already signed-in user. */\n  REAUTHENTICATE: 'reauthenticate',\n\n  /** Operation involving signing in a user. */\n  SIGN_IN: 'signIn'\n};\n/**\r\n * An enumeration of the possible email action types.\r\n *\r\n * @public\r\n */\n\nexports.O = OperationType;\nconst ActionCodeOperation = {\n  /** The email link sign-in action. */\n  EMAIL_SIGNIN: 'EMAIL_SIGNIN',\n\n  /** The password reset action. */\n  PASSWORD_RESET: 'PASSWORD_RESET',\n\n  /** The email revocation action. */\n  RECOVER_EMAIL: 'RECOVER_EMAIL',\n\n  /** The revert second factor addition email action. */\n  REVERT_SECOND_FACTOR_ADDITION: 'REVERT_SECOND_FACTOR_ADDITION',\n\n  /** The revert second factor addition email action. */\n  VERIFY_AND_CHANGE_EMAIL: 'VERIFY_AND_CHANGE_EMAIL',\n\n  /** The email verification action. */\n  VERIFY_EMAIL: 'VERIFY_EMAIL'\n};\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.A = ActionCodeOperation;\n\nfunction _debugErrorMap() {\n  return {\n    [\"admin-restricted-operation\"\n    /* ADMIN_ONLY_OPERATION */\n    ]: 'This operation is restricted to administrators only.',\n    [\"argument-error\"\n    /* ARGUMENT_ERROR */\n    ]: '',\n    [\"app-not-authorized\"\n    /* APP_NOT_AUTHORIZED */\n    ]: \"This app, identified by the domain where it's hosted, is not \" + 'authorized to use Firebase Authentication with the provided API key. ' + 'Review your key configuration in the Google API console.',\n    [\"app-not-installed\"\n    /* APP_NOT_INSTALLED */\n    ]: 'The requested mobile application corresponding to the identifier (' + 'Android package name or iOS bundle ID) provided is not installed on ' + 'this device.',\n    [\"captcha-check-failed\"\n    /* CAPTCHA_CHECK_FAILED */\n    ]: 'The reCAPTCHA response token provided is either invalid, expired, ' + 'already used or the domain associated with it does not match the list ' + 'of whitelisted domains.',\n    [\"code-expired\"\n    /* CODE_EXPIRED */\n    ]: 'The SMS code has expired. Please re-send the verification code to try ' + 'again.',\n    [\"cordova-not-ready\"\n    /* CORDOVA_NOT_READY */\n    ]: 'Cordova framework is not ready.',\n    [\"cors-unsupported\"\n    /* CORS_UNSUPPORTED */\n    ]: 'This browser is not supported.',\n    [\"credential-already-in-use\"\n    /* CREDENTIAL_ALREADY_IN_USE */\n    ]: 'This credential is already associated with a different user account.',\n    [\"custom-token-mismatch\"\n    /* CREDENTIAL_MISMATCH */\n    ]: 'The custom token corresponds to a different audience.',\n    [\"requires-recent-login\"\n    /* CREDENTIAL_TOO_OLD_LOGIN_AGAIN */\n    ]: 'This operation is sensitive and requires recent authentication. Log in ' + 'again before retrying this request.',\n    [\"dependent-sdk-initialized-before-auth\"\n    /* DEPENDENT_SDK_INIT_BEFORE_AUTH */\n    ]: 'Another Firebase SDK was initialized and is trying to use Auth before Auth is ' + 'initialized. Please be sure to call `initializeAuth` or `getAuth` before ' + 'starting any other Firebase SDK.',\n    [\"dynamic-link-not-activated\"\n    /* DYNAMIC_LINK_NOT_ACTIVATED */\n    ]: 'Please activate Dynamic Links in the Firebase Console and agree to the terms and ' + 'conditions.',\n    [\"email-change-needs-verification\"\n    /* EMAIL_CHANGE_NEEDS_VERIFICATION */\n    ]: 'Multi-factor users must always have a verified email.',\n    [\"email-already-in-use\"\n    /* EMAIL_EXISTS */\n    ]: 'The email address is already in use by another account.',\n    [\"emulator-config-failed\"\n    /* EMULATOR_CONFIG_FAILED */\n    ]: 'Auth instance has already been used to make a network call. Auth can ' + 'no longer be configured to use the emulator. Try calling ' + '\"connectAuthEmulator()\" sooner.',\n    [\"expired-action-code\"\n    /* EXPIRED_OOB_CODE */\n    ]: 'The action code has expired.',\n    [\"cancelled-popup-request\"\n    /* EXPIRED_POPUP_REQUEST */\n    ]: 'This operation has been cancelled due to another conflicting popup being opened.',\n    [\"internal-error\"\n    /* INTERNAL_ERROR */\n    ]: 'An internal AuthError has occurred.',\n    [\"invalid-app-credential\"\n    /* INVALID_APP_CREDENTIAL */\n    ]: 'The phone verification request contains an invalid application verifier.' + ' The reCAPTCHA token response is either invalid or expired.',\n    [\"invalid-app-id\"\n    /* INVALID_APP_ID */\n    ]: 'The mobile app identifier is not registed for the current project.',\n    [\"invalid-user-token\"\n    /* INVALID_AUTH */\n    ]: \"This user's credential isn't valid for this project. This can happen \" + \"if the user's token has been tampered with, or if the user isn't for \" + 'the project associated with this API key.',\n    [\"invalid-auth-event\"\n    /* INVALID_AUTH_EVENT */\n    ]: 'An internal AuthError has occurred.',\n    [\"invalid-verification-code\"\n    /* INVALID_CODE */\n    ]: 'The SMS verification code used to create the phone auth credential is ' + 'invalid. Please resend the verification code sms and be sure to use the ' + 'verification code provided by the user.',\n    [\"invalid-continue-uri\"\n    /* INVALID_CONTINUE_URI */\n    ]: 'The continue URL provided in the request is invalid.',\n    [\"invalid-cordova-configuration\"\n    /* INVALID_CORDOVA_CONFIGURATION */\n    ]: 'The following Cordova plugins must be installed to enable OAuth sign-in: ' + 'cordova-plugin-buildinfo, cordova-universal-links-plugin, ' + 'cordova-plugin-browsertab, cordova-plugin-inappbrowser and ' + 'cordova-plugin-customurlscheme.',\n    [\"invalid-custom-token\"\n    /* INVALID_CUSTOM_TOKEN */\n    ]: 'The custom token format is incorrect. Please check the documentation.',\n    [\"invalid-dynamic-link-domain\"\n    /* INVALID_DYNAMIC_LINK_DOMAIN */\n    ]: 'The provided dynamic link domain is not configured or authorized for the current project.',\n    [\"invalid-email\"\n    /* INVALID_EMAIL */\n    ]: 'The email address is badly formatted.',\n    [\"invalid-emulator-scheme\"\n    /* INVALID_EMULATOR_SCHEME */\n    ]: 'Emulator URL must start with a valid scheme (http:// or https://).',\n    [\"invalid-api-key\"\n    /* INVALID_API_KEY */\n    ]: 'Your API key is invalid, please check you have copied it correctly.',\n    [\"invalid-cert-hash\"\n    /* INVALID_CERT_HASH */\n    ]: 'The SHA-1 certificate hash provided is invalid.',\n    [\"invalid-credential\"\n    /* INVALID_IDP_RESPONSE */\n    ]: 'The supplied auth credential is malformed or has expired.',\n    [\"invalid-message-payload\"\n    /* INVALID_MESSAGE_PAYLOAD */\n    ]: 'The email template corresponding to this action contains invalid characters in its message. ' + 'Please fix by going to the Auth email templates section in the Firebase Console.',\n    [\"invalid-multi-factor-session\"\n    /* INVALID_MFA_SESSION */\n    ]: 'The request does not contain a valid proof of first factor successful sign-in.',\n    [\"invalid-oauth-provider\"\n    /* INVALID_OAUTH_PROVIDER */\n    ]: 'EmailAuthProvider is not supported for this operation. This operation ' + 'only supports OAuth providers.',\n    [\"invalid-oauth-client-id\"\n    /* INVALID_OAUTH_CLIENT_ID */\n    ]: 'The OAuth client ID provided is either invalid or does not match the ' + 'specified API key.',\n    [\"unauthorized-domain\"\n    /* INVALID_ORIGIN */\n    ]: 'This domain is not authorized for OAuth operations for your Firebase ' + 'project. Edit the list of authorized domains from the Firebase console.',\n    [\"invalid-action-code\"\n    /* INVALID_OOB_CODE */\n    ]: 'The action code is invalid. This can happen if the code is malformed, ' + 'expired, or has already been used.',\n    [\"wrong-password\"\n    /* INVALID_PASSWORD */\n    ]: 'The password is invalid or the user does not have a password.',\n    [\"invalid-persistence-type\"\n    /* INVALID_PERSISTENCE */\n    ]: 'The specified persistence type is invalid. It can only be local, session or none.',\n    [\"invalid-phone-number\"\n    /* INVALID_PHONE_NUMBER */\n    ]: 'The format of the phone number provided is incorrect. Please enter the ' + 'phone number in a format that can be parsed into E.164 format. E.164 ' + 'phone numbers are written in the format [+][country code][subscriber ' + 'number including area code].',\n    [\"invalid-provider-id\"\n    /* INVALID_PROVIDER_ID */\n    ]: 'The specified provider ID is invalid.',\n    [\"invalid-recipient-email\"\n    /* INVALID_RECIPIENT_EMAIL */\n    ]: 'The email corresponding to this action failed to send as the provided ' + 'recipient email address is invalid.',\n    [\"invalid-sender\"\n    /* INVALID_SENDER */\n    ]: 'The email template corresponding to this action contains an invalid sender email or name. ' + 'Please fix by going to the Auth email templates section in the Firebase Console.',\n    [\"invalid-verification-id\"\n    /* INVALID_SESSION_INFO */\n    ]: 'The verification ID used to create the phone auth credential is invalid.',\n    [\"invalid-tenant-id\"\n    /* INVALID_TENANT_ID */\n    ]: \"The Auth instance's tenant ID is invalid.\",\n    [\"missing-android-pkg-name\"\n    /* MISSING_ANDROID_PACKAGE_NAME */\n    ]: 'An Android Package Name must be provided if the Android App is required to be installed.',\n    [\"auth-domain-config-required\"\n    /* MISSING_AUTH_DOMAIN */\n    ]: 'Be sure to include authDomain when calling firebase.initializeApp(), ' + 'by following the instructions in the Firebase console.',\n    [\"missing-app-credential\"\n    /* MISSING_APP_CREDENTIAL */\n    ]: 'The phone verification request is missing an application verifier ' + 'assertion. A reCAPTCHA response token needs to be provided.',\n    [\"missing-verification-code\"\n    /* MISSING_CODE */\n    ]: 'The phone auth credential was created with an empty SMS verification code.',\n    [\"missing-continue-uri\"\n    /* MISSING_CONTINUE_URI */\n    ]: 'A continue URL must be provided in the request.',\n    [\"missing-iframe-start\"\n    /* MISSING_IFRAME_START */\n    ]: 'An internal AuthError has occurred.',\n    [\"missing-ios-bundle-id\"\n    /* MISSING_IOS_BUNDLE_ID */\n    ]: 'An iOS Bundle ID must be provided if an App Store ID is provided.',\n    [\"missing-or-invalid-nonce\"\n    /* MISSING_OR_INVALID_NONCE */\n    ]: 'The request does not contain a valid nonce. This can occur if the ' + 'SHA-256 hash of the provided raw nonce does not match the hashed nonce ' + 'in the ID token payload.',\n    [\"missing-multi-factor-info\"\n    /* MISSING_MFA_INFO */\n    ]: 'No second factor identifier is provided.',\n    [\"missing-multi-factor-session\"\n    /* MISSING_MFA_SESSION */\n    ]: 'The request is missing proof of first factor successful sign-in.',\n    [\"missing-phone-number\"\n    /* MISSING_PHONE_NUMBER */\n    ]: 'To send verification codes, provide a phone number for the recipient.',\n    [\"missing-verification-id\"\n    /* MISSING_SESSION_INFO */\n    ]: 'The phone auth credential was created with an empty verification ID.',\n    [\"app-deleted\"\n    /* MODULE_DESTROYED */\n    ]: 'This instance of FirebaseApp has been deleted.',\n    [\"multi-factor-info-not-found\"\n    /* MFA_INFO_NOT_FOUND */\n    ]: 'The user does not have a second factor matching the identifier provided.',\n    [\"multi-factor-auth-required\"\n    /* MFA_REQUIRED */\n    ]: 'Proof of ownership of a second factor is required to complete sign-in.',\n    [\"account-exists-with-different-credential\"\n    /* NEED_CONFIRMATION */\n    ]: 'An account already exists with the same email address but different ' + 'sign-in credentials. Sign in using a provider associated with this ' + 'email address.',\n    [\"network-request-failed\"\n    /* NETWORK_REQUEST_FAILED */\n    ]: 'A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.',\n    [\"no-auth-event\"\n    /* NO_AUTH_EVENT */\n    ]: 'An internal AuthError has occurred.',\n    [\"no-such-provider\"\n    /* NO_SUCH_PROVIDER */\n    ]: 'User was not linked to an account with the given provider.',\n    [\"null-user\"\n    /* NULL_USER */\n    ]: 'A null user object was provided as the argument for an operation which ' + 'requires a non-null user object.',\n    [\"operation-not-allowed\"\n    /* OPERATION_NOT_ALLOWED */\n    ]: 'The given sign-in provider is disabled for this Firebase project. ' + 'Enable it in the Firebase console, under the sign-in method tab of the ' + 'Auth section.',\n    [\"operation-not-supported-in-this-environment\"\n    /* OPERATION_NOT_SUPPORTED */\n    ]: 'This operation is not supported in the environment this application is ' + 'running on. \"location.protocol\" must be http, https or chrome-extension' + ' and web storage must be enabled.',\n    [\"popup-blocked\"\n    /* POPUP_BLOCKED */\n    ]: 'Unable to establish a connection with the popup. It may have been blocked by the browser.',\n    [\"popup-closed-by-user\"\n    /* POPUP_CLOSED_BY_USER */\n    ]: 'The popup has been closed by the user before finalizing the operation.',\n    [\"provider-already-linked\"\n    /* PROVIDER_ALREADY_LINKED */\n    ]: 'User can only be linked to one identity for the given provider.',\n    [\"quota-exceeded\"\n    /* QUOTA_EXCEEDED */\n    ]: \"The project's quota for this operation has been exceeded.\",\n    [\"redirect-cancelled-by-user\"\n    /* REDIRECT_CANCELLED_BY_USER */\n    ]: 'The redirect operation has been cancelled by the user before finalizing.',\n    [\"redirect-operation-pending\"\n    /* REDIRECT_OPERATION_PENDING */\n    ]: 'A redirect sign-in operation is already pending.',\n    [\"rejected-credential\"\n    /* REJECTED_CREDENTIAL */\n    ]: 'The request contains malformed or mismatching credentials.',\n    [\"second-factor-already-in-use\"\n    /* SECOND_FACTOR_ALREADY_ENROLLED */\n    ]: 'The second factor is already enrolled on this account.',\n    [\"maximum-second-factor-count-exceeded\"\n    /* SECOND_FACTOR_LIMIT_EXCEEDED */\n    ]: 'The maximum allowed number of second factors on a user has been exceeded.',\n    [\"tenant-id-mismatch\"\n    /* TENANT_ID_MISMATCH */\n    ]: \"The provided tenant ID does not match the Auth instance's tenant ID\",\n    [\"timeout\"\n    /* TIMEOUT */\n    ]: 'The operation has timed out.',\n    [\"user-token-expired\"\n    /* TOKEN_EXPIRED */\n    ]: \"The user's credential is no longer valid. The user must sign in again.\",\n    [\"too-many-requests\"\n    /* TOO_MANY_ATTEMPTS_TRY_LATER */\n    ]: 'We have blocked all requests from this device due to unusual activity. ' + 'Try again later.',\n    [\"unauthorized-continue-uri\"\n    /* UNAUTHORIZED_DOMAIN */\n    ]: 'The domain of the continue URL is not whitelisted.  Please whitelist ' + 'the domain in the Firebase console.',\n    [\"unsupported-first-factor\"\n    /* UNSUPPORTED_FIRST_FACTOR */\n    ]: 'Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.',\n    [\"unsupported-persistence-type\"\n    /* UNSUPPORTED_PERSISTENCE */\n    ]: 'The current environment does not support the specified persistence type.',\n    [\"unsupported-tenant-operation\"\n    /* UNSUPPORTED_TENANT_OPERATION */\n    ]: 'This operation is not supported in a multi-tenant context.',\n    [\"unverified-email\"\n    /* UNVERIFIED_EMAIL */\n    ]: 'The operation requires a verified email.',\n    [\"user-cancelled\"\n    /* USER_CANCELLED */\n    ]: 'The user did not grant your application the permissions it requested.',\n    [\"user-not-found\"\n    /* USER_DELETED */\n    ]: 'There is no user record corresponding to this identifier. The user may ' + 'have been deleted.',\n    [\"user-disabled\"\n    /* USER_DISABLED */\n    ]: 'The user account has been disabled by an administrator.',\n    [\"user-mismatch\"\n    /* USER_MISMATCH */\n    ]: 'The supplied credentials do not correspond to the previously signed in user.',\n    [\"user-signed-out\"\n    /* USER_SIGNED_OUT */\n    ]: '',\n    [\"weak-password\"\n    /* WEAK_PASSWORD */\n    ]: 'The password must be 6 characters long or more.',\n    [\"web-storage-unsupported\"\n    /* WEB_STORAGE_UNSUPPORTED */\n    ]: 'This browser is not supported or 3rd party cookies and data may be disabled.',\n    [\"already-initialized\"\n    /* ALREADY_INITIALIZED */\n    ]: 'initializeAuth() has already been called with ' + 'different options. To avoid this error, call initializeAuth() with the ' + 'same options as when it was originally called, or call getAuth() to return the' + ' already initialized instance.'\n  };\n}\n\nfunction _prodErrorMap() {\n  // We will include this one message in the prod error map since by the very\n  // nature of this error, developers will never be able to see the message\n  // using the debugErrorMap (which is installed during auth initialization).\n  return {\n    [\"dependent-sdk-initialized-before-auth\"\n    /* DEPENDENT_SDK_INIT_BEFORE_AUTH */\n    ]: 'Another Firebase SDK was initialized and is trying to use Auth before Auth is ' + 'initialized. Please be sure to call `initializeAuth` or `getAuth` before ' + 'starting any other Firebase SDK.'\n  };\n}\n/**\r\n * A verbose error map with detailed descriptions for most error codes.\r\n *\r\n * See discussion at {@link AuthErrorMap}\r\n *\r\n * @public\r\n */\n\n\nconst debugErrorMap = _debugErrorMap;\n/**\r\n * A minimal error map with all verbose error messages stripped.\r\n *\r\n * See discussion at {@link AuthErrorMap}\r\n *\r\n * @public\r\n */\n\nexports.z = debugErrorMap;\nconst prodErrorMap = _prodErrorMap;\nexports.B = prodErrorMap;\n\nconst _DEFAULT_AUTH_ERROR_FACTORY = new _util.ErrorFactory('auth', 'Firebase', _prodErrorMap());\n/**\r\n * A map of potential `Auth` error codes, for easier comparison with errors\r\n * thrown by the SDK.\r\n *\r\n * @remarks\r\n * Note that you can't tree-shake individual keys\r\n * in the map, so by using the map you might substantially increase your\r\n * bundle size.\r\n *\r\n * @public\r\n */\n\n\nconst AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY = {\n  ADMIN_ONLY_OPERATION: 'auth/admin-restricted-operation',\n  ARGUMENT_ERROR: 'auth/argument-error',\n  APP_NOT_AUTHORIZED: 'auth/app-not-authorized',\n  APP_NOT_INSTALLED: 'auth/app-not-installed',\n  CAPTCHA_CHECK_FAILED: 'auth/captcha-check-failed',\n  CODE_EXPIRED: 'auth/code-expired',\n  CORDOVA_NOT_READY: 'auth/cordova-not-ready',\n  CORS_UNSUPPORTED: 'auth/cors-unsupported',\n  CREDENTIAL_ALREADY_IN_USE: 'auth/credential-already-in-use',\n  CREDENTIAL_MISMATCH: 'auth/custom-token-mismatch',\n  CREDENTIAL_TOO_OLD_LOGIN_AGAIN: 'auth/requires-recent-login',\n  DEPENDENT_SDK_INIT_BEFORE_AUTH: 'auth/dependent-sdk-initialized-before-auth',\n  DYNAMIC_LINK_NOT_ACTIVATED: 'auth/dynamic-link-not-activated',\n  EMAIL_CHANGE_NEEDS_VERIFICATION: 'auth/email-change-needs-verification',\n  EMAIL_EXISTS: 'auth/email-already-in-use',\n  EMULATOR_CONFIG_FAILED: 'auth/emulator-config-failed',\n  EXPIRED_OOB_CODE: 'auth/expired-action-code',\n  EXPIRED_POPUP_REQUEST: 'auth/cancelled-popup-request',\n  INTERNAL_ERROR: 'auth/internal-error',\n  INVALID_API_KEY: 'auth/invalid-api-key',\n  INVALID_APP_CREDENTIAL: 'auth/invalid-app-credential',\n  INVALID_APP_ID: 'auth/invalid-app-id',\n  INVALID_AUTH: 'auth/invalid-user-token',\n  INVALID_AUTH_EVENT: 'auth/invalid-auth-event',\n  INVALID_CERT_HASH: 'auth/invalid-cert-hash',\n  INVALID_CODE: 'auth/invalid-verification-code',\n  INVALID_CONTINUE_URI: 'auth/invalid-continue-uri',\n  INVALID_CORDOVA_CONFIGURATION: 'auth/invalid-cordova-configuration',\n  INVALID_CUSTOM_TOKEN: 'auth/invalid-custom-token',\n  INVALID_DYNAMIC_LINK_DOMAIN: 'auth/invalid-dynamic-link-domain',\n  INVALID_EMAIL: 'auth/invalid-email',\n  INVALID_EMULATOR_SCHEME: 'auth/invalid-emulator-scheme',\n  INVALID_IDP_RESPONSE: 'auth/invalid-credential',\n  INVALID_MESSAGE_PAYLOAD: 'auth/invalid-message-payload',\n  INVALID_MFA_SESSION: 'auth/invalid-multi-factor-session',\n  INVALID_OAUTH_CLIENT_ID: 'auth/invalid-oauth-client-id',\n  INVALID_OAUTH_PROVIDER: 'auth/invalid-oauth-provider',\n  INVALID_OOB_CODE: 'auth/invalid-action-code',\n  INVALID_ORIGIN: 'auth/unauthorized-domain',\n  INVALID_PASSWORD: 'auth/wrong-password',\n  INVALID_PERSISTENCE: 'auth/invalid-persistence-type',\n  INVALID_PHONE_NUMBER: 'auth/invalid-phone-number',\n  INVALID_PROVIDER_ID: 'auth/invalid-provider-id',\n  INVALID_RECIPIENT_EMAIL: 'auth/invalid-recipient-email',\n  INVALID_SENDER: 'auth/invalid-sender',\n  INVALID_SESSION_INFO: 'auth/invalid-verification-id',\n  INVALID_TENANT_ID: 'auth/invalid-tenant-id',\n  MFA_INFO_NOT_FOUND: 'auth/multi-factor-info-not-found',\n  MFA_REQUIRED: 'auth/multi-factor-auth-required',\n  MISSING_ANDROID_PACKAGE_NAME: 'auth/missing-android-pkg-name',\n  MISSING_APP_CREDENTIAL: 'auth/missing-app-credential',\n  MISSING_AUTH_DOMAIN: 'auth/auth-domain-config-required',\n  MISSING_CODE: 'auth/missing-verification-code',\n  MISSING_CONTINUE_URI: 'auth/missing-continue-uri',\n  MISSING_IFRAME_START: 'auth/missing-iframe-start',\n  MISSING_IOS_BUNDLE_ID: 'auth/missing-ios-bundle-id',\n  MISSING_OR_INVALID_NONCE: 'auth/missing-or-invalid-nonce',\n  MISSING_MFA_INFO: 'auth/missing-multi-factor-info',\n  MISSING_MFA_SESSION: 'auth/missing-multi-factor-session',\n  MISSING_PHONE_NUMBER: 'auth/missing-phone-number',\n  MISSING_SESSION_INFO: 'auth/missing-verification-id',\n  MODULE_DESTROYED: 'auth/app-deleted',\n  NEED_CONFIRMATION: 'auth/account-exists-with-different-credential',\n  NETWORK_REQUEST_FAILED: 'auth/network-request-failed',\n  NULL_USER: 'auth/null-user',\n  NO_AUTH_EVENT: 'auth/no-auth-event',\n  NO_SUCH_PROVIDER: 'auth/no-such-provider',\n  OPERATION_NOT_ALLOWED: 'auth/operation-not-allowed',\n  OPERATION_NOT_SUPPORTED: 'auth/operation-not-supported-in-this-environment',\n  POPUP_BLOCKED: 'auth/popup-blocked',\n  POPUP_CLOSED_BY_USER: 'auth/popup-closed-by-user',\n  PROVIDER_ALREADY_LINKED: 'auth/provider-already-linked',\n  QUOTA_EXCEEDED: 'auth/quota-exceeded',\n  REDIRECT_CANCELLED_BY_USER: 'auth/redirect-cancelled-by-user',\n  REDIRECT_OPERATION_PENDING: 'auth/redirect-operation-pending',\n  REJECTED_CREDENTIAL: 'auth/rejected-credential',\n  SECOND_FACTOR_ALREADY_ENROLLED: 'auth/second-factor-already-in-use',\n  SECOND_FACTOR_LIMIT_EXCEEDED: 'auth/maximum-second-factor-count-exceeded',\n  TENANT_ID_MISMATCH: 'auth/tenant-id-mismatch',\n  TIMEOUT: 'auth/timeout',\n  TOKEN_EXPIRED: 'auth/user-token-expired',\n  TOO_MANY_ATTEMPTS_TRY_LATER: 'auth/too-many-requests',\n  UNAUTHORIZED_DOMAIN: 'auth/unauthorized-continue-uri',\n  UNSUPPORTED_FIRST_FACTOR: 'auth/unsupported-first-factor',\n  UNSUPPORTED_PERSISTENCE: 'auth/unsupported-persistence-type',\n  UNSUPPORTED_TENANT_OPERATION: 'auth/unsupported-tenant-operation',\n  UNVERIFIED_EMAIL: 'auth/unverified-email',\n  USER_CANCELLED: 'auth/user-cancelled',\n  USER_DELETED: 'auth/user-not-found',\n  USER_DISABLED: 'auth/user-disabled',\n  USER_MISMATCH: 'auth/user-mismatch',\n  USER_SIGNED_OUT: 'auth/user-signed-out',\n  WEAK_PASSWORD: 'auth/weak-password',\n  WEB_STORAGE_UNSUPPORTED: 'auth/web-storage-unsupported',\n  ALREADY_INITIALIZED: 'auth/already-initialized'\n};\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.C = AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY;\nconst logClient = new _logger.Logger('@firebase/auth');\n\nfunction _logError(msg, ...args) {\n  if (logClient.logLevel <= _logger.LogLevel.ERROR) {\n    logClient.error(`Auth (${_app.SDK_VERSION}): ${msg}`, ...args);\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _fail(authOrCode, ...rest) {\n  throw createErrorInternal(authOrCode, ...rest);\n}\n\nfunction _createError(authOrCode, ...rest) {\n  return createErrorInternal(authOrCode, ...rest);\n}\n\nfunction _errorWithCustomMessage(auth, code, message) {\n  const errorMap = Object.assign(Object.assign({}, prodErrorMap()), {\n    [code]: message\n  });\n  const factory = new _util.ErrorFactory('auth', 'Firebase', errorMap);\n  return factory.create(code, {\n    appName: auth.name\n  });\n}\n\nfunction _assertInstanceOf(auth, object, instance) {\n  const constructorInstance = instance;\n\n  if (!(object instanceof constructorInstance)) {\n    if (constructorInstance.name !== object.constructor.name) {\n      _fail(auth, \"argument-error\"\n      /* ARGUMENT_ERROR */\n      );\n    }\n\n    throw _errorWithCustomMessage(auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    , `Type of ${object.constructor.name} does not match expected instance.` + `Did you pass a reference from a different Auth SDK?`);\n  }\n}\n\nfunction createErrorInternal(authOrCode, ...rest) {\n  if (typeof authOrCode !== 'string') {\n    const code = rest[0];\n    const fullParams = [...rest.slice(1)];\n\n    if (fullParams[0]) {\n      fullParams[0].appName = authOrCode.name;\n    }\n\n    return authOrCode._errorFactory.create(code, ...fullParams);\n  }\n\n  return _DEFAULT_AUTH_ERROR_FACTORY.create(authOrCode, ...rest);\n}\n\nfunction _assert(assertion, authOrCode, ...rest) {\n  if (!assertion) {\n    throw createErrorInternal(authOrCode, ...rest);\n  }\n}\n/**\r\n * Unconditionally fails, throwing an internal error with the given message.\r\n *\r\n * @param failure type of failure encountered\r\n * @throws Error\r\n */\n\n\nfunction debugFail(failure) {\n  // Log the failure in addition to throw an exception, just in case the\n  // exception is swallowed.\n  const message = `INTERNAL ASSERTION FAILED: ` + failure;\n\n  _logError(message); // NOTE: We don't use FirebaseError here because these are internal failures\n  // that cannot be handled by the user. (Also it would create a circular\n  // dependency between the error and assert modules which doesn't work.)\n\n\n  throw new Error(message);\n}\n/**\r\n * Fails if the given assertion condition is false, throwing an Error with the\r\n * given message if it did.\r\n *\r\n * @param assertion\r\n * @param message\r\n */\n\n\nfunction debugAssert(assertion, message) {\n  if (!assertion) {\n    debugFail(message);\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst instanceCache = new Map();\n\nfunction _getInstance(cls) {\n  debugAssert(cls instanceof Function, 'Expected a class definition');\n  let instance = instanceCache.get(cls);\n\n  if (instance) {\n    debugAssert(instance instanceof cls, 'Instance stored in cache mismatched with class');\n    return instance;\n  }\n\n  instance = new cls();\n  instanceCache.set(cls, instance);\n  return instance;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Initializes an {@link Auth} instance with fine-grained control over\r\n * {@link Dependencies}.\r\n *\r\n * @remarks\r\n *\r\n * This function allows more control over the {@link Auth} instance than\r\n * {@link getAuth}. `getAuth` uses platform-specific defaults to supply\r\n * the {@link Dependencies}. In general, `getAuth` is the easiest way to\r\n * initialize Auth and works for most use cases. Use `initializeAuth` if you\r\n * need control over which persistence layer is used, or to minimize bundle\r\n * size if you're not using either `signInWithPopup` or `signInWithRedirect`.\r\n *\r\n * For example, if your app only uses anonymous accounts and you only want\r\n * accounts saved for the current session, initialize `Auth` with:\r\n *\r\n * ```js\r\n * const auth = initializeAuth(app, {\r\n *   persistence: browserSessionPersistence,\r\n *   popupRedirectResolver: undefined,\r\n * });\r\n * ```\r\n *\r\n * @public\r\n */\n\n\nfunction initializeAuth(app, deps) {\n  const provider = (0, _app._getProvider)(app, 'auth');\n\n  if (provider.isInitialized()) {\n    const auth = provider.getImmediate();\n    const initialOptions = provider.getOptions();\n\n    if ((0, _util.deepEqual)(initialOptions, deps !== null && deps !== void 0 ? deps : {})) {\n      return auth;\n    } else {\n      _fail(auth, \"already-initialized\"\n      /* ALREADY_INITIALIZED */\n      );\n    }\n  }\n\n  const auth = provider.initialize({\n    options: deps\n  });\n  return auth;\n}\n\nfunction _initializeAuthInstance(auth, deps) {\n  const persistence = (deps === null || deps === void 0 ? void 0 : deps.persistence) || [];\n  const hierarchy = (Array.isArray(persistence) ? persistence : [persistence]).map(_getInstance);\n\n  if (deps === null || deps === void 0 ? void 0 : deps.errorMap) {\n    auth._updateErrorMap(deps.errorMap);\n  } // This promise is intended to float; auth initialization happens in the\n  // background, meanwhile the auth object may be used by the app.\n  // eslint-disable-next-line @typescript-eslint/no-floating-promises\n\n\n  auth._initializeWithPersistence(hierarchy, deps === null || deps === void 0 ? void 0 : deps.popupRedirectResolver);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _getCurrentUrl() {\n  var _a;\n\n  return typeof self !== 'undefined' && ((_a = self.location) === null || _a === void 0 ? void 0 : _a.href) || '';\n}\n\nfunction _isHttpOrHttps() {\n  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\n}\n\nfunction _getCurrentScheme() {\n  var _a;\n\n  return typeof self !== 'undefined' && ((_a = self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Determine whether the browser is working online\r\n */\n\n\nfunction _isOnline() {\n  if (typeof navigator !== 'undefined' && navigator && 'onLine' in navigator && typeof navigator.onLine === 'boolean' && (_isHttpOrHttps() || (0, _util.isBrowserExtension)() || 'connection' in navigator)) {\n    return navigator.onLine;\n  } // If we can't determine the state, assume it is online.\n\n\n  return true;\n}\n\nfunction _getUserLanguage() {\n  if (typeof navigator === 'undefined') {\n    return null;\n  }\n\n  const navigatorLanguage = navigator;\n  return (// Most reliable, but only supported in Chrome/Firefox.\n    navigatorLanguage.languages && navigatorLanguage.languages[0] || // Supported in most browsers, but returns the language of the browser\n    // UI, not the language set in browser settings.\n    navigatorLanguage.language || // Couldn't determine language.\n    null\n  );\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * A structure to help pick between a range of long and short delay durations\r\n * depending on the current environment. In general, the long delay is used for\r\n * mobile environments whereas short delays are used for desktop environments.\r\n */\n\n\nclass Delay {\n  constructor(shortDelay, longDelay) {\n    this.shortDelay = shortDelay;\n    this.longDelay = longDelay; // Internal error when improperly initialized.\n\n    debugAssert(longDelay > shortDelay, 'Short delay should be less than long delay!');\n    this.isMobile = (0, _util.isMobileCordova)() || (0, _util.isReactNative)();\n  }\n\n  get() {\n    if (!_isOnline()) {\n      // Pick the shorter timeout.\n      return Math.min(5000\n      /* OFFLINE */\n      , this.shortDelay);\n    } // If running in a mobile environment, return the long delay, otherwise\n    // return the short delay.\n    // This could be improved in the future to dynamically change based on other\n    // variables instead of just reading the current environment.\n\n\n    return this.isMobile ? this.longDelay : this.shortDelay;\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _emulatorUrl(config, path) {\n  debugAssert(config.emulator, 'Emulator should always be set here');\n  const {\n    url\n  } = config.emulator;\n\n  if (!path) {\n    return url;\n  }\n\n  return `${url}${path.startsWith('/') ? path.slice(1) : path}`;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass FetchProvider {\n  static initialize(fetchImpl, headersImpl, responseImpl) {\n    this.fetchImpl = fetchImpl;\n\n    if (headersImpl) {\n      this.headersImpl = headersImpl;\n    }\n\n    if (responseImpl) {\n      this.responseImpl = responseImpl;\n    }\n  }\n\n  static fetch() {\n    if (this.fetchImpl) {\n      return this.fetchImpl;\n    }\n\n    if (typeof self !== 'undefined' && 'fetch' in self) {\n      return self.fetch;\n    }\n\n    debugFail('Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill');\n  }\n\n  static headers() {\n    if (this.headersImpl) {\n      return this.headersImpl;\n    }\n\n    if (typeof self !== 'undefined' && 'Headers' in self) {\n      return self.Headers;\n    }\n\n    debugFail('Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill');\n  }\n\n  static response() {\n    if (this.responseImpl) {\n      return this.responseImpl;\n    }\n\n    if (typeof self !== 'undefined' && 'Response' in self) {\n      return self.Response;\n    }\n\n    debugFail('Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill');\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Map from errors returned by the server to errors to developer visible errors\r\n */\n\n\nexports.aI = FetchProvider;\nconst SERVER_ERROR_MAP = {\n  // Custom token errors.\n  [\"CREDENTIAL_MISMATCH\"\n  /* CREDENTIAL_MISMATCH */\n  ]: \"custom-token-mismatch\"\n  /* CREDENTIAL_MISMATCH */\n  ,\n  // This can only happen if the SDK sends a bad request.\n  [\"MISSING_CUSTOM_TOKEN\"\n  /* MISSING_CUSTOM_TOKEN */\n  ]: \"internal-error\"\n  /* INTERNAL_ERROR */\n  ,\n  // Create Auth URI errors.\n  [\"INVALID_IDENTIFIER\"\n  /* INVALID_IDENTIFIER */\n  ]: \"invalid-email\"\n  /* INVALID_EMAIL */\n  ,\n  // This can only happen if the SDK sends a bad request.\n  [\"MISSING_CONTINUE_URI\"\n  /* MISSING_CONTINUE_URI */\n  ]: \"internal-error\"\n  /* INTERNAL_ERROR */\n  ,\n  // Sign in with email and password errors (some apply to sign up too).\n  [\"INVALID_PASSWORD\"\n  /* INVALID_PASSWORD */\n  ]: \"wrong-password\"\n  /* INVALID_PASSWORD */\n  ,\n  // This can only happen if the SDK sends a bad request.\n  [\"MISSING_PASSWORD\"\n  /* MISSING_PASSWORD */\n  ]: \"internal-error\"\n  /* INTERNAL_ERROR */\n  ,\n  // Sign up with email and password errors.\n  [\"EMAIL_EXISTS\"\n  /* EMAIL_EXISTS */\n  ]: \"email-already-in-use\"\n  /* EMAIL_EXISTS */\n  ,\n  [\"PASSWORD_LOGIN_DISABLED\"\n  /* PASSWORD_LOGIN_DISABLED */\n  ]: \"operation-not-allowed\"\n  /* OPERATION_NOT_ALLOWED */\n  ,\n  // Verify assertion for sign in with credential errors:\n  [\"INVALID_IDP_RESPONSE\"\n  /* INVALID_IDP_RESPONSE */\n  ]: \"invalid-credential\"\n  /* INVALID_IDP_RESPONSE */\n  ,\n  [\"INVALID_PENDING_TOKEN\"\n  /* INVALID_PENDING_TOKEN */\n  ]: \"invalid-credential\"\n  /* INVALID_IDP_RESPONSE */\n  ,\n  [\"FEDERATED_USER_ID_ALREADY_LINKED\"\n  /* FEDERATED_USER_ID_ALREADY_LINKED */\n  ]: \"credential-already-in-use\"\n  /* CREDENTIAL_ALREADY_IN_USE */\n  ,\n  // This can only happen if the SDK sends a bad request.\n  [\"MISSING_REQ_TYPE\"\n  /* MISSING_REQ_TYPE */\n  ]: \"internal-error\"\n  /* INTERNAL_ERROR */\n  ,\n  // Send Password reset email errors:\n  [\"EMAIL_NOT_FOUND\"\n  /* EMAIL_NOT_FOUND */\n  ]: \"user-not-found\"\n  /* USER_DELETED */\n  ,\n  [\"RESET_PASSWORD_EXCEED_LIMIT\"\n  /* RESET_PASSWORD_EXCEED_LIMIT */\n  ]: \"too-many-requests\"\n  /* TOO_MANY_ATTEMPTS_TRY_LATER */\n  ,\n  [\"EXPIRED_OOB_CODE\"\n  /* EXPIRED_OOB_CODE */\n  ]: \"expired-action-code\"\n  /* EXPIRED_OOB_CODE */\n  ,\n  [\"INVALID_OOB_CODE\"\n  /* INVALID_OOB_CODE */\n  ]: \"invalid-action-code\"\n  /* INVALID_OOB_CODE */\n  ,\n  // This can only happen if the SDK sends a bad request.\n  [\"MISSING_OOB_CODE\"\n  /* MISSING_OOB_CODE */\n  ]: \"internal-error\"\n  /* INTERNAL_ERROR */\n  ,\n  // Operations that require ID token in request:\n  [\"CREDENTIAL_TOO_OLD_LOGIN_AGAIN\"\n  /* CREDENTIAL_TOO_OLD_LOGIN_AGAIN */\n  ]: \"requires-recent-login\"\n  /* CREDENTIAL_TOO_OLD_LOGIN_AGAIN */\n  ,\n  [\"INVALID_ID_TOKEN\"\n  /* INVALID_ID_TOKEN */\n  ]: \"invalid-user-token\"\n  /* INVALID_AUTH */\n  ,\n  [\"TOKEN_EXPIRED\"\n  /* TOKEN_EXPIRED */\n  ]: \"user-token-expired\"\n  /* TOKEN_EXPIRED */\n  ,\n  [\"USER_NOT_FOUND\"\n  /* USER_NOT_FOUND */\n  ]: \"user-token-expired\"\n  /* TOKEN_EXPIRED */\n  ,\n  // Other errors.\n  [\"TOO_MANY_ATTEMPTS_TRY_LATER\"\n  /* TOO_MANY_ATTEMPTS_TRY_LATER */\n  ]: \"too-many-requests\"\n  /* TOO_MANY_ATTEMPTS_TRY_LATER */\n  ,\n  // Phone Auth related errors.\n  [\"INVALID_CODE\"\n  /* INVALID_CODE */\n  ]: \"invalid-verification-code\"\n  /* INVALID_CODE */\n  ,\n  [\"INVALID_SESSION_INFO\"\n  /* INVALID_SESSION_INFO */\n  ]: \"invalid-verification-id\"\n  /* INVALID_SESSION_INFO */\n  ,\n  [\"INVALID_TEMPORARY_PROOF\"\n  /* INVALID_TEMPORARY_PROOF */\n  ]: \"invalid-credential\"\n  /* INVALID_IDP_RESPONSE */\n  ,\n  [\"MISSING_SESSION_INFO\"\n  /* MISSING_SESSION_INFO */\n  ]: \"missing-verification-id\"\n  /* MISSING_SESSION_INFO */\n  ,\n  [\"SESSION_EXPIRED\"\n  /* SESSION_EXPIRED */\n  ]: \"code-expired\"\n  /* CODE_EXPIRED */\n  ,\n  // Other action code errors when additional settings passed.\n  // MISSING_CONTINUE_URI is getting mapped to INTERNAL_ERROR above.\n  // This is OK as this error will be caught by client side validation.\n  [\"MISSING_ANDROID_PACKAGE_NAME\"\n  /* MISSING_ANDROID_PACKAGE_NAME */\n  ]: \"missing-android-pkg-name\"\n  /* MISSING_ANDROID_PACKAGE_NAME */\n  ,\n  [\"UNAUTHORIZED_DOMAIN\"\n  /* UNAUTHORIZED_DOMAIN */\n  ]: \"unauthorized-continue-uri\"\n  /* UNAUTHORIZED_DOMAIN */\n  ,\n  // getProjectConfig errors when clientId is passed.\n  [\"INVALID_OAUTH_CLIENT_ID\"\n  /* INVALID_OAUTH_CLIENT_ID */\n  ]: \"invalid-oauth-client-id\"\n  /* INVALID_OAUTH_CLIENT_ID */\n  ,\n  // User actions (sign-up or deletion) disabled errors.\n  [\"ADMIN_ONLY_OPERATION\"\n  /* ADMIN_ONLY_OPERATION */\n  ]: \"admin-restricted-operation\"\n  /* ADMIN_ONLY_OPERATION */\n  ,\n  // Multi factor related errors.\n  [\"INVALID_MFA_PENDING_CREDENTIAL\"\n  /* INVALID_MFA_PENDING_CREDENTIAL */\n  ]: \"invalid-multi-factor-session\"\n  /* INVALID_MFA_SESSION */\n  ,\n  [\"MFA_ENROLLMENT_NOT_FOUND\"\n  /* MFA_ENROLLMENT_NOT_FOUND */\n  ]: \"multi-factor-info-not-found\"\n  /* MFA_INFO_NOT_FOUND */\n  ,\n  [\"MISSING_MFA_ENROLLMENT_ID\"\n  /* MISSING_MFA_ENROLLMENT_ID */\n  ]: \"missing-multi-factor-info\"\n  /* MISSING_MFA_INFO */\n  ,\n  [\"MISSING_MFA_PENDING_CREDENTIAL\"\n  /* MISSING_MFA_PENDING_CREDENTIAL */\n  ]: \"missing-multi-factor-session\"\n  /* MISSING_MFA_SESSION */\n  ,\n  [\"SECOND_FACTOR_EXISTS\"\n  /* SECOND_FACTOR_EXISTS */\n  ]: \"second-factor-already-in-use\"\n  /* SECOND_FACTOR_ALREADY_ENROLLED */\n  ,\n  [\"SECOND_FACTOR_LIMIT_EXCEEDED\"\n  /* SECOND_FACTOR_LIMIT_EXCEEDED */\n  ]: \"maximum-second-factor-count-exceeded\"\n  /* SECOND_FACTOR_LIMIT_EXCEEDED */\n  ,\n  // Blocking functions related errors.\n  [\"BLOCKING_FUNCTION_ERROR_RESPONSE\"\n  /* BLOCKING_FUNCTION_ERROR_RESPONSE */\n  ]: \"internal-error\"\n  /* INTERNAL_ERROR */\n\n};\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nconst DEFAULT_API_TIMEOUT_MS = new Delay(30000, 60000);\n\nfunction _addTidIfNecessary(auth, request) {\n  if (auth.tenantId && !request.tenantId) {\n    return Object.assign(Object.assign({}, request), {\n      tenantId: auth.tenantId\n    });\n  }\n\n  return request;\n}\n\nasync function _performApiRequest(auth, method, path, request, customErrorMap = {}) {\n  return _performFetchWithErrorHandling(auth, customErrorMap, async () => {\n    let body = {};\n    let params = {};\n\n    if (request) {\n      if (method === \"GET\"\n      /* GET */\n      ) {\n        params = request;\n      } else {\n        body = {\n          body: JSON.stringify(request)\n        };\n      }\n    }\n\n    const query = (0, _util.querystring)(Object.assign({\n      key: auth.config.apiKey\n    }, params)).slice(1);\n    const headers = await auth._getAdditionalHeaders();\n    headers[\"Content-Type\"\n    /* CONTENT_TYPE */\n    ] = 'application/json';\n\n    if (auth.languageCode) {\n      headers[\"X-Firebase-Locale\"\n      /* X_FIREBASE_LOCALE */\n      ] = auth.languageCode;\n    }\n\n    return FetchProvider.fetch()(_getFinalTarget(auth, auth.config.apiHost, path, query), Object.assign({\n      method,\n      headers,\n      referrerPolicy: 'no-referrer'\n    }, body));\n  });\n}\n\nasync function _performFetchWithErrorHandling(auth, customErrorMap, fetchFn) {\n  auth._canInitEmulator = false;\n  const errorMap = Object.assign(Object.assign({}, SERVER_ERROR_MAP), customErrorMap);\n\n  try {\n    const networkTimeout = new NetworkTimeout(auth);\n    const response = await Promise.race([fetchFn(), networkTimeout.promise]); // If we've reached this point, the fetch succeeded and the networkTimeout\n    // didn't throw; clear the network timeout delay so that Node won't hang\n\n    networkTimeout.clearNetworkTimeout();\n    const json = await response.json();\n\n    if ('needConfirmation' in json) {\n      throw _makeTaggedError(auth, \"account-exists-with-different-credential\"\n      /* NEED_CONFIRMATION */\n      , json);\n    }\n\n    if (response.ok && !('errorMessage' in json)) {\n      return json;\n    } else {\n      const errorMessage = response.ok ? json.errorMessage : json.error.message;\n      const [serverErrorCode, serverErrorMessage] = errorMessage.split(' : ');\n\n      if (serverErrorCode === \"FEDERATED_USER_ID_ALREADY_LINKED\"\n      /* FEDERATED_USER_ID_ALREADY_LINKED */\n      ) {\n        throw _makeTaggedError(auth, \"credential-already-in-use\"\n        /* CREDENTIAL_ALREADY_IN_USE */\n        , json);\n      } else if (serverErrorCode === \"EMAIL_EXISTS\"\n      /* EMAIL_EXISTS */\n      ) {\n        throw _makeTaggedError(auth, \"email-already-in-use\"\n        /* EMAIL_EXISTS */\n        , json);\n      }\n\n      const authError = errorMap[serverErrorCode] || serverErrorCode.toLowerCase().replace(/[_\\s]+/g, '-');\n\n      if (serverErrorMessage) {\n        throw _errorWithCustomMessage(auth, authError, serverErrorMessage);\n      } else {\n        _fail(auth, authError);\n      }\n    }\n  } catch (e) {\n    if (e instanceof _util.FirebaseError) {\n      throw e;\n    }\n\n    _fail(auth, \"network-request-failed\"\n    /* NETWORK_REQUEST_FAILED */\n    );\n  }\n}\n\nasync function _performSignInRequest(auth, method, path, request, customErrorMap = {}) {\n  const serverResponse = await _performApiRequest(auth, method, path, request, customErrorMap);\n\n  if ('mfaPendingCredential' in serverResponse) {\n    _fail(auth, \"multi-factor-auth-required\"\n    /* MFA_REQUIRED */\n    , {\n      _serverResponse: serverResponse\n    });\n  }\n\n  return serverResponse;\n}\n\nfunction _getFinalTarget(auth, host, path, query) {\n  const base = `${host}${path}?${query}`;\n\n  if (!auth.config.emulator) {\n    return `${auth.config.apiScheme}://${base}`;\n  }\n\n  return _emulatorUrl(auth.config, base);\n}\n\nclass NetworkTimeout {\n  constructor(auth) {\n    this.auth = auth; // Node timers and browser timers are fundamentally incompatible, but we\n    // don't care about the value here\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.timer = null;\n    this.promise = new Promise((_, reject) => {\n      this.timer = setTimeout(() => {\n        return reject(_createError(this.auth, \"network-request-failed\"\n        /* NETWORK_REQUEST_FAILED */\n        ));\n      }, DEFAULT_API_TIMEOUT_MS.get());\n    });\n  }\n\n  clearNetworkTimeout() {\n    clearTimeout(this.timer);\n  }\n\n}\n\nfunction _makeTaggedError(auth, code, response) {\n  const errorParams = {\n    appName: auth.name\n  };\n\n  if (response.email) {\n    errorParams.email = response.email;\n  }\n\n  if (response.phoneNumber) {\n    errorParams.phoneNumber = response.phoneNumber;\n  }\n\n  const error = _createError(auth, code, errorParams); // We know customData is defined on error because errorParams is defined\n\n\n  error.customData._tokenResponse = response;\n  return error;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function deleteAccount(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:delete\"\n  /* DELETE_ACCOUNT */\n  , request);\n}\n\nasync function deleteLinkedAccounts(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:update\"\n  /* SET_ACCOUNT_INFO */\n  , request);\n}\n\nasync function getAccountInfo(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:lookup\"\n  /* GET_ACCOUNT_INFO */\n  , request);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction utcTimestampToDateString(utcTimestamp) {\n  if (!utcTimestamp) {\n    return undefined;\n  }\n\n  try {\n    // Convert to date object.\n    const date = new Date(Number(utcTimestamp)); // Test date is valid.\n\n    if (!isNaN(date.getTime())) {\n      // Convert to UTC date string.\n      return date.toUTCString();\n    }\n  } catch (e) {// Do nothing. undefined will be returned.\n  }\n\n  return undefined;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns a JSON Web Token (JWT) used to identify the user to a Firebase service.\r\n *\r\n * @remarks\r\n * Returns the current token if it has not expired or if it will not expire in the next five\r\n * minutes. Otherwise, this will refresh the token and return a new one.\r\n *\r\n * @param user - The user.\r\n * @param forceRefresh - Force refresh regardless of token expiration.\r\n *\r\n * @public\r\n */\n\n\nfunction getIdToken(user, forceRefresh = false) {\n  return (0, _util.getModularInstance)(user).getIdToken(forceRefresh);\n}\n/**\r\n * Returns a deserialized JSON Web Token (JWT) used to identitfy the user to a Firebase service.\r\n *\r\n * @remarks\r\n * Returns the current token if it has not expired or if it will not expire in the next five\r\n * minutes. Otherwise, this will refresh the token and return a new one.\r\n *\r\n * @param user - The user.\r\n * @param forceRefresh - Force refresh regardless of token expiration.\r\n *\r\n * @public\r\n */\n\n\nasync function getIdTokenResult(user, forceRefresh = false) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  const token = await userInternal.getIdToken(forceRefresh);\n\n  const claims = _parseToken(token);\n\n  _assert(claims && claims.exp && claims.auth_time && claims.iat, userInternal.auth, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  const firebase = typeof claims.firebase === 'object' ? claims.firebase : undefined;\n  const signInProvider = firebase === null || firebase === void 0 ? void 0 : firebase['sign_in_provider'];\n  return {\n    claims,\n    token,\n    authTime: utcTimestampToDateString(secondsStringToMilliseconds(claims.auth_time)),\n    issuedAtTime: utcTimestampToDateString(secondsStringToMilliseconds(claims.iat)),\n    expirationTime: utcTimestampToDateString(secondsStringToMilliseconds(claims.exp)),\n    signInProvider: signInProvider || null,\n    signInSecondFactor: (firebase === null || firebase === void 0 ? void 0 : firebase['sign_in_second_factor']) || null\n  };\n}\n\nfunction secondsStringToMilliseconds(seconds) {\n  return Number(seconds) * 1000;\n}\n\nfunction _parseToken(token) {\n  const [algorithm, payload, signature] = token.split('.');\n\n  if (algorithm === undefined || payload === undefined || signature === undefined) {\n    _logError('JWT malformed, contained fewer than 3 sections');\n\n    return null;\n  }\n\n  try {\n    const decoded = (0, _util.base64Decode)(payload);\n\n    if (!decoded) {\n      _logError('Failed to decode base64 JWT payload');\n\n      return null;\n    }\n\n    return JSON.parse(decoded);\n  } catch (e) {\n    _logError('Caught error parsing JWT payload as JSON', e);\n\n    return null;\n  }\n}\n/**\r\n * Extract expiresIn TTL from a token by subtracting the expiration from the issuance.\r\n */\n\n\nfunction _tokenExpiresIn(token) {\n  const parsedToken = _parseToken(token);\n\n  _assert(parsedToken, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  _assert(typeof parsedToken.exp !== 'undefined', \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  _assert(typeof parsedToken.iat !== 'undefined', \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  return Number(parsedToken.exp) - Number(parsedToken.iat);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function _logoutIfInvalidated(user, promise, bypassAuthState = false) {\n  if (bypassAuthState) {\n    return promise;\n  }\n\n  try {\n    return await promise;\n  } catch (e) {\n    if (e instanceof _util.FirebaseError && isUserInvalidated(e)) {\n      if (user.auth.currentUser === user) {\n        await user.auth.signOut();\n      }\n    }\n\n    throw e;\n  }\n}\n\nfunction isUserInvalidated({\n  code\n}) {\n  return code === `auth/${\"user-disabled\"\n  /* USER_DISABLED */\n  }` || code === `auth/${\"user-token-expired\"\n  /* TOKEN_EXPIRED */\n  }`;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass ProactiveRefresh {\n  constructor(user) {\n    this.user = user;\n    this.isRunning = false; // Node timers and browser timers return fundamentally different types.\n    // We don't actually care what the value is but TS won't accept unknown and\n    // we can't cast properly in both environments.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.timerId = null;\n    this.errorBackoff = 30000\n    /* RETRY_BACKOFF_MIN */\n    ;\n  }\n\n  _start() {\n    if (this.isRunning) {\n      return;\n    }\n\n    this.isRunning = true;\n    this.schedule();\n  }\n\n  _stop() {\n    if (!this.isRunning) {\n      return;\n    }\n\n    this.isRunning = false;\n\n    if (this.timerId !== null) {\n      clearTimeout(this.timerId);\n    }\n  }\n\n  getInterval(wasError) {\n    var _a;\n\n    if (wasError) {\n      const interval = this.errorBackoff;\n      this.errorBackoff = Math.min(this.errorBackoff * 2, 960000\n      /* RETRY_BACKOFF_MAX */\n      );\n      return interval;\n    } else {\n      // Reset the error backoff\n      this.errorBackoff = 30000\n      /* RETRY_BACKOFF_MIN */\n      ;\n      const expTime = (_a = this.user.stsTokenManager.expirationTime) !== null && _a !== void 0 ? _a : 0;\n      const interval = expTime - Date.now() - 300000\n      /* OFFSET */\n      ;\n      return Math.max(0, interval);\n    }\n  }\n\n  schedule(wasError = false) {\n    if (!this.isRunning) {\n      // Just in case...\n      return;\n    }\n\n    const interval = this.getInterval(wasError);\n    this.timerId = setTimeout(async () => {\n      await this.iteration();\n    }, interval);\n  }\n\n  async iteration() {\n    try {\n      await this.user.getIdToken(true);\n    } catch (e) {\n      // Only retry on network errors\n      if (e.code === `auth/${\"network-request-failed\"\n      /* NETWORK_REQUEST_FAILED */\n      }`) {\n        this.schedule(\n        /* wasError */\n        true);\n      }\n\n      return;\n    }\n\n    this.schedule();\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass UserMetadata {\n  constructor(createdAt, lastLoginAt) {\n    this.createdAt = createdAt;\n    this.lastLoginAt = lastLoginAt;\n\n    this._initializeTime();\n  }\n\n  _initializeTime() {\n    this.lastSignInTime = utcTimestampToDateString(this.lastLoginAt);\n    this.creationTime = utcTimestampToDateString(this.createdAt);\n  }\n\n  _copy(metadata) {\n    this.createdAt = metadata.createdAt;\n    this.lastLoginAt = metadata.lastLoginAt;\n\n    this._initializeTime();\n  }\n\n  toJSON() {\n    return {\n      createdAt: this.createdAt,\n      lastLoginAt: this.lastLoginAt\n    };\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function _reloadWithoutSaving(user) {\n  var _a;\n\n  const auth = user.auth;\n  const idToken = await user.getIdToken();\n  const response = await _logoutIfInvalidated(user, getAccountInfo(auth, {\n    idToken\n  }));\n\n  _assert(response === null || response === void 0 ? void 0 : response.users.length, auth, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  const coreAccount = response.users[0];\n\n  user._notifyReloadListener(coreAccount);\n\n  const newProviderData = ((_a = coreAccount.providerUserInfo) === null || _a === void 0 ? void 0 : _a.length) ? extractProviderData(coreAccount.providerUserInfo) : [];\n  const providerData = mergeProviderData(user.providerData, newProviderData); // Preserves the non-nonymous status of the stored user, even if no more\n  // credentials (federated or email/password) are linked to the user. If\n  // the user was previously anonymous, then use provider data to update.\n  // On the other hand, if it was not anonymous before, it should never be\n  // considered anonymous now.\n\n  const oldIsAnonymous = user.isAnonymous;\n  const newIsAnonymous = !(user.email && coreAccount.passwordHash) && !(providerData === null || providerData === void 0 ? void 0 : providerData.length);\n  const isAnonymous = !oldIsAnonymous ? false : newIsAnonymous;\n  const updates = {\n    uid: coreAccount.localId,\n    displayName: coreAccount.displayName || null,\n    photoURL: coreAccount.photoUrl || null,\n    email: coreAccount.email || null,\n    emailVerified: coreAccount.emailVerified || false,\n    phoneNumber: coreAccount.phoneNumber || null,\n    tenantId: coreAccount.tenantId || null,\n    providerData,\n    metadata: new UserMetadata(coreAccount.createdAt, coreAccount.lastLoginAt),\n    isAnonymous\n  };\n  Object.assign(user, updates);\n}\n/**\r\n * Reloads user account data, if signed in.\r\n *\r\n * @param user - The user.\r\n *\r\n * @public\r\n */\n\n\nasync function reload(user) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  await _reloadWithoutSaving(userInternal); // Even though the current user hasn't changed, update\n  // current user will trigger a persistence update w/ the\n  // new info.\n\n  await userInternal.auth._persistUserIfCurrent(userInternal);\n\n  userInternal.auth._notifyListenersIfCurrent(userInternal);\n}\n\nfunction mergeProviderData(original, newData) {\n  const deduped = original.filter(o => !newData.some(n => n.providerId === o.providerId));\n  return [...deduped, ...newData];\n}\n\nfunction extractProviderData(providers) {\n  return providers.map(_a => {\n    var {\n      providerId\n    } = _a,\n        provider = (0, _tslib.__rest)(_a, [\"providerId\"]);\n    return {\n      providerId,\n      uid: provider.rawId || '',\n      displayName: provider.displayName || null,\n      email: provider.email || null,\n      phoneNumber: provider.phoneNumber || null,\n      photoURL: provider.photoUrl || null\n    };\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function requestStsToken(auth, refreshToken) {\n  const response = await _performFetchWithErrorHandling(auth, {}, async () => {\n    const body = (0, _util.querystring)({\n      'grant_type': 'refresh_token',\n      'refresh_token': refreshToken\n    }).slice(1);\n    const {\n      tokenApiHost,\n      apiKey\n    } = auth.config;\n\n    const url = _getFinalTarget(auth, tokenApiHost, \"/v1/token\"\n    /* TOKEN */\n    , `key=${apiKey}`);\n\n    const headers = await auth._getAdditionalHeaders();\n    headers[\"Content-Type\"\n    /* CONTENT_TYPE */\n    ] = 'application/x-www-form-urlencoded';\n    return FetchProvider.fetch()(url, {\n      method: \"POST\"\n      /* POST */\n      ,\n      headers,\n      body\n    });\n  }); // The response comes back in snake_case. Convert to camel:\n\n  return {\n    accessToken: response.access_token,\n    expiresIn: response.expires_in,\n    refreshToken: response.refresh_token\n  };\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * We need to mark this class as internal explicitly to exclude it in the public typings, because\r\n * it references AuthInternal which has a circular dependency with UserInternal.\r\n *\r\n * @internal\r\n */\n\n\nclass StsTokenManager {\n  constructor() {\n    this.refreshToken = null;\n    this.accessToken = null;\n    this.expirationTime = null;\n  }\n\n  get isExpired() {\n    return !this.expirationTime || Date.now() > this.expirationTime - 30000\n    /* TOKEN_REFRESH */\n    ;\n  }\n\n  updateFromServerResponse(response) {\n    _assert(response.idToken, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    _assert(typeof response.idToken !== 'undefined', \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    _assert(typeof response.refreshToken !== 'undefined', \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    const expiresIn = 'expiresIn' in response && typeof response.expiresIn !== 'undefined' ? Number(response.expiresIn) : _tokenExpiresIn(response.idToken);\n    this.updateTokensAndExpiration(response.idToken, response.refreshToken, expiresIn);\n  }\n\n  async getToken(auth, forceRefresh = false) {\n    _assert(!this.accessToken || this.refreshToken, auth, \"user-token-expired\"\n    /* TOKEN_EXPIRED */\n    );\n\n    if (!forceRefresh && this.accessToken && !this.isExpired) {\n      return this.accessToken;\n    }\n\n    if (this.refreshToken) {\n      await this.refresh(auth, this.refreshToken);\n      return this.accessToken;\n    }\n\n    return null;\n  }\n\n  clearRefreshToken() {\n    this.refreshToken = null;\n  }\n\n  async refresh(auth, oldToken) {\n    const {\n      accessToken,\n      refreshToken,\n      expiresIn\n    } = await requestStsToken(auth, oldToken);\n    this.updateTokensAndExpiration(accessToken, refreshToken, Number(expiresIn));\n  }\n\n  updateTokensAndExpiration(accessToken, refreshToken, expiresInSec) {\n    this.refreshToken = refreshToken || null;\n    this.accessToken = accessToken || null;\n    this.expirationTime = Date.now() + expiresInSec * 1000;\n  }\n\n  static fromJSON(appName, object) {\n    const {\n      refreshToken,\n      accessToken,\n      expirationTime\n    } = object;\n    const manager = new StsTokenManager();\n\n    if (refreshToken) {\n      _assert(typeof refreshToken === 'string', \"internal-error\"\n      /* INTERNAL_ERROR */\n      , {\n        appName\n      });\n\n      manager.refreshToken = refreshToken;\n    }\n\n    if (accessToken) {\n      _assert(typeof accessToken === 'string', \"internal-error\"\n      /* INTERNAL_ERROR */\n      , {\n        appName\n      });\n\n      manager.accessToken = accessToken;\n    }\n\n    if (expirationTime) {\n      _assert(typeof expirationTime === 'number', \"internal-error\"\n      /* INTERNAL_ERROR */\n      , {\n        appName\n      });\n\n      manager.expirationTime = expirationTime;\n    }\n\n    return manager;\n  }\n\n  toJSON() {\n    return {\n      refreshToken: this.refreshToken,\n      accessToken: this.accessToken,\n      expirationTime: this.expirationTime\n    };\n  }\n\n  _assign(stsTokenManager) {\n    this.accessToken = stsTokenManager.accessToken;\n    this.refreshToken = stsTokenManager.refreshToken;\n    this.expirationTime = stsTokenManager.expirationTime;\n  }\n\n  _clone() {\n    return Object.assign(new StsTokenManager(), this.toJSON());\n  }\n\n  _performRefresh() {\n    return debugFail('not implemented');\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction assertStringOrUndefined(assertion, appName) {\n  _assert(typeof assertion === 'string' || typeof assertion === 'undefined', \"internal-error\"\n  /* INTERNAL_ERROR */\n  , {\n    appName\n  });\n}\n\nclass UserImpl {\n  constructor(_a) {\n    var {\n      uid,\n      auth,\n      stsTokenManager\n    } = _a,\n        opt = (0, _tslib.__rest)(_a, [\"uid\", \"auth\", \"stsTokenManager\"]); // For the user object, provider is always Firebase.\n\n    this.providerId = \"firebase\"\n    /* FIREBASE */\n    ;\n    this.proactiveRefresh = new ProactiveRefresh(this);\n    this.reloadUserInfo = null;\n    this.reloadListener = null;\n    this.uid = uid;\n    this.auth = auth;\n    this.stsTokenManager = stsTokenManager;\n    this.accessToken = stsTokenManager.accessToken;\n    this.displayName = opt.displayName || null;\n    this.email = opt.email || null;\n    this.emailVerified = opt.emailVerified || false;\n    this.phoneNumber = opt.phoneNumber || null;\n    this.photoURL = opt.photoURL || null;\n    this.isAnonymous = opt.isAnonymous || false;\n    this.tenantId = opt.tenantId || null;\n    this.providerData = opt.providerData ? [...opt.providerData] : [];\n    this.metadata = new UserMetadata(opt.createdAt || undefined, opt.lastLoginAt || undefined);\n  }\n\n  async getIdToken(forceRefresh) {\n    const accessToken = await _logoutIfInvalidated(this, this.stsTokenManager.getToken(this.auth, forceRefresh));\n\n    _assert(accessToken, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    if (this.accessToken !== accessToken) {\n      this.accessToken = accessToken;\n      await this.auth._persistUserIfCurrent(this);\n\n      this.auth._notifyListenersIfCurrent(this);\n    }\n\n    return accessToken;\n  }\n\n  getIdTokenResult(forceRefresh) {\n    return getIdTokenResult(this, forceRefresh);\n  }\n\n  reload() {\n    return reload(this);\n  }\n\n  _assign(user) {\n    if (this === user) {\n      return;\n    }\n\n    _assert(this.uid === user.uid, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    this.displayName = user.displayName;\n    this.photoURL = user.photoURL;\n    this.email = user.email;\n    this.emailVerified = user.emailVerified;\n    this.phoneNumber = user.phoneNumber;\n    this.isAnonymous = user.isAnonymous;\n    this.tenantId = user.tenantId;\n    this.providerData = user.providerData.map(userInfo => Object.assign({}, userInfo));\n\n    this.metadata._copy(user.metadata);\n\n    this.stsTokenManager._assign(user.stsTokenManager);\n  }\n\n  _clone(auth) {\n    return new UserImpl(Object.assign(Object.assign({}, this), {\n      auth,\n      stsTokenManager: this.stsTokenManager._clone()\n    }));\n  }\n\n  _onReload(callback) {\n    // There should only ever be one listener, and that is a single instance of MultiFactorUser\n    _assert(!this.reloadListener, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    this.reloadListener = callback;\n\n    if (this.reloadUserInfo) {\n      this._notifyReloadListener(this.reloadUserInfo);\n\n      this.reloadUserInfo = null;\n    }\n  }\n\n  _notifyReloadListener(userInfo) {\n    if (this.reloadListener) {\n      this.reloadListener(userInfo);\n    } else {\n      // If no listener is subscribed yet, save the result so it's available when they do subscribe\n      this.reloadUserInfo = userInfo;\n    }\n  }\n\n  _startProactiveRefresh() {\n    this.proactiveRefresh._start();\n  }\n\n  _stopProactiveRefresh() {\n    this.proactiveRefresh._stop();\n  }\n\n  async _updateTokensIfNecessary(response, reload = false) {\n    let tokensRefreshed = false;\n\n    if (response.idToken && response.idToken !== this.stsTokenManager.accessToken) {\n      this.stsTokenManager.updateFromServerResponse(response);\n      tokensRefreshed = true;\n    }\n\n    if (reload) {\n      await _reloadWithoutSaving(this);\n    }\n\n    await this.auth._persistUserIfCurrent(this);\n\n    if (tokensRefreshed) {\n      this.auth._notifyListenersIfCurrent(this);\n    }\n  }\n\n  async delete() {\n    const idToken = await this.getIdToken();\n    await _logoutIfInvalidated(this, deleteAccount(this.auth, {\n      idToken\n    }));\n    this.stsTokenManager.clearRefreshToken(); // TODO: Determine if cancellable-promises are necessary to use in this class so that delete()\n    //       cancels pending actions...\n\n    return this.auth.signOut();\n  }\n\n  toJSON() {\n    return Object.assign(Object.assign({\n      uid: this.uid,\n      email: this.email || undefined,\n      emailVerified: this.emailVerified,\n      displayName: this.displayName || undefined,\n      isAnonymous: this.isAnonymous,\n      photoURL: this.photoURL || undefined,\n      phoneNumber: this.phoneNumber || undefined,\n      tenantId: this.tenantId || undefined,\n      providerData: this.providerData.map(userInfo => Object.assign({}, userInfo)),\n      stsTokenManager: this.stsTokenManager.toJSON(),\n      // Redirect event ID must be maintained in case there is a pending\n      // redirect event.\n      _redirectEventId: this._redirectEventId\n    }, this.metadata.toJSON()), {\n      // Required for compatibility with the legacy SDK (go/firebase-auth-sdk-persistence-parsing):\n      apiKey: this.auth.config.apiKey,\n      appName: this.auth.name\n    });\n  }\n\n  get refreshToken() {\n    return this.stsTokenManager.refreshToken || '';\n  }\n\n  static _fromJSON(auth, object) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n\n    const displayName = (_a = object.displayName) !== null && _a !== void 0 ? _a : undefined;\n    const email = (_b = object.email) !== null && _b !== void 0 ? _b : undefined;\n    const phoneNumber = (_c = object.phoneNumber) !== null && _c !== void 0 ? _c : undefined;\n    const photoURL = (_d = object.photoURL) !== null && _d !== void 0 ? _d : undefined;\n    const tenantId = (_e = object.tenantId) !== null && _e !== void 0 ? _e : undefined;\n\n    const _redirectEventId = (_f = object._redirectEventId) !== null && _f !== void 0 ? _f : undefined;\n\n    const createdAt = (_g = object.createdAt) !== null && _g !== void 0 ? _g : undefined;\n    const lastLoginAt = (_h = object.lastLoginAt) !== null && _h !== void 0 ? _h : undefined;\n    const {\n      uid,\n      emailVerified,\n      isAnonymous,\n      providerData,\n      stsTokenManager: plainObjectTokenManager\n    } = object;\n\n    _assert(uid && plainObjectTokenManager, auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    const stsTokenManager = StsTokenManager.fromJSON(this.name, plainObjectTokenManager);\n\n    _assert(typeof uid === 'string', auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    assertStringOrUndefined(displayName, auth.name);\n    assertStringOrUndefined(email, auth.name);\n\n    _assert(typeof emailVerified === 'boolean', auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    _assert(typeof isAnonymous === 'boolean', auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    assertStringOrUndefined(phoneNumber, auth.name);\n    assertStringOrUndefined(photoURL, auth.name);\n    assertStringOrUndefined(tenantId, auth.name);\n    assertStringOrUndefined(_redirectEventId, auth.name);\n    assertStringOrUndefined(createdAt, auth.name);\n    assertStringOrUndefined(lastLoginAt, auth.name);\n    const user = new UserImpl({\n      uid,\n      auth,\n      email,\n      emailVerified,\n      displayName,\n      isAnonymous,\n      photoURL,\n      phoneNumber,\n      tenantId,\n      stsTokenManager,\n      createdAt,\n      lastLoginAt\n    });\n\n    if (providerData && Array.isArray(providerData)) {\n      user.providerData = providerData.map(userInfo => Object.assign({}, userInfo));\n    }\n\n    if (_redirectEventId) {\n      user._redirectEventId = _redirectEventId;\n    }\n\n    return user;\n  }\n  /**\r\n   * Initialize a User from an idToken server response\r\n   * @param auth\r\n   * @param idTokenResponse\r\n   */\n\n\n  static async _fromIdTokenResponse(auth, idTokenResponse, isAnonymous = false) {\n    const stsTokenManager = new StsTokenManager();\n    stsTokenManager.updateFromServerResponse(idTokenResponse); // Initialize the Firebase Auth user.\n\n    const user = new UserImpl({\n      uid: idTokenResponse.localId,\n      auth,\n      stsTokenManager,\n      isAnonymous\n    }); // Updates the user info and data and resolves with a user instance.\n\n    await _reloadWithoutSaving(user);\n    return user;\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nexports.aD = UserImpl;\n\nclass InMemoryPersistence {\n  constructor() {\n    this.type = \"NONE\"\n    /* NONE */\n    ;\n    this.storage = {};\n  }\n\n  async _isAvailable() {\n    return true;\n  }\n\n  async _set(key, value) {\n    this.storage[key] = value;\n  }\n\n  async _get(key) {\n    const value = this.storage[key];\n    return value === undefined ? null : value;\n  }\n\n  async _remove(key) {\n    delete this.storage[key];\n  }\n\n  _addListener(_key, _listener) {\n    // Listeners are not supported for in-memory storage since it cannot be shared across windows/workers\n    return;\n  }\n\n  _removeListener(_key, _listener) {\n    // Listeners are not supported for in-memory storage since it cannot be shared across windows/workers\n    return;\n  }\n\n}\n\nInMemoryPersistence.type = 'NONE';\n/**\r\n * An implementation of {@link Persistence} of type 'NONE'.\r\n *\r\n * @public\r\n */\n\nconst inMemoryPersistence = InMemoryPersistence;\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.K = inMemoryPersistence;\n\nfunction _persistenceKeyName(key, apiKey, appName) {\n  return `${\"firebase\"\n  /* PERSISTENCE */\n  }:${key}:${apiKey}:${appName}`;\n}\n\nclass PersistenceUserManager {\n  constructor(persistence, auth, userKey) {\n    this.persistence = persistence;\n    this.auth = auth;\n    this.userKey = userKey;\n    const {\n      config,\n      name\n    } = this.auth;\n    this.fullUserKey = _persistenceKeyName(this.userKey, config.apiKey, name);\n    this.fullPersistenceKey = _persistenceKeyName(\"persistence\"\n    /* PERSISTENCE_USER */\n    , config.apiKey, name);\n    this.boundEventHandler = auth._onStorageEvent.bind(auth);\n\n    this.persistence._addListener(this.fullUserKey, this.boundEventHandler);\n  }\n\n  setCurrentUser(user) {\n    return this.persistence._set(this.fullUserKey, user.toJSON());\n  }\n\n  async getCurrentUser() {\n    const blob = await this.persistence._get(this.fullUserKey);\n    return blob ? UserImpl._fromJSON(this.auth, blob) : null;\n  }\n\n  removeCurrentUser() {\n    return this.persistence._remove(this.fullUserKey);\n  }\n\n  savePersistenceForRedirect() {\n    return this.persistence._set(this.fullPersistenceKey, this.persistence.type);\n  }\n\n  async setPersistence(newPersistence) {\n    if (this.persistence === newPersistence) {\n      return;\n    }\n\n    const currentUser = await this.getCurrentUser();\n    await this.removeCurrentUser();\n    this.persistence = newPersistence;\n\n    if (currentUser) {\n      return this.setCurrentUser(currentUser);\n    }\n  }\n\n  delete() {\n    this.persistence._removeListener(this.fullUserKey, this.boundEventHandler);\n  }\n\n  static async create(auth, persistenceHierarchy, userKey = \"authUser\"\n  /* AUTH_USER */\n  ) {\n    if (!persistenceHierarchy.length) {\n      return new PersistenceUserManager(_getInstance(inMemoryPersistence), auth, userKey);\n    } // Eliminate any persistences that are not available\n\n\n    const availablePersistences = (await Promise.all(persistenceHierarchy.map(async persistence => {\n      if (await persistence._isAvailable()) {\n        return persistence;\n      }\n\n      return undefined;\n    }))).filter(persistence => persistence); // Fall back to the first persistence listed, or in memory if none available\n\n    let selectedPersistence = availablePersistences[0] || _getInstance(inMemoryPersistence);\n\n    const key = _persistenceKeyName(userKey, auth.config.apiKey, auth.name); // Pull out the existing user, setting the chosen persistence to that\n    // persistence if the user exists.\n\n\n    let userToMigrate = null; // Note, here we check for a user in _all_ persistences, not just the\n    // ones deemed available. If we can migrate a user out of a broken\n    // persistence, we will (but only if that persistence supports migration).\n\n    for (const persistence of persistenceHierarchy) {\n      try {\n        const blob = await persistence._get(key);\n\n        if (blob) {\n          const user = UserImpl._fromJSON(auth, blob); // throws for unparsable blob (wrong format)\n\n\n          if (persistence !== selectedPersistence) {\n            userToMigrate = user;\n          }\n\n          selectedPersistence = persistence;\n          break;\n        }\n      } catch (_a) {}\n    } // If we find the user in a persistence that does support migration, use\n    // that migration path (of only persistences that support migration)\n\n\n    const migrationHierarchy = availablePersistences.filter(p => p._shouldAllowMigration); // If the persistence does _not_ allow migration, just finish off here\n\n    if (!selectedPersistence._shouldAllowMigration || !migrationHierarchy.length) {\n      return new PersistenceUserManager(selectedPersistence, auth, userKey);\n    }\n\n    selectedPersistence = migrationHierarchy[0];\n\n    if (userToMigrate) {\n      // This normally shouldn't throw since chosenPersistence.isAvailable() is true, but if it does\n      // we'll just let it bubble to surface the error.\n      await selectedPersistence._set(key, userToMigrate.toJSON());\n    } // Attempt to clear the key in other persistences but ignore errors. This helps prevent issues\n    // such as users getting stuck with a previous account after signing out and refreshing the tab.\n\n\n    await Promise.all(persistenceHierarchy.map(async persistence => {\n      if (persistence !== selectedPersistence) {\n        try {\n          await persistence._remove(key);\n        } catch (_a) {}\n      }\n    }));\n    return new PersistenceUserManager(selectedPersistence, auth, userKey);\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Determine the browser for the purposes of reporting usage to the API\r\n */\n\n\nfunction _getBrowserName(userAgent) {\n  const ua = userAgent.toLowerCase();\n\n  if (ua.includes('opera/') || ua.includes('opr/') || ua.includes('opios/')) {\n    return \"Opera\"\n    /* OPERA */\n    ;\n  } else if (_isIEMobile(ua)) {\n    // Windows phone IEMobile browser.\n    return \"IEMobile\"\n    /* IEMOBILE */\n    ;\n  } else if (ua.includes('msie') || ua.includes('trident/')) {\n    return \"IE\"\n    /* IE */\n    ;\n  } else if (ua.includes('edge/')) {\n    return \"Edge\"\n    /* EDGE */\n    ;\n  } else if (_isFirefox(ua)) {\n    return \"Firefox\"\n    /* FIREFOX */\n    ;\n  } else if (ua.includes('silk/')) {\n    return \"Silk\"\n    /* SILK */\n    ;\n  } else if (_isBlackBerry(ua)) {\n    // Blackberry browser.\n    return \"Blackberry\"\n    /* BLACKBERRY */\n    ;\n  } else if (_isWebOS(ua)) {\n    // WebOS default browser.\n    return \"Webos\"\n    /* WEBOS */\n    ;\n  } else if (_isSafari(ua)) {\n    return \"Safari\"\n    /* SAFARI */\n    ;\n  } else if ((ua.includes('chrome/') || _isChromeIOS(ua)) && !ua.includes('edge/')) {\n    return \"Chrome\"\n    /* CHROME */\n    ;\n  } else if (_isAndroid(ua)) {\n    // Android stock browser.\n    return \"Android\"\n    /* ANDROID */\n    ;\n  } else {\n    // Most modern browsers have name/version at end of user agent string.\n    const re = /([a-zA-Z\\d\\.]+)\\/[a-zA-Z\\d\\.]*$/;\n    const matches = userAgent.match(re);\n\n    if ((matches === null || matches === void 0 ? void 0 : matches.length) === 2) {\n      return matches[1];\n    }\n  }\n\n  return \"Other\"\n  /* OTHER */\n  ;\n}\n\nfunction _isFirefox(ua = (0, _util.getUA)()) {\n  return /firefox\\//i.test(ua);\n}\n\nfunction _isSafari(userAgent = (0, _util.getUA)()) {\n  const ua = userAgent.toLowerCase();\n  return ua.includes('safari/') && !ua.includes('chrome/') && !ua.includes('crios/') && !ua.includes('android');\n}\n\nfunction _isChromeIOS(ua = (0, _util.getUA)()) {\n  return /crios\\//i.test(ua);\n}\n\nfunction _isIEMobile(ua = (0, _util.getUA)()) {\n  return /iemobile/i.test(ua);\n}\n\nfunction _isAndroid(ua = (0, _util.getUA)()) {\n  return /android/i.test(ua);\n}\n\nfunction _isBlackBerry(ua = (0, _util.getUA)()) {\n  return /blackberry/i.test(ua);\n}\n\nfunction _isWebOS(ua = (0, _util.getUA)()) {\n  return /webos/i.test(ua);\n}\n\nfunction _isIOS(ua = (0, _util.getUA)()) {\n  return /iphone|ipad|ipod/i.test(ua);\n}\n\nfunction _isIOS7Or8(ua = (0, _util.getUA)()) {\n  return /(iPad|iPhone|iPod).*OS 7_\\d/i.test(ua) || /(iPad|iPhone|iPod).*OS 8_\\d/i.test(ua);\n}\n\nfunction _isIOSStandalone(ua = (0, _util.getUA)()) {\n  var _a;\n\n  return _isIOS(ua) && !!((_a = window.navigator) === null || _a === void 0 ? void 0 : _a.standalone);\n}\n\nfunction _isIE10() {\n  return (0, _util.isIE)() && document.documentMode === 10;\n}\n\nfunction _isMobileBrowser(ua = (0, _util.getUA)()) {\n  // TODO: implement getBrowserName equivalent for OS.\n  return _isIOS(ua) || _isAndroid(ua) || _isWebOS(ua) || _isBlackBerry(ua) || /windows phone/i.test(ua) || _isIEMobile(ua);\n}\n\nfunction _isIframe() {\n  try {\n    // Check that the current window is not the top window.\n    // If so, return true.\n    return !!(window && window !== window.top);\n  } catch (e) {\n    return false;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/*\r\n * Determine the SDK version string\r\n */\n\n\nfunction _getClientVersion(clientPlatform, frameworks = []) {\n  let reportedPlatform;\n\n  switch (clientPlatform) {\n    case \"Browser\"\n    /* BROWSER */\n    :\n      // In a browser environment, report the browser name.\n      reportedPlatform = _getBrowserName((0, _util.getUA)());\n      break;\n\n    case \"Worker\"\n    /* WORKER */\n    :\n      // Technically a worker runs from a browser but we need to differentiate a\n      // worker from a browser.\n      // For example: Chrome-Worker/JsCore/4.9.1/FirebaseCore-web.\n      reportedPlatform = `${_getBrowserName((0, _util.getUA)())}-${clientPlatform}`;\n      break;\n\n    default:\n      reportedPlatform = clientPlatform;\n  }\n\n  const reportedFrameworks = frameworks.length ? frameworks.join(',') : 'FirebaseCore-web';\n  /* default value if no other framework is used */\n\n  return `${reportedPlatform}/${\"JsCore\"\n  /* CORE */\n  }/${_app.SDK_VERSION}/${reportedFrameworks}`;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass AuthImpl {\n  constructor(app, heartbeatServiceProvider, config) {\n    this.app = app;\n    this.heartbeatServiceProvider = heartbeatServiceProvider;\n    this.config = config;\n    this.currentUser = null;\n    this.emulatorConfig = null;\n    this.operations = Promise.resolve();\n    this.authStateSubscription = new Subscription(this);\n    this.idTokenSubscription = new Subscription(this);\n    this.redirectUser = null;\n    this.isProactiveRefreshEnabled = false; // Any network calls will set this to true and prevent subsequent emulator\n    // initialization\n\n    this._canInitEmulator = true;\n    this._isInitialized = false;\n    this._deleted = false;\n    this._initializationPromise = null;\n    this._popupRedirectResolver = null;\n    this._errorFactory = _DEFAULT_AUTH_ERROR_FACTORY; // Tracks the last notified UID for state change listeners to prevent\n    // repeated calls to the callbacks. Undefined means it's never been\n    // called, whereas null means it's been called with a signed out user\n\n    this.lastNotifiedUid = undefined;\n    this.languageCode = null;\n    this.tenantId = null;\n    this.settings = {\n      appVerificationDisabledForTesting: false\n    };\n    this.frameworks = [];\n    this.name = app.name;\n    this.clientVersion = config.sdkClientVersion;\n  }\n\n  _initializeWithPersistence(persistenceHierarchy, popupRedirectResolver) {\n    if (popupRedirectResolver) {\n      this._popupRedirectResolver = _getInstance(popupRedirectResolver);\n    } // Have to check for app deletion throughout initialization (after each\n    // promise resolution)\n\n\n    this._initializationPromise = this.queue(async () => {\n      var _a, _b;\n\n      if (this._deleted) {\n        return;\n      }\n\n      this.persistenceManager = await PersistenceUserManager.create(this, persistenceHierarchy);\n\n      if (this._deleted) {\n        return;\n      } // Initialize the resolver early if necessary (only applicable to web:\n      // this will cause the iframe to load immediately in certain cases)\n\n\n      if ((_a = this._popupRedirectResolver) === null || _a === void 0 ? void 0 : _a._shouldInitProactively) {\n        // If this fails, don't halt auth loading\n        try {\n          await this._popupRedirectResolver._initialize(this);\n        } catch (e) {\n          /* Ignore the error */\n        }\n      }\n\n      await this.initializeCurrentUser(popupRedirectResolver);\n      this.lastNotifiedUid = ((_b = this.currentUser) === null || _b === void 0 ? void 0 : _b.uid) || null;\n\n      if (this._deleted) {\n        return;\n      }\n\n      this._isInitialized = true;\n    });\n    return this._initializationPromise;\n  }\n  /**\r\n   * If the persistence is changed in another window, the user manager will let us know\r\n   */\n\n\n  async _onStorageEvent() {\n    if (this._deleted) {\n      return;\n    }\n\n    const user = await this.assertedPersistence.getCurrentUser();\n\n    if (!this.currentUser && !user) {\n      // No change, do nothing (was signed out and remained signed out).\n      return;\n    } // If the same user is to be synchronized.\n\n\n    if (this.currentUser && user && this.currentUser.uid === user.uid) {\n      // Data update, simply copy data changes.\n      this._currentUser._assign(user); // If tokens changed from previous user tokens, this will trigger\n      // notifyAuthListeners_.\n\n\n      await this.currentUser.getIdToken();\n      return;\n    } // Update current Auth state. Either a new login or logout.\n\n\n    await this._updateCurrentUser(user);\n  }\n\n  async initializeCurrentUser(popupRedirectResolver) {\n    var _a; // First check to see if we have a pending redirect event.\n\n\n    let storedUser = await this.assertedPersistence.getCurrentUser();\n\n    if (popupRedirectResolver && this.config.authDomain) {\n      await this.getOrInitRedirectPersistenceManager();\n      const redirectUserEventId = (_a = this.redirectUser) === null || _a === void 0 ? void 0 : _a._redirectEventId;\n      const storedUserEventId = storedUser === null || storedUser === void 0 ? void 0 : storedUser._redirectEventId;\n      const result = await this.tryRedirectSignIn(popupRedirectResolver); // If the stored user (i.e. the old \"currentUser\") has a redirectId that\n      // matches the redirect user, then we want to initially sign in with the\n      // new user object from result.\n      // TODO(samgho): More thoroughly test all of this\n\n      if ((!redirectUserEventId || redirectUserEventId === storedUserEventId) && (result === null || result === void 0 ? void 0 : result.user)) {\n        storedUser = result.user;\n      }\n    } // If no user in persistence, there is no current user. Set to null.\n\n\n    if (!storedUser) {\n      return this.directlySetCurrentUser(null);\n    }\n\n    if (!storedUser._redirectEventId) {\n      // This isn't a redirect user, we can reload and bail\n      // This will also catch the redirected user, if available, as that method\n      // strips the _redirectEventId\n      return this.reloadAndSetCurrentUserOrClear(storedUser);\n    }\n\n    _assert(this._popupRedirectResolver, this, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    await this.getOrInitRedirectPersistenceManager(); // If the redirect user's event ID matches the current user's event ID,\n    // DO NOT reload the current user, otherwise they'll be cleared from storage.\n    // This is important for the reauthenticateWithRedirect() flow.\n\n    if (this.redirectUser && this.redirectUser._redirectEventId === storedUser._redirectEventId) {\n      return this.directlySetCurrentUser(storedUser);\n    }\n\n    return this.reloadAndSetCurrentUserOrClear(storedUser);\n  }\n\n  async tryRedirectSignIn(redirectResolver) {\n    // The redirect user needs to be checked (and signed in if available)\n    // during auth initialization. All of the normal sign in and link/reauth\n    // flows call back into auth and push things onto the promise queue. We\n    // need to await the result of the redirect sign in *inside the promise\n    // queue*. This presents a problem: we run into deadlock. See:\n    //    \u250c> [Initialization] \u2500\u2500\u2500\u2500\u2500\u2510\n    //    \u250c> [<other queue tasks>] \u2502\n    //    \u2514\u2500 [getRedirectResult] <\u2500\u2518\n    //    where [] are tasks on the queue and arrows denote awaits\n    // Initialization will never complete because it's waiting on something\n    // that's waiting for initialization to complete!\n    //\n    // Instead, this method calls getRedirectResult() (stored in\n    // _completeRedirectFn) with an optional parameter that instructs all of\n    // the underlying auth operations to skip anything that mutates auth state.\n    let result = null;\n\n    try {\n      // We know this._popupRedirectResolver is set since redirectResolver\n      // is passed in. The _completeRedirectFn expects the unwrapped extern.\n      result = await this._popupRedirectResolver._completeRedirectFn(this, redirectResolver, true);\n    } catch (e) {\n      // Swallow any errors here; the code can retrieve them in\n      // getRedirectResult().\n      await this._setRedirectUser(null);\n    }\n\n    return result;\n  }\n\n  async reloadAndSetCurrentUserOrClear(user) {\n    try {\n      await _reloadWithoutSaving(user);\n    } catch (e) {\n      if (e.code !== `auth/${\"network-request-failed\"\n      /* NETWORK_REQUEST_FAILED */\n      }`) {\n        // Something's wrong with the user's token. Log them out and remove\n        // them from storage\n        return this.directlySetCurrentUser(null);\n      }\n    }\n\n    return this.directlySetCurrentUser(user);\n  }\n\n  useDeviceLanguage() {\n    this.languageCode = _getUserLanguage();\n  }\n\n  async _delete() {\n    this._deleted = true;\n  }\n\n  async updateCurrentUser(userExtern) {\n    // The public updateCurrentUser method needs to make a copy of the user,\n    // and also check that the project matches\n    const user = userExtern ? (0, _util.getModularInstance)(userExtern) : null;\n\n    if (user) {\n      _assert(user.auth.config.apiKey === this.config.apiKey, this, \"invalid-user-token\"\n      /* INVALID_AUTH */\n      );\n    }\n\n    return this._updateCurrentUser(user && user._clone(this));\n  }\n\n  async _updateCurrentUser(user) {\n    if (this._deleted) {\n      return;\n    }\n\n    if (user) {\n      _assert(this.tenantId === user.tenantId, this, \"tenant-id-mismatch\"\n      /* TENANT_ID_MISMATCH */\n      );\n    }\n\n    return this.queue(async () => {\n      await this.directlySetCurrentUser(user);\n      this.notifyAuthListeners();\n    });\n  }\n\n  async signOut() {\n    // Clear the redirect user when signOut is called\n    if (this.redirectPersistenceManager || this._popupRedirectResolver) {\n      await this._setRedirectUser(null);\n    }\n\n    return this._updateCurrentUser(null);\n  }\n\n  setPersistence(persistence) {\n    return this.queue(async () => {\n      await this.assertedPersistence.setPersistence(_getInstance(persistence));\n    });\n  }\n\n  _getPersistence() {\n    return this.assertedPersistence.persistence.type;\n  }\n\n  _updateErrorMap(errorMap) {\n    this._errorFactory = new _util.ErrorFactory('auth', 'Firebase', errorMap());\n  }\n\n  onAuthStateChanged(nextOrObserver, error, completed) {\n    return this.registerStateListener(this.authStateSubscription, nextOrObserver, error, completed);\n  }\n\n  onIdTokenChanged(nextOrObserver, error, completed) {\n    return this.registerStateListener(this.idTokenSubscription, nextOrObserver, error, completed);\n  }\n\n  toJSON() {\n    var _a;\n\n    return {\n      apiKey: this.config.apiKey,\n      authDomain: this.config.authDomain,\n      appName: this.name,\n      currentUser: (_a = this._currentUser) === null || _a === void 0 ? void 0 : _a.toJSON()\n    };\n  }\n\n  async _setRedirectUser(user, popupRedirectResolver) {\n    const redirectManager = await this.getOrInitRedirectPersistenceManager(popupRedirectResolver);\n    return user === null ? redirectManager.removeCurrentUser() : redirectManager.setCurrentUser(user);\n  }\n\n  async getOrInitRedirectPersistenceManager(popupRedirectResolver) {\n    if (!this.redirectPersistenceManager) {\n      const resolver = popupRedirectResolver && _getInstance(popupRedirectResolver) || this._popupRedirectResolver;\n\n      _assert(resolver, this, \"argument-error\"\n      /* ARGUMENT_ERROR */\n      );\n\n      this.redirectPersistenceManager = await PersistenceUserManager.create(this, [_getInstance(resolver._redirectPersistence)], \"redirectUser\"\n      /* REDIRECT_USER */\n      );\n      this.redirectUser = await this.redirectPersistenceManager.getCurrentUser();\n    }\n\n    return this.redirectPersistenceManager;\n  }\n\n  async _redirectUserForId(id) {\n    var _a, _b; // Make sure we've cleared any pending persistence actions if we're not in\n    // the initializer\n\n\n    if (this._isInitialized) {\n      await this.queue(async () => {});\n    }\n\n    if (((_a = this._currentUser) === null || _a === void 0 ? void 0 : _a._redirectEventId) === id) {\n      return this._currentUser;\n    }\n\n    if (((_b = this.redirectUser) === null || _b === void 0 ? void 0 : _b._redirectEventId) === id) {\n      return this.redirectUser;\n    }\n\n    return null;\n  }\n\n  async _persistUserIfCurrent(user) {\n    if (user === this.currentUser) {\n      return this.queue(async () => this.directlySetCurrentUser(user));\n    }\n  }\n  /** Notifies listeners only if the user is current */\n\n\n  _notifyListenersIfCurrent(user) {\n    if (user === this.currentUser) {\n      this.notifyAuthListeners();\n    }\n  }\n\n  _key() {\n    return `${this.config.authDomain}:${this.config.apiKey}:${this.name}`;\n  }\n\n  _startProactiveRefresh() {\n    this.isProactiveRefreshEnabled = true;\n\n    if (this.currentUser) {\n      this._currentUser._startProactiveRefresh();\n    }\n  }\n\n  _stopProactiveRefresh() {\n    this.isProactiveRefreshEnabled = false;\n\n    if (this.currentUser) {\n      this._currentUser._stopProactiveRefresh();\n    }\n  }\n  /** Returns the current user cast as the internal type */\n\n\n  get _currentUser() {\n    return this.currentUser;\n  }\n\n  notifyAuthListeners() {\n    var _a, _b;\n\n    if (!this._isInitialized) {\n      return;\n    }\n\n    this.idTokenSubscription.next(this.currentUser);\n    const currentUid = (_b = (_a = this.currentUser) === null || _a === void 0 ? void 0 : _a.uid) !== null && _b !== void 0 ? _b : null;\n\n    if (this.lastNotifiedUid !== currentUid) {\n      this.lastNotifiedUid = currentUid;\n      this.authStateSubscription.next(this.currentUser);\n    }\n  }\n\n  registerStateListener(subscription, nextOrObserver, error, completed) {\n    if (this._deleted) {\n      return () => {};\n    }\n\n    const cb = typeof nextOrObserver === 'function' ? nextOrObserver : nextOrObserver.next.bind(nextOrObserver);\n    const promise = this._isInitialized ? Promise.resolve() : this._initializationPromise;\n\n    _assert(promise, this, \"internal-error\"\n    /* INTERNAL_ERROR */\n    ); // The callback needs to be called asynchronously per the spec.\n    // eslint-disable-next-line @typescript-eslint/no-floating-promises\n\n\n    promise.then(() => cb(this.currentUser));\n\n    if (typeof nextOrObserver === 'function') {\n      return subscription.addObserver(nextOrObserver, error, completed);\n    } else {\n      return subscription.addObserver(nextOrObserver);\n    }\n  }\n  /**\r\n   * Unprotected (from race conditions) method to set the current user. This\r\n   * should only be called from within a queued callback. This is necessary\r\n   * because the queue shouldn't rely on another queued callback.\r\n   */\n\n\n  async directlySetCurrentUser(user) {\n    if (this.currentUser && this.currentUser !== user) {\n      this._currentUser._stopProactiveRefresh();\n\n      if (user && this.isProactiveRefreshEnabled) {\n        user._startProactiveRefresh();\n      }\n    }\n\n    this.currentUser = user;\n\n    if (user) {\n      await this.assertedPersistence.setCurrentUser(user);\n    } else {\n      await this.assertedPersistence.removeCurrentUser();\n    }\n  }\n\n  queue(action) {\n    // In case something errors, the callback still should be called in order\n    // to keep the promise chain alive\n    this.operations = this.operations.then(action, action);\n    return this.operations;\n  }\n\n  get assertedPersistence() {\n    _assert(this.persistenceManager, this, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    return this.persistenceManager;\n  }\n\n  _logFramework(framework) {\n    if (!framework || this.frameworks.includes(framework)) {\n      return;\n    }\n\n    this.frameworks.push(framework); // Sort alphabetically so that \"FirebaseCore-web,FirebaseUI-web\" and\n    // \"FirebaseUI-web,FirebaseCore-web\" aren't viewed as different.\n\n    this.frameworks.sort();\n    this.clientVersion = _getClientVersion(this.config.clientPlatform, this._getFrameworks());\n  }\n\n  _getFrameworks() {\n    return this.frameworks;\n  }\n\n  async _getAdditionalHeaders() {\n    var _a; // Additional headers on every request\n\n\n    const headers = {\n      [\"X-Client-Version\"\n      /* X_CLIENT_VERSION */\n      ]: this.clientVersion\n    };\n\n    if (this.app.options.appId) {\n      headers[\"X-Firebase-gmpid\"\n      /* X_FIREBASE_GMPID */\n      ] = this.app.options.appId;\n    } // If the heartbeat service exists, add the heartbeat string\n\n\n    const heartbeatsHeader = await ((_a = this.heartbeatServiceProvider.getImmediate({\n      optional: true\n    })) === null || _a === void 0 ? void 0 : _a.getHeartbeatsHeader());\n\n    if (heartbeatsHeader) {\n      headers[\"X-Firebase-Client\"\n      /* X_FIREBASE_CLIENT */\n      ] = heartbeatsHeader;\n    }\n\n    return headers;\n  }\n\n}\n/**\r\n * Method to be used to cast down to our private implmentation of Auth.\r\n * It will also handle unwrapping from the compat type if necessary\r\n *\r\n * @param auth Auth object passed in from developer\r\n */\n\n\nexports.aE = AuthImpl;\n\nfunction _castAuth(auth) {\n  return (0, _util.getModularInstance)(auth);\n}\n/** Helper class to wrap subscriber logic */\n\n\nclass Subscription {\n  constructor(auth) {\n    this.auth = auth;\n    this.observer = null;\n    this.addObserver = (0, _util.createSubscribe)(observer => this.observer = observer);\n  }\n\n  get next() {\n    _assert(this.observer, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    return this.observer.next.bind(this.observer);\n  }\n\n}\n/**\r\n * Changes the {@link Auth} instance to communicate with the Firebase Auth Emulator, instead of production\r\n * Firebase Auth services.\r\n *\r\n * @remarks\r\n * This must be called synchronously immediately following the first call to\r\n * {@link initializeAuth}.  Do not use with production credentials as emulator\r\n * traffic is not encrypted.\r\n *\r\n *\r\n * @example\r\n * ```javascript\r\n * connectAuthEmulator(auth, 'http://127.0.0.1:9099', { disableWarnings: true });\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param url - The URL at which the emulator is running (eg, 'http://localhost:9099').\r\n * @param options - Optional. `options.disableWarnings` defaults to `false`. Set it to\r\n * `true` to disable the warning banner attached to the DOM.\r\n *\r\n * @public\r\n */\n\n\nfunction connectAuthEmulator(auth, url, options) {\n  const authInternal = _castAuth(auth);\n\n  _assert(authInternal._canInitEmulator, authInternal, \"emulator-config-failed\"\n  /* EMULATOR_CONFIG_FAILED */\n  );\n\n  _assert(/^https?:\\/\\//.test(url), authInternal, \"invalid-emulator-scheme\"\n  /* INVALID_EMULATOR_SCHEME */\n  );\n\n  const disableWarnings = !!(options === null || options === void 0 ? void 0 : options.disableWarnings);\n  const protocol = extractProtocol(url);\n  const {\n    host,\n    port\n  } = extractHostAndPort(url);\n  const portStr = port === null ? '' : `:${port}`; // Always replace path with \"/\" (even if input url had no path at all, or had a different one).\n\n  authInternal.config.emulator = {\n    url: `${protocol}//${host}${portStr}/`\n  };\n  authInternal.settings.appVerificationDisabledForTesting = true;\n  authInternal.emulatorConfig = Object.freeze({\n    host,\n    port,\n    protocol: protocol.replace(':', ''),\n    options: Object.freeze({\n      disableWarnings\n    })\n  });\n\n  if (!disableWarnings) {\n    emitEmulatorWarning();\n  }\n}\n\nfunction extractProtocol(url) {\n  const protocolEnd = url.indexOf(':');\n  return protocolEnd < 0 ? '' : url.substr(0, protocolEnd + 1);\n}\n\nfunction extractHostAndPort(url) {\n  const protocol = extractProtocol(url);\n  const authority = /(\\/\\/)?([^?#/]+)/.exec(url.substr(protocol.length)); // Between // and /, ? or #.\n\n  if (!authority) {\n    return {\n      host: '',\n      port: null\n    };\n  }\n\n  const hostAndPort = authority[2].split('@').pop() || ''; // Strip out \"username:password@\".\n\n  const bracketedIPv6 = /^(\\[[^\\]]+\\])(:|$)/.exec(hostAndPort);\n\n  if (bracketedIPv6) {\n    const host = bracketedIPv6[1];\n    return {\n      host,\n      port: parsePort(hostAndPort.substr(host.length + 1))\n    };\n  } else {\n    const [host, port] = hostAndPort.split(':');\n    return {\n      host,\n      port: parsePort(port)\n    };\n  }\n}\n\nfunction parsePort(portStr) {\n  if (!portStr) {\n    return null;\n  }\n\n  const port = Number(portStr);\n\n  if (isNaN(port)) {\n    return null;\n  }\n\n  return port;\n}\n\nfunction emitEmulatorWarning() {\n  function attachBanner() {\n    const el = document.createElement('p');\n    const sty = el.style;\n    el.innerText = 'Running in emulator mode. Do not use with production credentials.';\n    sty.position = 'fixed';\n    sty.width = '100%';\n    sty.backgroundColor = '#ffffff';\n    sty.border = '.1em solid #000000';\n    sty.color = '#b50000';\n    sty.bottom = '0px';\n    sty.left = '0px';\n    sty.margin = '0px';\n    sty.zIndex = '10000';\n    sty.textAlign = 'center';\n    el.classList.add('firebase-emulator-warning');\n    document.body.appendChild(el);\n  }\n\n  if (typeof console !== 'undefined' && typeof console.info === 'function') {\n    console.info('WARNING: You are using the Auth Emulator,' + ' which is intended for local testing only.  Do not use with' + ' production credentials.');\n  }\n\n  if (typeof window !== 'undefined' && typeof document !== 'undefined') {\n    if (document.readyState === 'loading') {\n      window.addEventListener('DOMContentLoaded', attachBanner);\n    } else {\n      attachBanner();\n    }\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Interface that represents the credentials returned by an {@link AuthProvider}.\r\n *\r\n * @remarks\r\n * Implementations specify the details about each auth provider's credential requirements.\r\n *\r\n * @public\r\n */\n\n\nclass AuthCredential {\n  /** @internal */\n  constructor(\n  /**\r\n   * The authentication provider ID for the credential.\r\n   *\r\n   * @remarks\r\n   * For example, 'facebook.com', or 'google.com'.\r\n   */\n  providerId,\n  /**\r\n   * The authentication sign in method for the credential.\r\n   *\r\n   * @remarks\r\n   * For example, {@link SignInMethod}.EMAIL_PASSWORD, or\r\n   * {@link SignInMethod}.EMAIL_LINK. This corresponds to the sign-in method\r\n   * identifier as returned in {@link fetchSignInMethodsForEmail}.\r\n   */\n  signInMethod) {\n    this.providerId = providerId;\n    this.signInMethod = signInMethod;\n  }\n  /**\r\n   * Returns a JSON-serializable representation of this object.\r\n   *\r\n   * @returns a JSON-serializable representation of this object.\r\n   */\n\n\n  toJSON() {\n    return debugFail('not implemented');\n  }\n  /** @internal */\n\n\n  _getIdTokenResponse(_auth) {\n    return debugFail('not implemented');\n  }\n  /** @internal */\n\n\n  _linkToIdToken(_auth, _idToken) {\n    return debugFail('not implemented');\n  }\n  /** @internal */\n\n\n  _getReauthenticationResolver(_auth) {\n    return debugFail('not implemented');\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nexports.G = AuthCredential;\n\nasync function resetPassword(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:resetPassword\"\n  /* RESET_PASSWORD */\n  , _addTidIfNecessary(auth, request));\n}\n\nasync function updateEmailPassword(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:update\"\n  /* SET_ACCOUNT_INFO */\n  , request);\n}\n\nasync function applyActionCode$1(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:update\"\n  /* SET_ACCOUNT_INFO */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function signInWithPassword(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithPassword\"\n  /* SIGN_IN_WITH_PASSWORD */\n  , _addTidIfNecessary(auth, request));\n}\n\nasync function sendOobCode(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:sendOobCode\"\n  /* SEND_OOB_CODE */\n  , _addTidIfNecessary(auth, request));\n}\n\nasync function sendEmailVerification$1(auth, request) {\n  return sendOobCode(auth, request);\n}\n\nasync function sendPasswordResetEmail$1(auth, request) {\n  return sendOobCode(auth, request);\n}\n\nasync function sendSignInLinkToEmail$1(auth, request) {\n  return sendOobCode(auth, request);\n}\n\nasync function verifyAndChangeEmail(auth, request) {\n  return sendOobCode(auth, request);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function signInWithEmailLink$1(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithEmailLink\"\n  /* SIGN_IN_WITH_EMAIL_LINK */\n  , _addTidIfNecessary(auth, request));\n}\n\nasync function signInWithEmailLinkForLinking(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithEmailLink\"\n  /* SIGN_IN_WITH_EMAIL_LINK */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Interface that represents the credentials returned by {@link EmailAuthProvider} for\r\n * {@link ProviderId}.PASSWORD\r\n *\r\n * @remarks\r\n * Covers both {@link SignInMethod}.EMAIL_PASSWORD and\r\n * {@link SignInMethod}.EMAIL_LINK.\r\n *\r\n * @public\r\n */\n\n\nclass EmailAuthCredential extends AuthCredential {\n  /** @internal */\n  constructor(\n  /** @internal */\n  _email,\n  /** @internal */\n  _password, signInMethod,\n  /** @internal */\n  _tenantId = null) {\n    super(\"password\"\n    /* PASSWORD */\n    , signInMethod);\n    this._email = _email;\n    this._password = _password;\n    this._tenantId = _tenantId;\n  }\n  /** @internal */\n\n\n  static _fromEmailAndPassword(email, password) {\n    return new EmailAuthCredential(email, password, \"password\"\n    /* EMAIL_PASSWORD */\n    );\n  }\n  /** @internal */\n\n\n  static _fromEmailAndCode(email, oobCode, tenantId = null) {\n    return new EmailAuthCredential(email, oobCode, \"emailLink\"\n    /* EMAIL_LINK */\n    , tenantId);\n  }\n  /** {@inheritdoc AuthCredential.toJSON} */\n\n\n  toJSON() {\n    return {\n      email: this._email,\n      password: this._password,\n      signInMethod: this.signInMethod,\n      tenantId: this._tenantId\n    };\n  }\n  /**\r\n   * Static method to deserialize a JSON representation of an object into an {@link  AuthCredential}.\r\n   *\r\n   * @param json - Either `object` or the stringified representation of the object. When string is\r\n   * provided, `JSON.parse` would be called first.\r\n   *\r\n   * @returns If the JSON input does not represent an {@link AuthCredential}, null is returned.\r\n   */\n\n\n  static fromJSON(json) {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n\n    if ((obj === null || obj === void 0 ? void 0 : obj.email) && (obj === null || obj === void 0 ? void 0 : obj.password)) {\n      if (obj.signInMethod === \"password\"\n      /* EMAIL_PASSWORD */\n      ) {\n        return this._fromEmailAndPassword(obj.email, obj.password);\n      } else if (obj.signInMethod === \"emailLink\"\n      /* EMAIL_LINK */\n      ) {\n        return this._fromEmailAndCode(obj.email, obj.password, obj.tenantId);\n      }\n    }\n\n    return null;\n  }\n  /** @internal */\n\n\n  async _getIdTokenResponse(auth) {\n    switch (this.signInMethod) {\n      case \"password\"\n      /* EMAIL_PASSWORD */\n      :\n        return signInWithPassword(auth, {\n          returnSecureToken: true,\n          email: this._email,\n          password: this._password\n        });\n\n      case \"emailLink\"\n      /* EMAIL_LINK */\n      :\n        return signInWithEmailLink$1(auth, {\n          email: this._email,\n          oobCode: this._password\n        });\n\n      default:\n        _fail(auth, \"internal-error\"\n        /* INTERNAL_ERROR */\n        );\n\n    }\n  }\n  /** @internal */\n\n\n  async _linkToIdToken(auth, idToken) {\n    switch (this.signInMethod) {\n      case \"password\"\n      /* EMAIL_PASSWORD */\n      :\n        return updateEmailPassword(auth, {\n          idToken,\n          returnSecureToken: true,\n          email: this._email,\n          password: this._password\n        });\n\n      case \"emailLink\"\n      /* EMAIL_LINK */\n      :\n        return signInWithEmailLinkForLinking(auth, {\n          idToken,\n          email: this._email,\n          oobCode: this._password\n        });\n\n      default:\n        _fail(auth, \"internal-error\"\n        /* INTERNAL_ERROR */\n        );\n\n    }\n  }\n  /** @internal */\n\n\n  _getReauthenticationResolver(auth) {\n    return this._getIdTokenResponse(auth);\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nexports.H = EmailAuthCredential;\n\nasync function signInWithIdp(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithIdp\"\n  /* SIGN_IN_WITH_IDP */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst IDP_REQUEST_URI$1 = 'http://localhost';\n/**\r\n * Represents the OAuth credentials returned by an {@link OAuthProvider}.\r\n *\r\n * @remarks\r\n * Implementations specify the details about each auth provider's credential requirements.\r\n *\r\n * @public\r\n */\n\nclass OAuthCredential extends AuthCredential {\n  constructor() {\n    super(...arguments);\n    this.pendingToken = null;\n  }\n  /** @internal */\n\n\n  static _fromParams(params) {\n    const cred = new OAuthCredential(params.providerId, params.signInMethod);\n\n    if (params.idToken || params.accessToken) {\n      // OAuth 2 and either ID token or access token.\n      if (params.idToken) {\n        cred.idToken = params.idToken;\n      }\n\n      if (params.accessToken) {\n        cred.accessToken = params.accessToken;\n      } // Add nonce if available and no pendingToken is present.\n\n\n      if (params.nonce && !params.pendingToken) {\n        cred.nonce = params.nonce;\n      }\n\n      if (params.pendingToken) {\n        cred.pendingToken = params.pendingToken;\n      }\n    } else if (params.oauthToken && params.oauthTokenSecret) {\n      // OAuth 1 and OAuth token with token secret\n      cred.accessToken = params.oauthToken;\n      cred.secret = params.oauthTokenSecret;\n    } else {\n      _fail(\"argument-error\"\n      /* ARGUMENT_ERROR */\n      );\n    }\n\n    return cred;\n  }\n  /** {@inheritdoc AuthCredential.toJSON}  */\n\n\n  toJSON() {\n    return {\n      idToken: this.idToken,\n      accessToken: this.accessToken,\n      secret: this.secret,\n      nonce: this.nonce,\n      pendingToken: this.pendingToken,\n      providerId: this.providerId,\n      signInMethod: this.signInMethod\n    };\n  }\n  /**\r\n   * Static method to deserialize a JSON representation of an object into an\r\n   * {@link  AuthCredential}.\r\n   *\r\n   * @param json - Input can be either Object or the stringified representation of the object.\r\n   * When string is provided, JSON.parse would be called first.\r\n   *\r\n   * @returns If the JSON input does not represent an {@link  AuthCredential}, null is returned.\r\n   */\n\n\n  static fromJSON(json) {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n    const {\n      providerId,\n      signInMethod\n    } = obj,\n          rest = (0, _tslib.__rest)(obj, [\"providerId\", \"signInMethod\"]);\n\n    if (!providerId || !signInMethod) {\n      return null;\n    }\n\n    const cred = new OAuthCredential(providerId, signInMethod);\n    cred.idToken = rest.idToken || undefined;\n    cred.accessToken = rest.accessToken || undefined;\n    cred.secret = rest.secret;\n    cred.nonce = rest.nonce;\n    cred.pendingToken = rest.pendingToken || null;\n    return cred;\n  }\n  /** @internal */\n\n\n  _getIdTokenResponse(auth) {\n    const request = this.buildRequest();\n    return signInWithIdp(auth, request);\n  }\n  /** @internal */\n\n\n  _linkToIdToken(auth, idToken) {\n    const request = this.buildRequest();\n    request.idToken = idToken;\n    return signInWithIdp(auth, request);\n  }\n  /** @internal */\n\n\n  _getReauthenticationResolver(auth) {\n    const request = this.buildRequest();\n    request.autoCreate = false;\n    return signInWithIdp(auth, request);\n  }\n\n  buildRequest() {\n    const request = {\n      requestUri: IDP_REQUEST_URI$1,\n      returnSecureToken: true\n    };\n\n    if (this.pendingToken) {\n      request.pendingToken = this.pendingToken;\n    } else {\n      const postBody = {};\n\n      if (this.idToken) {\n        postBody['id_token'] = this.idToken;\n      }\n\n      if (this.accessToken) {\n        postBody['access_token'] = this.accessToken;\n      }\n\n      if (this.secret) {\n        postBody['oauth_token_secret'] = this.secret;\n      }\n\n      postBody['providerId'] = this.providerId;\n\n      if (this.nonce && !this.pendingToken) {\n        postBody['nonce'] = this.nonce;\n      }\n\n      request.postBody = (0, _util.querystring)(postBody);\n    }\n\n    return request;\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nexports.I = OAuthCredential;\n\nasync function sendPhoneVerificationCode(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:sendVerificationCode\"\n  /* SEND_VERIFICATION_CODE */\n  , _addTidIfNecessary(auth, request));\n}\n\nasync function signInWithPhoneNumber$1(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithPhoneNumber\"\n  /* SIGN_IN_WITH_PHONE_NUMBER */\n  , _addTidIfNecessary(auth, request));\n}\n\nasync function linkWithPhoneNumber$1(auth, request) {\n  const response = await _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithPhoneNumber\"\n  /* SIGN_IN_WITH_PHONE_NUMBER */\n  , _addTidIfNecessary(auth, request));\n\n  if (response.temporaryProof) {\n    throw _makeTaggedError(auth, \"account-exists-with-different-credential\"\n    /* NEED_CONFIRMATION */\n    , response);\n  }\n\n  return response;\n}\n\nconst VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_ = {\n  [\"USER_NOT_FOUND\"\n  /* USER_NOT_FOUND */\n  ]: \"user-not-found\"\n  /* USER_DELETED */\n\n};\n\nasync function verifyPhoneNumberForExisting(auth, request) {\n  const apiRequest = Object.assign(Object.assign({}, request), {\n    operation: 'REAUTH'\n  });\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithPhoneNumber\"\n  /* SIGN_IN_WITH_PHONE_NUMBER */\n  , _addTidIfNecessary(auth, apiRequest), VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Represents the credentials returned by {@link PhoneAuthProvider}.\r\n *\r\n * @public\r\n */\n\n\nclass PhoneAuthCredential extends AuthCredential {\n  constructor(params) {\n    super(\"phone\"\n    /* PHONE */\n    , \"phone\"\n    /* PHONE */\n    );\n    this.params = params;\n  }\n  /** @internal */\n\n\n  static _fromVerification(verificationId, verificationCode) {\n    return new PhoneAuthCredential({\n      verificationId,\n      verificationCode\n    });\n  }\n  /** @internal */\n\n\n  static _fromTokenResponse(phoneNumber, temporaryProof) {\n    return new PhoneAuthCredential({\n      phoneNumber,\n      temporaryProof\n    });\n  }\n  /** @internal */\n\n\n  _getIdTokenResponse(auth) {\n    return signInWithPhoneNumber$1(auth, this._makeVerificationRequest());\n  }\n  /** @internal */\n\n\n  _linkToIdToken(auth, idToken) {\n    return linkWithPhoneNumber$1(auth, Object.assign({\n      idToken\n    }, this._makeVerificationRequest()));\n  }\n  /** @internal */\n\n\n  _getReauthenticationResolver(auth) {\n    return verifyPhoneNumberForExisting(auth, this._makeVerificationRequest());\n  }\n  /** @internal */\n\n\n  _makeVerificationRequest() {\n    const {\n      temporaryProof,\n      phoneNumber,\n      verificationId,\n      verificationCode\n    } = this.params;\n\n    if (temporaryProof && phoneNumber) {\n      return {\n        temporaryProof,\n        phoneNumber\n      };\n    }\n\n    return {\n      sessionInfo: verificationId,\n      code: verificationCode\n    };\n  }\n  /** {@inheritdoc AuthCredential.toJSON} */\n\n\n  toJSON() {\n    const obj = {\n      providerId: this.providerId\n    };\n\n    if (this.params.phoneNumber) {\n      obj.phoneNumber = this.params.phoneNumber;\n    }\n\n    if (this.params.temporaryProof) {\n      obj.temporaryProof = this.params.temporaryProof;\n    }\n\n    if (this.params.verificationCode) {\n      obj.verificationCode = this.params.verificationCode;\n    }\n\n    if (this.params.verificationId) {\n      obj.verificationId = this.params.verificationId;\n    }\n\n    return obj;\n  }\n  /** Generates a phone credential based on a plain object or a JSON string. */\n\n\n  static fromJSON(json) {\n    if (typeof json === 'string') {\n      json = JSON.parse(json);\n    }\n\n    const {\n      verificationId,\n      verificationCode,\n      phoneNumber,\n      temporaryProof\n    } = json;\n\n    if (!verificationCode && !verificationId && !phoneNumber && !temporaryProof) {\n      return null;\n    }\n\n    return new PhoneAuthCredential({\n      verificationId,\n      verificationCode,\n      phoneNumber,\n      temporaryProof\n    });\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Maps the mode string in action code URL to Action Code Info operation.\r\n *\r\n * @param mode\r\n */\n\n\nexports.J = PhoneAuthCredential;\n\nfunction parseMode(mode) {\n  switch (mode) {\n    case 'recoverEmail':\n      return \"RECOVER_EMAIL\"\n      /* RECOVER_EMAIL */\n      ;\n\n    case 'resetPassword':\n      return \"PASSWORD_RESET\"\n      /* PASSWORD_RESET */\n      ;\n\n    case 'signIn':\n      return \"EMAIL_SIGNIN\"\n      /* EMAIL_SIGNIN */\n      ;\n\n    case 'verifyEmail':\n      return \"VERIFY_EMAIL\"\n      /* VERIFY_EMAIL */\n      ;\n\n    case 'verifyAndChangeEmail':\n      return \"VERIFY_AND_CHANGE_EMAIL\"\n      /* VERIFY_AND_CHANGE_EMAIL */\n      ;\n\n    case 'revertSecondFactorAddition':\n      return \"REVERT_SECOND_FACTOR_ADDITION\"\n      /* REVERT_SECOND_FACTOR_ADDITION */\n      ;\n\n    default:\n      return null;\n  }\n}\n/**\r\n * Helper to parse FDL links\r\n *\r\n * @param url\r\n */\n\n\nfunction parseDeepLink(url) {\n  const link = (0, _util.querystringDecode)((0, _util.extractQuerystring)(url))['link']; // Double link case (automatic redirect).\n\n  const doubleDeepLink = link ? (0, _util.querystringDecode)((0, _util.extractQuerystring)(link))['deep_link_id'] : null; // iOS custom scheme links.\n\n  const iOSDeepLink = (0, _util.querystringDecode)((0, _util.extractQuerystring)(url))['deep_link_id'];\n  const iOSDoubleDeepLink = iOSDeepLink ? (0, _util.querystringDecode)((0, _util.extractQuerystring)(iOSDeepLink))['link'] : null;\n  return iOSDoubleDeepLink || iOSDeepLink || doubleDeepLink || link || url;\n}\n/**\r\n * A utility class to parse email action URLs such as password reset, email verification,\r\n * email link sign in, etc.\r\n *\r\n * @public\r\n */\n\n\nclass ActionCodeURL {\n  /**\r\n   * @param actionLink - The link from which to extract the URL.\r\n   * @returns The {@link ActionCodeURL} object, or null if the link is invalid.\r\n   *\r\n   * @internal\r\n   */\n  constructor(actionLink) {\n    var _a, _b, _c, _d, _e, _f;\n\n    const searchParams = (0, _util.querystringDecode)((0, _util.extractQuerystring)(actionLink));\n    const apiKey = (_a = searchParams[\"apiKey\"\n    /* API_KEY */\n    ]) !== null && _a !== void 0 ? _a : null;\n    const code = (_b = searchParams[\"oobCode\"\n    /* CODE */\n    ]) !== null && _b !== void 0 ? _b : null;\n    const operation = parseMode((_c = searchParams[\"mode\"\n    /* MODE */\n    ]) !== null && _c !== void 0 ? _c : null); // Validate API key, code and mode.\n\n    _assert(apiKey && code && operation, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    this.apiKey = apiKey;\n    this.operation = operation;\n    this.code = code;\n    this.continueUrl = (_d = searchParams[\"continueUrl\"\n    /* CONTINUE_URL */\n    ]) !== null && _d !== void 0 ? _d : null;\n    this.languageCode = (_e = searchParams[\"languageCode\"\n    /* LANGUAGE_CODE */\n    ]) !== null && _e !== void 0 ? _e : null;\n    this.tenantId = (_f = searchParams[\"tenantId\"\n    /* TENANT_ID */\n    ]) !== null && _f !== void 0 ? _f : null;\n  }\n  /**\r\n   * Parses the email action link string and returns an {@link ActionCodeURL} if the link is valid,\r\n   * otherwise returns null.\r\n   *\r\n   * @param link  - The email action link string.\r\n   * @returns The {@link ActionCodeURL} object, or null if the link is invalid.\r\n   *\r\n   * @public\r\n   */\n\n\n  static parseLink(link) {\n    const actionLink = parseDeepLink(link);\n\n    try {\n      return new ActionCodeURL(actionLink);\n    } catch (_a) {\n      return null;\n    }\n  }\n\n}\n/**\r\n * Parses the email action link string and returns an {@link ActionCodeURL} if\r\n * the link is valid, otherwise returns null.\r\n *\r\n * @public\r\n */\n\n\nexports.ac = ActionCodeURL;\n\nfunction parseActionCodeURL(link) {\n  return ActionCodeURL.parseLink(link);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for generating {@link EmailAuthCredential}.\r\n *\r\n * @public\r\n */\n\n\nclass EmailAuthProvider {\n  constructor() {\n    /**\r\n     * Always set to {@link ProviderId}.PASSWORD, even for email link.\r\n     */\n    this.providerId = EmailAuthProvider.PROVIDER_ID;\n  }\n  /**\r\n   * Initialize an {@link AuthCredential} using an email and password.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const authCredential = EmailAuthProvider.credential(email, password);\r\n   * const userCredential = await signInWithCredential(auth, authCredential);\r\n   * ```\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n   * ```\r\n   *\r\n   * @param email - Email address.\r\n   * @param password - User account password.\r\n   * @returns The auth provider credential.\r\n   */\n\n\n  static credential(email, password) {\n    return EmailAuthCredential._fromEmailAndPassword(email, password);\n  }\n  /**\r\n   * Initialize an {@link AuthCredential} using an email and an email link after a sign in with\r\n   * email link operation.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const authCredential = EmailAuthProvider.credentialWithLink(auth, email, emailLink);\r\n   * const userCredential = await signInWithCredential(auth, authCredential);\r\n   * ```\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * await sendSignInLinkToEmail(auth, email);\r\n   * // Obtain emailLink from user.\r\n   * const userCredential = await signInWithEmailLink(auth, email, emailLink);\r\n   * ```\r\n   *\r\n   * @param auth - The {@link Auth} instance used to verify the link.\r\n   * @param email - Email address.\r\n   * @param emailLink - Sign-in email link.\r\n   * @returns - The auth provider credential.\r\n   */\n\n\n  static credentialWithLink(email, emailLink) {\n    const actionCodeUrl = ActionCodeURL.parseLink(emailLink);\n\n    _assert(actionCodeUrl, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    return EmailAuthCredential._fromEmailAndCode(email, actionCodeUrl.code, actionCodeUrl.tenantId);\n  }\n\n}\n/**\r\n * Always set to {@link ProviderId}.PASSWORD, even for email link.\r\n */\n\n\nexports.L = EmailAuthProvider;\nEmailAuthProvider.PROVIDER_ID = \"password\"\n/* PASSWORD */\n;\n/**\r\n * Always set to {@link SignInMethod}.EMAIL_PASSWORD.\r\n */\n\nEmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD = \"password\"\n/* EMAIL_PASSWORD */\n;\n/**\r\n * Always set to {@link SignInMethod}.EMAIL_LINK.\r\n */\n\nEmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD = \"emailLink\"\n/* EMAIL_LINK */\n;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * The base class for all Federated providers (OAuth (including OIDC), SAML).\r\n *\r\n * This class is not meant to be instantiated directly.\r\n *\r\n * @public\r\n */\n\nclass FederatedAuthProvider {\n  /**\r\n   * Constructor for generic OAuth providers.\r\n   *\r\n   * @param providerId - Provider for which credentials should be generated.\r\n   */\n  constructor(providerId) {\n    this.providerId = providerId;\n    /** @internal */\n\n    this.defaultLanguageCode = null;\n    /** @internal */\n\n    this.customParameters = {};\n  }\n  /**\r\n   * Set the language gode.\r\n   *\r\n   * @param languageCode - language code\r\n   */\n\n\n  setDefaultLanguage(languageCode) {\n    this.defaultLanguageCode = languageCode;\n  }\n  /**\r\n   * Sets the OAuth custom parameters to pass in an OAuth request for popup and redirect sign-in\r\n   * operations.\r\n   *\r\n   * @remarks\r\n   * For a detailed list, check the reserved required OAuth 2.0 parameters such as `client_id`,\r\n   * `redirect_uri`, `scope`, `response_type`, and `state` are not allowed and will be ignored.\r\n   *\r\n   * @param customOAuthParameters - The custom OAuth parameters to pass in the OAuth request.\r\n   */\n\n\n  setCustomParameters(customOAuthParameters) {\n    this.customParameters = customOAuthParameters;\n    return this;\n  }\n  /**\r\n   * Retrieve the current list of {@link CustomParameters}.\r\n   */\n\n\n  getCustomParameters() {\n    return this.customParameters;\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Common code to all OAuth providers. This is separate from the\r\n * {@link OAuthProvider} so that child providers (like\r\n * {@link GoogleAuthProvider}) don't inherit the `credential` instance method.\r\n * Instead, they rely on a static `credential` method.\r\n */\n\n\nclass BaseOAuthProvider extends FederatedAuthProvider {\n  constructor() {\n    super(...arguments);\n    /** @internal */\n\n    this.scopes = [];\n  }\n  /**\r\n   * Add an OAuth scope to the credential.\r\n   *\r\n   * @param scope - Provider OAuth scope to add.\r\n   */\n\n\n  addScope(scope) {\n    // If not already added, add scope to list.\n    if (!this.scopes.includes(scope)) {\n      this.scopes.push(scope);\n    }\n\n    return this;\n  }\n  /**\r\n   * Retrieve the current list of OAuth scopes.\r\n   */\n\n\n  getScopes() {\n    return [...this.scopes];\n  }\n\n}\n/**\r\n * Provider for generating generic {@link OAuthCredential}.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new OAuthProvider('google.com');\r\n * // Start a sign in process for an unauthenticated user.\r\n * provider.addScope('profile');\r\n * provider.addScope('email');\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a OAuth Access Token for the provider.\r\n *   const credential = provider.credentialFromResult(auth, result);\r\n *   const token = credential.accessToken;\r\n * }\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new OAuthProvider('google.com');\r\n * provider.addScope('profile');\r\n * provider.addScope('email');\r\n * const result = await signInWithPopup(auth, provider);\r\n *\r\n * // The signed-in user info.\r\n * const user = result.user;\r\n * // This gives you a OAuth Access Token for the provider.\r\n * const credential = provider.credentialFromResult(auth, result);\r\n * const token = credential.accessToken;\r\n * ```\r\n * @public\r\n */\n\n\nclass OAuthProvider extends BaseOAuthProvider {\n  /**\r\n   * Creates an {@link OAuthCredential} from a JSON string or a plain object.\r\n   * @param json - A plain object or a JSON string\r\n   */\n  static credentialFromJSON(json) {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n\n    _assert('providerId' in obj && 'signInMethod' in obj, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    return OAuthCredential._fromParams(obj);\n  }\n  /**\r\n   * Creates a {@link OAuthCredential} from a generic OAuth provider's access token or ID token.\r\n   *\r\n   * @remarks\r\n   * The raw nonce is required when an ID token with a nonce field is provided. The SHA-256 hash of\r\n   * the raw nonce must match the nonce field in the ID token.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // `googleUser` from the onsuccess Google Sign In callback.\r\n   * // Initialize a generate OAuth provider with a `google.com` providerId.\r\n   * const provider = new OAuthProvider('google.com');\r\n   * const credential = provider.credential({\r\n   *   idToken: googleUser.getAuthResponse().id_token,\r\n   * });\r\n   * const result = await signInWithCredential(credential);\r\n   * ```\r\n   *\r\n   * @param params - Either the options object containing the ID token, access token and raw nonce\r\n   * or the ID token string.\r\n   */\n\n\n  credential(params) {\n    return this._credential(Object.assign(Object.assign({}, params), {\n      nonce: params.rawNonce\n    }));\n  }\n  /** An internal credential method that accepts more permissive options */\n\n\n  _credential(params) {\n    _assert(params.idToken || params.accessToken, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    ); // For OAuthCredential, sign in method is same as providerId.\n\n\n    return OAuthCredential._fromParams(Object.assign(Object.assign({}, params), {\n      providerId: this.providerId,\n      signInMethod: this.providerId\n    }));\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    return OAuthProvider.oauthCredentialFromTaggedObject(userCredential);\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\r\n   * thrown during a sign-in, link, or reauthenticate operation.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromError(error) {\n    return OAuthProvider.oauthCredentialFromTaggedObject(error.customData || {});\n  }\n\n  static oauthCredentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const {\n      oauthIdToken,\n      oauthAccessToken,\n      oauthTokenSecret,\n      pendingToken,\n      nonce,\n      providerId\n    } = tokenResponse;\n\n    if (!oauthAccessToken && !oauthTokenSecret && !oauthIdToken && !pendingToken) {\n      return null;\n    }\n\n    if (!providerId) {\n      return null;\n    }\n\n    try {\n      return new OAuthProvider(providerId)._credential({\n        idToken: oauthIdToken,\n        accessToken: oauthAccessToken,\n        nonce,\n        pendingToken\n      });\n    } catch (e) {\n      return null;\n    }\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.FACEBOOK.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new FacebookAuthProvider();\r\n * // Start a sign in process for an unauthenticated user.\r\n * provider.addScope('user_birthday');\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a Facebook Access Token.\r\n *   const credential = FacebookAuthProvider.credentialFromResult(result);\r\n *   const token = credential.accessToken;\r\n * }\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new FacebookAuthProvider();\r\n * provider.addScope('user_birthday');\r\n * const result = await signInWithPopup(auth, provider);\r\n *\r\n * // The signed-in user info.\r\n * const user = result.user;\r\n * // This gives you a Facebook Access Token.\r\n * const credential = FacebookAuthProvider.credentialFromResult(result);\r\n * const token = credential.accessToken;\r\n * ```\r\n *\r\n * @public\r\n */\n\n\nexports.T = OAuthProvider;\n\nclass FacebookAuthProvider extends BaseOAuthProvider {\n  constructor() {\n    super(\"facebook.com\"\n    /* FACEBOOK */\n    );\n  }\n  /**\r\n   * Creates a credential for Facebook.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // `event` from the Facebook auth.authResponseChange callback.\r\n   * const credential = FacebookAuthProvider.credential(event.authResponse.accessToken);\r\n   * const result = await signInWithCredential(credential);\r\n   * ```\r\n   *\r\n   * @param accessToken - Facebook access token.\r\n   */\n\n\n  static credential(accessToken) {\n    return OAuthCredential._fromParams({\n      providerId: FacebookAuthProvider.PROVIDER_ID,\n      signInMethod: FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,\n      accessToken\n    });\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    return FacebookAuthProvider.credentialFromTaggedObject(userCredential);\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\r\n   * thrown during a sign-in, link, or reauthenticate operation.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromError(error) {\n    return FacebookAuthProvider.credentialFromTaggedObject(error.customData || {});\n  }\n\n  static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse || !('oauthAccessToken' in tokenResponse)) {\n      return null;\n    }\n\n    if (!tokenResponse.oauthAccessToken) {\n      return null;\n    }\n\n    try {\n      return FacebookAuthProvider.credential(tokenResponse.oauthAccessToken);\n    } catch (_a) {\n      return null;\n    }\n  }\n\n}\n/** Always set to {@link SignInMethod}.FACEBOOK. */\n\n\nexports.M = FacebookAuthProvider;\nFacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD = \"facebook.com\"\n/* FACEBOOK */\n;\n/** Always set to {@link ProviderId}.FACEBOOK. */\n\nFacebookAuthProvider.PROVIDER_ID = \"facebook.com\"\n/* FACEBOOK */\n;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for generating an an {@link OAuthCredential} for {@link ProviderId}.GOOGLE.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new GoogleAuthProvider();\r\n * // Start a sign in process for an unauthenticated user.\r\n * provider.addScope('profile');\r\n * provider.addScope('email');\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a Google Access Token.\r\n *   const credential = GoogleAuthProvider.credentialFromResult(result);\r\n *   const token = credential.accessToken;\r\n * }\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new GoogleAuthProvider();\r\n * provider.addScope('profile');\r\n * provider.addScope('email');\r\n * const result = await signInWithPopup(auth, provider);\r\n *\r\n * // The signed-in user info.\r\n * const user = result.user;\r\n * // This gives you a Google Access Token.\r\n * const credential = GoogleAuthProvider.credentialFromResult(result);\r\n * const token = credential.accessToken;\r\n * ```\r\n *\r\n * @public\r\n */\n\nclass GoogleAuthProvider extends BaseOAuthProvider {\n  constructor() {\n    super(\"google.com\"\n    /* GOOGLE */\n    );\n    this.addScope('profile');\n  }\n  /**\r\n   * Creates a credential for Google. At least one of ID token and access token is required.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * // \\`googleUser\\` from the onsuccess Google Sign In callback.\r\n   * const credential = GoogleAuthProvider.credential(googleUser.getAuthResponse().id_token);\r\n   * const result = await signInWithCredential(credential);\r\n   * ```\r\n   *\r\n   * @param idToken - Google ID token.\r\n   * @param accessToken - Google access token.\r\n   */\n\n\n  static credential(idToken, accessToken) {\n    return OAuthCredential._fromParams({\n      providerId: GoogleAuthProvider.PROVIDER_ID,\n      signInMethod: GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,\n      idToken,\n      accessToken\n    });\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    return GoogleAuthProvider.credentialFromTaggedObject(userCredential);\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\r\n   * thrown during a sign-in, link, or reauthenticate operation.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromError(error) {\n    return GoogleAuthProvider.credentialFromTaggedObject(error.customData || {});\n  }\n\n  static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const {\n      oauthIdToken,\n      oauthAccessToken\n    } = tokenResponse;\n\n    if (!oauthIdToken && !oauthAccessToken) {\n      // This could be an oauth 1 credential or a phone credential\n      return null;\n    }\n\n    try {\n      return GoogleAuthProvider.credential(oauthIdToken, oauthAccessToken);\n    } catch (_a) {\n      return null;\n    }\n  }\n\n}\n/** Always set to {@link SignInMethod}.GOOGLE. */\n\n\nexports.N = GoogleAuthProvider;\nGoogleAuthProvider.GOOGLE_SIGN_IN_METHOD = \"google.com\"\n/* GOOGLE */\n;\n/** Always set to {@link ProviderId}.GOOGLE. */\n\nGoogleAuthProvider.PROVIDER_ID = \"google.com\"\n/* GOOGLE */\n;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.GITHUB.\r\n *\r\n * @remarks\r\n * GitHub requires an OAuth 2.0 redirect, so you can either handle the redirect directly, or use\r\n * the {@link signInWithPopup} handler:\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new GithubAuthProvider();\r\n * // Start a sign in process for an unauthenticated user.\r\n * provider.addScope('repo');\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a Github Access Token.\r\n *   const credential = GithubAuthProvider.credentialFromResult(result);\r\n *   const token = credential.accessToken;\r\n * }\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new GithubAuthProvider();\r\n * provider.addScope('repo');\r\n * const result = await signInWithPopup(auth, provider);\r\n *\r\n * // The signed-in user info.\r\n * const user = result.user;\r\n * // This gives you a Github Access Token.\r\n * const credential = GithubAuthProvider.credentialFromResult(result);\r\n * const token = credential.accessToken;\r\n * ```\r\n * @public\r\n */\n\nclass GithubAuthProvider extends BaseOAuthProvider {\n  constructor() {\n    super(\"github.com\"\n    /* GITHUB */\n    );\n  }\n  /**\r\n   * Creates a credential for Github.\r\n   *\r\n   * @param accessToken - Github access token.\r\n   */\n\n\n  static credential(accessToken) {\n    return OAuthCredential._fromParams({\n      providerId: GithubAuthProvider.PROVIDER_ID,\n      signInMethod: GithubAuthProvider.GITHUB_SIGN_IN_METHOD,\n      accessToken\n    });\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    return GithubAuthProvider.credentialFromTaggedObject(userCredential);\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\r\n   * thrown during a sign-in, link, or reauthenticate operation.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromError(error) {\n    return GithubAuthProvider.credentialFromTaggedObject(error.customData || {});\n  }\n\n  static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse || !('oauthAccessToken' in tokenResponse)) {\n      return null;\n    }\n\n    if (!tokenResponse.oauthAccessToken) {\n      return null;\n    }\n\n    try {\n      return GithubAuthProvider.credential(tokenResponse.oauthAccessToken);\n    } catch (_a) {\n      return null;\n    }\n  }\n\n}\n/** Always set to {@link SignInMethod}.GITHUB. */\n\n\nexports.Q = GithubAuthProvider;\nGithubAuthProvider.GITHUB_SIGN_IN_METHOD = \"github.com\"\n/* GITHUB */\n;\n/** Always set to {@link ProviderId}.GITHUB. */\n\nGithubAuthProvider.PROVIDER_ID = \"github.com\"\n/* GITHUB */\n;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nconst IDP_REQUEST_URI = 'http://localhost';\n/**\r\n * @public\r\n */\n\nclass SAMLAuthCredential extends AuthCredential {\n  /** @internal */\n  constructor(providerId, pendingToken) {\n    super(providerId, providerId);\n    this.pendingToken = pendingToken;\n  }\n  /** @internal */\n\n\n  _getIdTokenResponse(auth) {\n    const request = this.buildRequest();\n    return signInWithIdp(auth, request);\n  }\n  /** @internal */\n\n\n  _linkToIdToken(auth, idToken) {\n    const request = this.buildRequest();\n    request.idToken = idToken;\n    return signInWithIdp(auth, request);\n  }\n  /** @internal */\n\n\n  _getReauthenticationResolver(auth) {\n    const request = this.buildRequest();\n    request.autoCreate = false;\n    return signInWithIdp(auth, request);\n  }\n  /** {@inheritdoc AuthCredential.toJSON}  */\n\n\n  toJSON() {\n    return {\n      signInMethod: this.signInMethod,\n      providerId: this.providerId,\n      pendingToken: this.pendingToken\n    };\n  }\n  /**\r\n   * Static method to deserialize a JSON representation of an object into an\r\n   * {@link  AuthCredential}.\r\n   *\r\n   * @param json - Input can be either Object or the stringified representation of the object.\r\n   * When string is provided, JSON.parse would be called first.\r\n   *\r\n   * @returns If the JSON input does not represent an {@link  AuthCredential}, null is returned.\r\n   */\n\n\n  static fromJSON(json) {\n    const obj = typeof json === 'string' ? JSON.parse(json) : json;\n    const {\n      providerId,\n      signInMethod,\n      pendingToken\n    } = obj;\n\n    if (!providerId || !signInMethod || !pendingToken || providerId !== signInMethod) {\n      return null;\n    }\n\n    return new SAMLAuthCredential(providerId, pendingToken);\n  }\n  /**\r\n   * Helper static method to avoid exposing the constructor to end users.\r\n   *\r\n   * @internal\r\n   */\n\n\n  static _create(providerId, pendingToken) {\n    return new SAMLAuthCredential(providerId, pendingToken);\n  }\n\n  buildRequest() {\n    return {\n      requestUri: IDP_REQUEST_URI,\n      returnSecureToken: true,\n      pendingToken: this.pendingToken\n    };\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nexports.aJ = SAMLAuthCredential;\nconst SAML_PROVIDER_PREFIX = 'saml.';\n/**\r\n * An {@link AuthProvider} for SAML.\r\n *\r\n * @public\r\n */\n\nclass SAMLAuthProvider extends FederatedAuthProvider {\n  /**\r\n   * Constructor. The providerId must start with \"saml.\"\r\n   * @param providerId - SAML provider ID.\r\n   */\n  constructor(providerId) {\n    _assert(providerId.startsWith(SAML_PROVIDER_PREFIX), \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    super(providerId);\n  }\n  /**\r\n   * Generates an {@link AuthCredential} from a {@link UserCredential} after a\r\n   * successful SAML flow completes.\r\n   *\r\n   * @remarks\r\n   *\r\n   * For example, to get an {@link AuthCredential}, you could write the\r\n   * following code:\r\n   *\r\n   * ```js\r\n   * const userCredential = await signInWithPopup(auth, samlProvider);\r\n   * const credential = SAMLAuthProvider.credentialFromResult(userCredential);\r\n   * ```\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    return SAMLAuthProvider.samlCredentialFromTaggedObject(userCredential);\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\r\n   * thrown during a sign-in, link, or reauthenticate operation.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromError(error) {\n    return SAMLAuthProvider.samlCredentialFromTaggedObject(error.customData || {});\n  }\n  /**\r\n   * Creates an {@link AuthCredential} from a JSON string or a plain object.\r\n   * @param json - A plain object or a JSON string\r\n   */\n\n\n  static credentialFromJSON(json) {\n    const credential = SAMLAuthCredential.fromJSON(json);\n\n    _assert(credential, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    return credential;\n  }\n\n  static samlCredentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const {\n      pendingToken,\n      providerId\n    } = tokenResponse;\n\n    if (!pendingToken || !providerId) {\n      return null;\n    }\n\n    try {\n      return SAMLAuthCredential._create(providerId, pendingToken);\n    } catch (e) {\n      return null;\n    }\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for generating an {@link OAuthCredential} for {@link ProviderId}.TWITTER.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new TwitterAuthProvider();\r\n * // Start a sign in process for an unauthenticated user.\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a Twitter Access Token and Secret.\r\n *   const credential = TwitterAuthProvider.credentialFromResult(result);\r\n *   const token = credential.accessToken;\r\n *   const secret = credential.secret;\r\n * }\r\n * ```\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new TwitterAuthProvider();\r\n * const result = await signInWithPopup(auth, provider);\r\n *\r\n * // The signed-in user info.\r\n * const user = result.user;\r\n * // This gives you a Twitter Access Token and Secret.\r\n * const credential = TwitterAuthProvider.credentialFromResult(result);\r\n * const token = credential.accessToken;\r\n * const secret = credential.secret;\r\n * ```\r\n *\r\n * @public\r\n */\n\n\nexports.U = SAMLAuthProvider;\n\nclass TwitterAuthProvider extends BaseOAuthProvider {\n  constructor() {\n    super(\"twitter.com\"\n    /* TWITTER */\n    );\n  }\n  /**\r\n   * Creates a credential for Twitter.\r\n   *\r\n   * @param token - Twitter access token.\r\n   * @param secret - Twitter secret.\r\n   */\n\n\n  static credential(token, secret) {\n    return OAuthCredential._fromParams({\n      providerId: TwitterAuthProvider.PROVIDER_ID,\n      signInMethod: TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,\n      oauthToken: token,\n      oauthTokenSecret: secret\n    });\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link UserCredential}.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    return TwitterAuthProvider.credentialFromTaggedObject(userCredential);\n  }\n  /**\r\n   * Used to extract the underlying {@link OAuthCredential} from a {@link AuthError} which was\r\n   * thrown during a sign-in, link, or reauthenticate operation.\r\n   *\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromError(error) {\n    return TwitterAuthProvider.credentialFromTaggedObject(error.customData || {});\n  }\n\n  static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const {\n      oauthAccessToken,\n      oauthTokenSecret\n    } = tokenResponse;\n\n    if (!oauthAccessToken || !oauthTokenSecret) {\n      return null;\n    }\n\n    try {\n      return TwitterAuthProvider.credential(oauthAccessToken, oauthTokenSecret);\n    } catch (_a) {\n      return null;\n    }\n  }\n\n}\n/** Always set to {@link SignInMethod}.TWITTER. */\n\n\nexports.V = TwitterAuthProvider;\nTwitterAuthProvider.TWITTER_SIGN_IN_METHOD = \"twitter.com\"\n/* TWITTER */\n;\n/** Always set to {@link ProviderId}.TWITTER. */\n\nTwitterAuthProvider.PROVIDER_ID = \"twitter.com\"\n/* TWITTER */\n;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nasync function signUp(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signUp\"\n  /* SIGN_UP */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass UserCredentialImpl {\n  constructor(params) {\n    this.user = params.user;\n    this.providerId = params.providerId;\n    this._tokenResponse = params._tokenResponse;\n    this.operationType = params.operationType;\n  }\n\n  static async _fromIdTokenResponse(auth, operationType, idTokenResponse, isAnonymous = false) {\n    const user = await UserImpl._fromIdTokenResponse(auth, idTokenResponse, isAnonymous);\n    const providerId = providerIdForResponse(idTokenResponse);\n    const userCred = new UserCredentialImpl({\n      user,\n      providerId,\n      _tokenResponse: idTokenResponse,\n      operationType\n    });\n    return userCred;\n  }\n\n  static async _forOperation(user, operationType, response) {\n    await user._updateTokensIfNecessary(response,\n    /* reload */\n    true);\n    const providerId = providerIdForResponse(response);\n    return new UserCredentialImpl({\n      user,\n      providerId,\n      _tokenResponse: response,\n      operationType\n    });\n  }\n\n}\n\nfunction providerIdForResponse(response) {\n  if (response.providerId) {\n    return response.providerId;\n  }\n\n  if ('phoneNumber' in response) {\n    return \"phone\"\n    /* PHONE */\n    ;\n  }\n\n  return null;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Asynchronously signs in as an anonymous user.\r\n *\r\n * @remarks\r\n * If there is already an anonymous user signed in, that user will be returned; otherwise, a\r\n * new anonymous user identity will be created and returned.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n *\r\n * @public\r\n */\n\n\nasync function signInAnonymously(auth) {\n  var _a;\n\n  const authInternal = _castAuth(auth);\n\n  await authInternal._initializationPromise;\n\n  if ((_a = authInternal.currentUser) === null || _a === void 0 ? void 0 : _a.isAnonymous) {\n    // If an anonymous user is already signed in, no need to sign them in again.\n    return new UserCredentialImpl({\n      user: authInternal.currentUser,\n      providerId: null,\n      operationType: \"signIn\"\n      /* SIGN_IN */\n\n    });\n  }\n\n  const response = await signUp(authInternal, {\n    returnSecureToken: true\n  });\n  const userCredential = await UserCredentialImpl._fromIdTokenResponse(authInternal, \"signIn\"\n  /* SIGN_IN */\n  , response, true);\n  await authInternal._updateCurrentUser(userCredential.user);\n  return userCredential;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass MultiFactorError extends _util.FirebaseError {\n  constructor(auth, error, operationType, user) {\n    var _a;\n\n    super(error.code, error.message);\n    this.operationType = operationType;\n    this.user = user; // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n\n    Object.setPrototypeOf(this, MultiFactorError.prototype);\n    this.customData = {\n      appName: auth.name,\n      tenantId: (_a = auth.tenantId) !== null && _a !== void 0 ? _a : undefined,\n      _serverResponse: error.customData._serverResponse,\n      operationType\n    };\n  }\n\n  static _fromErrorAndOperation(auth, error, operationType, user) {\n    return new MultiFactorError(auth, error, operationType, user);\n  }\n\n}\n\nfunction _processCredentialSavingMfaContextIfNecessary(auth, operationType, credential, user) {\n  const idTokenProvider = operationType === \"reauthenticate\"\n  /* REAUTHENTICATE */\n  ? credential._getReauthenticationResolver(auth) : credential._getIdTokenResponse(auth);\n  return idTokenProvider.catch(error => {\n    if (error.code === `auth/${\"multi-factor-auth-required\"\n    /* MFA_REQUIRED */\n    }`) {\n      throw MultiFactorError._fromErrorAndOperation(auth, error, operationType, user);\n    }\n\n    throw error;\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Takes a set of UserInfo provider data and converts it to a set of names\r\n */\n\n\nfunction providerDataAsNames(providerData) {\n  return new Set(providerData.map(({\n    providerId\n  }) => providerId).filter(pid => !!pid));\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Unlinks a provider from a user account.\r\n *\r\n * @param user - The user.\r\n * @param providerId - The provider to unlink.\r\n *\r\n * @public\r\n */\n\n\nasync function unlink(user, providerId) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  await _assertLinkedStatus(true, userInternal, providerId);\n  const {\n    providerUserInfo\n  } = await deleteLinkedAccounts(userInternal.auth, {\n    idToken: await userInternal.getIdToken(),\n    deleteProvider: [providerId]\n  });\n  const providersLeft = providerDataAsNames(providerUserInfo || []);\n  userInternal.providerData = userInternal.providerData.filter(pd => providersLeft.has(pd.providerId));\n\n  if (!providersLeft.has(\"phone\"\n  /* PHONE */\n  )) {\n    userInternal.phoneNumber = null;\n  }\n\n  await userInternal.auth._persistUserIfCurrent(userInternal);\n  return userInternal;\n}\n\nasync function _link$1(user, credential, bypassAuthState = false) {\n  const response = await _logoutIfInvalidated(user, credential._linkToIdToken(user.auth, await user.getIdToken()), bypassAuthState);\n  return UserCredentialImpl._forOperation(user, \"link\"\n  /* LINK */\n  , response);\n}\n\nasync function _assertLinkedStatus(expected, user, provider) {\n  await _reloadWithoutSaving(user);\n  const providerIds = providerDataAsNames(user.providerData);\n  const code = expected === false ? \"provider-already-linked\"\n  /* PROVIDER_ALREADY_LINKED */\n  : \"no-such-provider\"\n  /* NO_SUCH_PROVIDER */\n  ;\n\n  _assert(providerIds.has(provider) === expected, user.auth, code);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function _reauthenticate(user, credential, bypassAuthState = false) {\n  const {\n    auth\n  } = user;\n  const operationType = \"reauthenticate\"\n  /* REAUTHENTICATE */\n  ;\n\n  try {\n    const response = await _logoutIfInvalidated(user, _processCredentialSavingMfaContextIfNecessary(auth, operationType, credential, user), bypassAuthState);\n\n    _assert(response.idToken, auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    const parsed = _parseToken(response.idToken);\n\n    _assert(parsed, auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    const {\n      sub: localId\n    } = parsed;\n\n    _assert(user.uid === localId, auth, \"user-mismatch\"\n    /* USER_MISMATCH */\n    );\n\n    return UserCredentialImpl._forOperation(user, operationType, response);\n  } catch (e) {\n    // Convert user deleted error into user mismatch\n    if ((e === null || e === void 0 ? void 0 : e.code) === `auth/${\"user-not-found\"\n    /* USER_DELETED */\n    }`) {\n      _fail(auth, \"user-mismatch\"\n      /* USER_MISMATCH */\n      );\n    }\n\n    throw e;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function _signInWithCredential(auth, credential, bypassAuthState = false) {\n  const operationType = \"signIn\"\n  /* SIGN_IN */\n  ;\n  const response = await _processCredentialSavingMfaContextIfNecessary(auth, operationType, credential);\n  const userCredential = await UserCredentialImpl._fromIdTokenResponse(auth, operationType, response);\n\n  if (!bypassAuthState) {\n    await auth._updateCurrentUser(userCredential.user);\n  }\n\n  return userCredential;\n}\n/**\r\n * Asynchronously signs in with the given credentials.\r\n *\r\n * @remarks\r\n * An {@link AuthProvider} can be used to generate the credential.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param credential - The auth credential.\r\n *\r\n * @public\r\n */\n\n\nasync function signInWithCredential(auth, credential) {\n  return _signInWithCredential(_castAuth(auth), credential);\n}\n/**\r\n * Links the user account with the given credentials.\r\n *\r\n * @remarks\r\n * An {@link AuthProvider} can be used to generate the credential.\r\n *\r\n * @param user - The user.\r\n * @param credential - The auth credential.\r\n *\r\n * @public\r\n */\n\n\nasync function linkWithCredential(user, credential) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  await _assertLinkedStatus(false, userInternal, credential.providerId);\n  return _link$1(userInternal, credential);\n}\n/**\r\n * Re-authenticates a user using a fresh credential.\r\n *\r\n * @remarks\r\n * Use before operations such as {@link updatePassword} that require tokens from recent sign-in\r\n * attempts. This method can be used to recover from a `CREDENTIAL_TOO_OLD_LOGIN_AGAIN` error.\r\n *\r\n * @param user - The user.\r\n * @param credential - The auth credential.\r\n *\r\n * @public\r\n */\n\n\nasync function reauthenticateWithCredential(user, credential) {\n  return _reauthenticate((0, _util.getModularInstance)(user), credential);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function signInWithCustomToken$1(auth, request) {\n  return _performSignInRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:signInWithCustomToken\"\n  /* SIGN_IN_WITH_CUSTOM_TOKEN */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Asynchronously signs in using a custom token.\r\n *\r\n * @remarks\r\n * Custom tokens are used to integrate Firebase Auth with existing auth systems, and must\r\n * be generated by an auth backend using the\r\n * {@link https://firebase.google.com/docs/reference/admin/node/admin.auth.Auth#createcustomtoken | createCustomToken}\r\n * method in the {@link https://firebase.google.com/docs/auth/admin | Admin SDK} .\r\n *\r\n * Fails with an error if the token is invalid, expired, or not accepted by the Firebase Auth service.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param customToken - The custom token to sign in with.\r\n *\r\n * @public\r\n */\n\n\nasync function signInWithCustomToken(auth, customToken) {\n  const authInternal = _castAuth(auth);\n\n  const response = await signInWithCustomToken$1(authInternal, {\n    token: customToken,\n    returnSecureToken: true\n  });\n  const cred = await UserCredentialImpl._fromIdTokenResponse(authInternal, \"signIn\"\n  /* SIGN_IN */\n  , response);\n  await authInternal._updateCurrentUser(cred.user);\n  return cred;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass MultiFactorInfoImpl {\n  constructor(factorId, response) {\n    this.factorId = factorId;\n    this.uid = response.mfaEnrollmentId;\n    this.enrollmentTime = new Date(response.enrolledAt).toUTCString();\n    this.displayName = response.displayName;\n  }\n\n  static _fromServerResponse(auth, enrollment) {\n    if ('phoneInfo' in enrollment) {\n      return PhoneMultiFactorInfoImpl._fromServerResponse(auth, enrollment);\n    }\n\n    return _fail(auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n  }\n\n}\n\nclass PhoneMultiFactorInfoImpl extends MultiFactorInfoImpl {\n  constructor(response) {\n    super(\"phone\"\n    /* PHONE */\n    , response);\n    this.phoneNumber = response.phoneInfo;\n  }\n\n  static _fromServerResponse(_auth, enrollment) {\n    return new PhoneMultiFactorInfoImpl(enrollment);\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _setActionCodeSettingsOnRequest(auth, request, actionCodeSettings) {\n  var _a;\n\n  _assert(((_a = actionCodeSettings.url) === null || _a === void 0 ? void 0 : _a.length) > 0, auth, \"invalid-continue-uri\"\n  /* INVALID_CONTINUE_URI */\n  );\n\n  _assert(typeof actionCodeSettings.dynamicLinkDomain === 'undefined' || actionCodeSettings.dynamicLinkDomain.length > 0, auth, \"invalid-dynamic-link-domain\"\n  /* INVALID_DYNAMIC_LINK_DOMAIN */\n  );\n\n  request.continueUrl = actionCodeSettings.url;\n  request.dynamicLinkDomain = actionCodeSettings.dynamicLinkDomain;\n  request.canHandleCodeInApp = actionCodeSettings.handleCodeInApp;\n\n  if (actionCodeSettings.iOS) {\n    _assert(actionCodeSettings.iOS.bundleId.length > 0, auth, \"missing-ios-bundle-id\"\n    /* MISSING_IOS_BUNDLE_ID */\n    );\n\n    request.iOSBundleId = actionCodeSettings.iOS.bundleId;\n  }\n\n  if (actionCodeSettings.android) {\n    _assert(actionCodeSettings.android.packageName.length > 0, auth, \"missing-android-pkg-name\"\n    /* MISSING_ANDROID_PACKAGE_NAME */\n    );\n\n    request.androidInstallApp = actionCodeSettings.android.installApp;\n    request.androidMinimumVersionCode = actionCodeSettings.android.minimumVersion;\n    request.androidPackageName = actionCodeSettings.android.packageName;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Sends a password reset email to the given email address.\r\n *\r\n * @remarks\r\n * To complete the password reset, call {@link confirmPasswordReset} with the code supplied in\r\n * the email sent to the user, along with the new password specified by the user.\r\n *\r\n * @example\r\n * ```javascript\r\n * const actionCodeSettings = {\r\n *   url: 'https://www.example.com/?email=user@example.com',\r\n *   iOS: {\r\n *      bundleId: 'com.example.ios'\r\n *   },\r\n *   android: {\r\n *     packageName: 'com.example.android',\r\n *     installApp: true,\r\n *     minimumVersion: '12'\r\n *   },\r\n *   handleCodeInApp: true\r\n * };\r\n * await sendPasswordResetEmail(auth, 'user@example.com', actionCodeSettings);\r\n * // Obtain code from user.\r\n * await confirmPasswordReset('user@example.com', code);\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param email - The user's email address.\r\n * @param actionCodeSettings - The {@link ActionCodeSettings}.\r\n *\r\n * @public\r\n */\n\n\nasync function sendPasswordResetEmail(auth, email, actionCodeSettings) {\n  const authModular = (0, _util.getModularInstance)(auth);\n  const request = {\n    requestType: \"PASSWORD_RESET\"\n    /* PASSWORD_RESET */\n    ,\n    email\n  };\n\n  if (actionCodeSettings) {\n    _setActionCodeSettingsOnRequest(authModular, request, actionCodeSettings);\n  }\n\n  await sendPasswordResetEmail$1(authModular, request);\n}\n/**\r\n * Completes the password reset process, given a confirmation code and new password.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param oobCode - A confirmation code sent to the user.\r\n * @param newPassword - The new password.\r\n *\r\n * @public\r\n */\n\n\nasync function confirmPasswordReset(auth, oobCode, newPassword) {\n  await resetPassword((0, _util.getModularInstance)(auth), {\n    oobCode,\n    newPassword\n  }); // Do not return the email.\n}\n/**\r\n * Applies a verification code sent to the user by email or other out-of-band mechanism.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param oobCode - A verification code sent to the user.\r\n *\r\n * @public\r\n */\n\n\nasync function applyActionCode(auth, oobCode) {\n  await applyActionCode$1((0, _util.getModularInstance)(auth), {\n    oobCode\n  });\n}\n/**\r\n * Checks a verification code sent to the user by email or other out-of-band mechanism.\r\n *\r\n * @returns metadata about the code.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param oobCode - A verification code sent to the user.\r\n *\r\n * @public\r\n */\n\n\nasync function checkActionCode(auth, oobCode) {\n  const authModular = (0, _util.getModularInstance)(auth);\n  const response = await resetPassword(authModular, {\n    oobCode\n  }); // Email could be empty only if the request type is EMAIL_SIGNIN or\n  // VERIFY_AND_CHANGE_EMAIL.\n  // New email should not be empty if the request type is\n  // VERIFY_AND_CHANGE_EMAIL.\n  // Multi-factor info could not be empty if the request type is\n  // REVERT_SECOND_FACTOR_ADDITION.\n\n  const operation = response.requestType;\n\n  _assert(operation, authModular, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  switch (operation) {\n    case \"EMAIL_SIGNIN\"\n    /* EMAIL_SIGNIN */\n    :\n      break;\n\n    case \"VERIFY_AND_CHANGE_EMAIL\"\n    /* VERIFY_AND_CHANGE_EMAIL */\n    :\n      _assert(response.newEmail, authModular, \"internal-error\"\n      /* INTERNAL_ERROR */\n      );\n\n      break;\n\n    case \"REVERT_SECOND_FACTOR_ADDITION\"\n    /* REVERT_SECOND_FACTOR_ADDITION */\n    :\n      _assert(response.mfaInfo, authModular, \"internal-error\"\n      /* INTERNAL_ERROR */\n      );\n\n    // fall through\n\n    default:\n      _assert(response.email, authModular, \"internal-error\"\n      /* INTERNAL_ERROR */\n      );\n\n  } // The multi-factor info for revert second factor addition\n\n\n  let multiFactorInfo = null;\n\n  if (response.mfaInfo) {\n    multiFactorInfo = MultiFactorInfoImpl._fromServerResponse(_castAuth(authModular), response.mfaInfo);\n  }\n\n  return {\n    data: {\n      email: (response.requestType === \"VERIFY_AND_CHANGE_EMAIL\"\n      /* VERIFY_AND_CHANGE_EMAIL */\n      ? response.newEmail : response.email) || null,\n      previousEmail: (response.requestType === \"VERIFY_AND_CHANGE_EMAIL\"\n      /* VERIFY_AND_CHANGE_EMAIL */\n      ? response.email : response.newEmail) || null,\n      multiFactorInfo\n    },\n    operation\n  };\n}\n/**\r\n * Checks a password reset code sent to the user by email or other out-of-band mechanism.\r\n *\r\n * @returns the user's email address if valid.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param code - A verification code sent to the user.\r\n *\r\n * @public\r\n */\n\n\nasync function verifyPasswordResetCode(auth, code) {\n  const {\n    data\n  } = await checkActionCode((0, _util.getModularInstance)(auth), code); // Email should always be present since a code was sent to it\n\n  return data.email;\n}\n/**\r\n * Creates a new user account associated with the specified email address and password.\r\n *\r\n * @remarks\r\n * On successful creation of the user account, this user will also be signed in to your application.\r\n *\r\n * User account creation can fail if the account already exists or the password is invalid.\r\n *\r\n * Note: The email address acts as a unique identifier for the user and enables an email-based\r\n * password reset. This function will create a new user account and set the initial user password.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param email - The user's email address.\r\n * @param password - The user's chosen password.\r\n *\r\n * @public\r\n */\n\n\nasync function createUserWithEmailAndPassword(auth, email, password) {\n  const authInternal = _castAuth(auth);\n\n  const response = await signUp(authInternal, {\n    returnSecureToken: true,\n    email,\n    password\n  });\n  const userCredential = await UserCredentialImpl._fromIdTokenResponse(authInternal, \"signIn\"\n  /* SIGN_IN */\n  , response);\n  await authInternal._updateCurrentUser(userCredential.user);\n  return userCredential;\n}\n/**\r\n * Asynchronously signs in using an email and password.\r\n *\r\n * @remarks\r\n * Fails with an error if the email address and password do not match.\r\n *\r\n * Note: The user's password is NOT the password used to access the user's email account. The\r\n * email address serves as a unique identifier for the user, and the password is used to access\r\n * the user's account in your Firebase project. See also: {@link createUserWithEmailAndPassword}.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param email - The users email address.\r\n * @param password - The users password.\r\n *\r\n * @public\r\n */\n\n\nfunction signInWithEmailAndPassword(auth, email, password) {\n  return signInWithCredential((0, _util.getModularInstance)(auth), EmailAuthProvider.credential(email, password));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Sends a sign-in email link to the user with the specified email.\r\n *\r\n * @remarks\r\n * The sign-in operation has to always be completed in the app unlike other out of band email\r\n * actions (password reset and email verifications). This is because, at the end of the flow,\r\n * the user is expected to be signed in and their Auth state persisted within the app.\r\n *\r\n * To complete sign in with the email link, call {@link signInWithEmailLink} with the email\r\n * address and the email link supplied in the email sent to the user.\r\n *\r\n * @example\r\n * ```javascript\r\n * const actionCodeSettings = {\r\n *   url: 'https://www.example.com/?email=user@example.com',\r\n *   iOS: {\r\n *      bundleId: 'com.example.ios'\r\n *   },\r\n *   android: {\r\n *     packageName: 'com.example.android',\r\n *     installApp: true,\r\n *     minimumVersion: '12'\r\n *   },\r\n *   handleCodeInApp: true\r\n * };\r\n * await sendSignInLinkToEmail(auth, 'user@example.com', actionCodeSettings);\r\n * // Obtain emailLink from the user.\r\n * if(isSignInWithEmailLink(auth, emailLink)) {\r\n *   await signInWithEmailLink(auth, 'user@example.com', emailLink);\r\n * }\r\n * ```\r\n *\r\n * @param authInternal - The {@link Auth} instance.\r\n * @param email - The user's email address.\r\n * @param actionCodeSettings - The {@link ActionCodeSettings}.\r\n *\r\n * @public\r\n */\n\n\nasync function sendSignInLinkToEmail(auth, email, actionCodeSettings) {\n  const authModular = (0, _util.getModularInstance)(auth);\n  const request = {\n    requestType: \"EMAIL_SIGNIN\"\n    /* EMAIL_SIGNIN */\n    ,\n    email\n  };\n\n  _assert(actionCodeSettings.handleCodeInApp, authModular, \"argument-error\"\n  /* ARGUMENT_ERROR */\n  );\n\n  if (actionCodeSettings) {\n    _setActionCodeSettingsOnRequest(authModular, request, actionCodeSettings);\n  }\n\n  await sendSignInLinkToEmail$1(authModular, request);\n}\n/**\r\n * Checks if an incoming link is a sign-in with email link suitable for {@link signInWithEmailLink}.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param emailLink - The link sent to the user's email address.\r\n *\r\n * @public\r\n */\n\n\nfunction isSignInWithEmailLink(auth, emailLink) {\n  const actionCodeUrl = ActionCodeURL.parseLink(emailLink);\n  return (actionCodeUrl === null || actionCodeUrl === void 0 ? void 0 : actionCodeUrl.operation) === \"EMAIL_SIGNIN\"\n  /* EMAIL_SIGNIN */\n  ;\n}\n/**\r\n * Asynchronously signs in using an email and sign-in email link.\r\n *\r\n * @remarks\r\n * If no link is passed, the link is inferred from the current URL.\r\n *\r\n * Fails with an error if the email address is invalid or OTP in email link expires.\r\n *\r\n * Note: Confirm the link is a sign-in email link before calling this method firebase.auth.Auth.isSignInWithEmailLink.\r\n *\r\n * @example\r\n * ```javascript\r\n * const actionCodeSettings = {\r\n *   url: 'https://www.example.com/?email=user@example.com',\r\n *   iOS: {\r\n *      bundleId: 'com.example.ios'\r\n *   },\r\n *   android: {\r\n *     packageName: 'com.example.android',\r\n *     installApp: true,\r\n *     minimumVersion: '12'\r\n *   },\r\n *   handleCodeInApp: true\r\n * };\r\n * await sendSignInLinkToEmail(auth, 'user@example.com', actionCodeSettings);\r\n * // Obtain emailLink from the user.\r\n * if(isSignInWithEmailLink(auth, emailLink)) {\r\n *   await signInWithEmailLink(auth, 'user@example.com', emailLink);\r\n * }\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param email - The user's email address.\r\n * @param emailLink - The link sent to the user's email address.\r\n *\r\n * @public\r\n */\n\n\nasync function signInWithEmailLink(auth, email, emailLink) {\n  const authModular = (0, _util.getModularInstance)(auth);\n  const credential = EmailAuthProvider.credentialWithLink(email, emailLink || _getCurrentUrl()); // Check if the tenant ID in the email link matches the tenant ID on Auth\n  // instance.\n\n  _assert(credential._tenantId === (authModular.tenantId || null), authModular, \"tenant-id-mismatch\"\n  /* TENANT_ID_MISMATCH */\n  );\n\n  return signInWithCredential(authModular, credential);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function createAuthUri(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:createAuthUri\"\n  /* CREATE_AUTH_URI */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Gets the list of possible sign in methods for the given email address.\r\n *\r\n * @remarks\r\n * This is useful to differentiate methods of sign-in for the same provider, eg.\r\n * {@link EmailAuthProvider} which has 2 methods of sign-in,\r\n * {@link SignInMethod}.EMAIL_PASSWORD and\r\n * {@link SignInMethod}.EMAIL_LINK.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param email - The user's email address.\r\n *\r\n * @public\r\n */\n\n\nasync function fetchSignInMethodsForEmail(auth, email) {\n  // createAuthUri returns an error if continue URI is not http or https.\n  // For environments like Cordova, Chrome extensions, native frameworks, file\n  // systems, etc, use http://localhost as continue URL.\n  const continueUri = _isHttpOrHttps() ? _getCurrentUrl() : 'http://localhost';\n  const request = {\n    identifier: email,\n    continueUri\n  };\n  const {\n    signinMethods\n  } = await createAuthUri((0, _util.getModularInstance)(auth), request);\n  return signinMethods || [];\n}\n/**\r\n * Sends a verification email to a user.\r\n *\r\n * @remarks\r\n * The verification process is completed by calling {@link applyActionCode}.\r\n *\r\n * @example\r\n * ```javascript\r\n * const actionCodeSettings = {\r\n *   url: 'https://www.example.com/?email=user@example.com',\r\n *   iOS: {\r\n *      bundleId: 'com.example.ios'\r\n *   },\r\n *   android: {\r\n *     packageName: 'com.example.android',\r\n *     installApp: true,\r\n *     minimumVersion: '12'\r\n *   },\r\n *   handleCodeInApp: true\r\n * };\r\n * await sendEmailVerification(user, actionCodeSettings);\r\n * // Obtain code from the user.\r\n * await applyActionCode(auth, code);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param actionCodeSettings - The {@link ActionCodeSettings}.\r\n *\r\n * @public\r\n */\n\n\nasync function sendEmailVerification(user, actionCodeSettings) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  const idToken = await user.getIdToken();\n  const request = {\n    requestType: \"VERIFY_EMAIL\"\n    /* VERIFY_EMAIL */\n    ,\n    idToken\n  };\n\n  if (actionCodeSettings) {\n    _setActionCodeSettingsOnRequest(userInternal.auth, request, actionCodeSettings);\n  }\n\n  const {\n    email\n  } = await sendEmailVerification$1(userInternal.auth, request);\n\n  if (email !== user.email) {\n    await user.reload();\n  }\n}\n/**\r\n * Sends a verification email to a new email address.\r\n *\r\n * @remarks\r\n * The user's email will be updated to the new one after being verified.\r\n *\r\n * If you have a custom email action handler, you can complete the verification process by calling\r\n * {@link applyActionCode}.\r\n *\r\n * @example\r\n * ```javascript\r\n * const actionCodeSettings = {\r\n *   url: 'https://www.example.com/?email=user@example.com',\r\n *   iOS: {\r\n *      bundleId: 'com.example.ios'\r\n *   },\r\n *   android: {\r\n *     packageName: 'com.example.android',\r\n *     installApp: true,\r\n *     minimumVersion: '12'\r\n *   },\r\n *   handleCodeInApp: true\r\n * };\r\n * await verifyBeforeUpdateEmail(user, 'newemail@example.com', actionCodeSettings);\r\n * // Obtain code from the user.\r\n * await applyActionCode(auth, code);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param newEmail - The new email address to be verified before update.\r\n * @param actionCodeSettings - The {@link ActionCodeSettings}.\r\n *\r\n * @public\r\n */\n\n\nasync function verifyBeforeUpdateEmail(user, newEmail, actionCodeSettings) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  const idToken = await user.getIdToken();\n  const request = {\n    requestType: \"VERIFY_AND_CHANGE_EMAIL\"\n    /* VERIFY_AND_CHANGE_EMAIL */\n    ,\n    idToken,\n    newEmail\n  };\n\n  if (actionCodeSettings) {\n    _setActionCodeSettingsOnRequest(userInternal.auth, request, actionCodeSettings);\n  }\n\n  const {\n    email\n  } = await verifyAndChangeEmail(userInternal.auth, request);\n\n  if (email !== user.email) {\n    // If the local copy of the email on user is outdated, reload the\n    // user.\n    await user.reload();\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function updateProfile$1(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v1/accounts:update\"\n  /* SET_ACCOUNT_INFO */\n  , request);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Updates a user's profile data.\r\n *\r\n * @param user - The user.\r\n * @param profile - The profile's `displayName` and `photoURL` to update.\r\n *\r\n * @public\r\n */\n\n\nasync function updateProfile(user, {\n  displayName,\n  photoURL: photoUrl\n}) {\n  if (displayName === undefined && photoUrl === undefined) {\n    return;\n  }\n\n  const userInternal = (0, _util.getModularInstance)(user);\n  const idToken = await userInternal.getIdToken();\n  const profileRequest = {\n    idToken,\n    displayName,\n    photoUrl,\n    returnSecureToken: true\n  };\n  const response = await _logoutIfInvalidated(userInternal, updateProfile$1(userInternal.auth, profileRequest));\n  userInternal.displayName = response.displayName || null;\n  userInternal.photoURL = response.photoUrl || null; // Update the password provider as well\n\n  const passwordProvider = userInternal.providerData.find(({\n    providerId\n  }) => providerId === \"password\"\n  /* PASSWORD */\n  );\n\n  if (passwordProvider) {\n    passwordProvider.displayName = userInternal.displayName;\n    passwordProvider.photoURL = userInternal.photoURL;\n  }\n\n  await userInternal._updateTokensIfNecessary(response);\n}\n/**\r\n * Updates the user's email address.\r\n *\r\n * @remarks\r\n * An email will be sent to the original email address (if it was set) that allows to revoke the\r\n * email address change, in order to protect them from account hijacking.\r\n *\r\n * Important: this is a security sensitive operation that requires the user to have recently signed\r\n * in. If this requirement isn't met, ask the user to authenticate again and then call\r\n * {@link reauthenticateWithCredential}.\r\n *\r\n * @param user - The user.\r\n * @param newEmail - The new email address.\r\n *\r\n * @public\r\n */\n\n\nfunction updateEmail(user, newEmail) {\n  return updateEmailOrPassword((0, _util.getModularInstance)(user), newEmail, null);\n}\n/**\r\n * Updates the user's password.\r\n *\r\n * @remarks\r\n * Important: this is a security sensitive operation that requires the user to have recently signed\r\n * in. If this requirement isn't met, ask the user to authenticate again and then call\r\n * {@link reauthenticateWithCredential}.\r\n *\r\n * @param user - The user.\r\n * @param newPassword - The new password.\r\n *\r\n * @public\r\n */\n\n\nfunction updatePassword(user, newPassword) {\n  return updateEmailOrPassword((0, _util.getModularInstance)(user), null, newPassword);\n}\n\nasync function updateEmailOrPassword(user, email, password) {\n  const {\n    auth\n  } = user;\n  const idToken = await user.getIdToken();\n  const request = {\n    idToken,\n    returnSecureToken: true\n  };\n\n  if (email) {\n    request.email = email;\n  }\n\n  if (password) {\n    request.password = password;\n  }\n\n  const response = await _logoutIfInvalidated(user, updateEmailPassword(auth, request));\n  await user._updateTokensIfNecessary(response,\n  /* reload */\n  true);\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Parse the `AdditionalUserInfo` from the ID token response.\r\n *\r\n */\n\n\nfunction _fromIdTokenResponse(idTokenResponse) {\n  var _a, _b;\n\n  if (!idTokenResponse) {\n    return null;\n  }\n\n  const {\n    providerId\n  } = idTokenResponse;\n  const profile = idTokenResponse.rawUserInfo ? JSON.parse(idTokenResponse.rawUserInfo) : {};\n  const isNewUser = idTokenResponse.isNewUser || idTokenResponse.kind === \"identitytoolkit#SignupNewUserResponse\"\n  /* SignupNewUser */\n  ;\n\n  if (!providerId && (idTokenResponse === null || idTokenResponse === void 0 ? void 0 : idTokenResponse.idToken)) {\n    const signInProvider = (_b = (_a = _parseToken(idTokenResponse.idToken)) === null || _a === void 0 ? void 0 : _a.firebase) === null || _b === void 0 ? void 0 : _b['sign_in_provider'];\n\n    if (signInProvider) {\n      const filteredProviderId = signInProvider !== \"anonymous\"\n      /* ANONYMOUS */\n      && signInProvider !== \"custom\"\n      /* CUSTOM */\n      ? signInProvider : null; // Uses generic class in accordance with the legacy SDK.\n\n      return new GenericAdditionalUserInfo(isNewUser, filteredProviderId);\n    }\n  }\n\n  if (!providerId) {\n    return null;\n  }\n\n  switch (providerId) {\n    case \"facebook.com\"\n    /* FACEBOOK */\n    :\n      return new FacebookAdditionalUserInfo(isNewUser, profile);\n\n    case \"github.com\"\n    /* GITHUB */\n    :\n      return new GithubAdditionalUserInfo(isNewUser, profile);\n\n    case \"google.com\"\n    /* GOOGLE */\n    :\n      return new GoogleAdditionalUserInfo(isNewUser, profile);\n\n    case \"twitter.com\"\n    /* TWITTER */\n    :\n      return new TwitterAdditionalUserInfo(isNewUser, profile, idTokenResponse.screenName || null);\n\n    case \"custom\"\n    /* CUSTOM */\n    :\n    case \"anonymous\"\n    /* ANONYMOUS */\n    :\n      return new GenericAdditionalUserInfo(isNewUser, null);\n\n    default:\n      return new GenericAdditionalUserInfo(isNewUser, providerId, profile);\n  }\n}\n\nclass GenericAdditionalUserInfo {\n  constructor(isNewUser, providerId, profile = {}) {\n    this.isNewUser = isNewUser;\n    this.providerId = providerId;\n    this.profile = profile;\n  }\n\n}\n\nclass FederatedAdditionalUserInfoWithUsername extends GenericAdditionalUserInfo {\n  constructor(isNewUser, providerId, profile, username) {\n    super(isNewUser, providerId, profile);\n    this.username = username;\n  }\n\n}\n\nclass FacebookAdditionalUserInfo extends GenericAdditionalUserInfo {\n  constructor(isNewUser, profile) {\n    super(isNewUser, \"facebook.com\"\n    /* FACEBOOK */\n    , profile);\n  }\n\n}\n\nclass GithubAdditionalUserInfo extends FederatedAdditionalUserInfoWithUsername {\n  constructor(isNewUser, profile) {\n    super(isNewUser, \"github.com\"\n    /* GITHUB */\n    , profile, typeof (profile === null || profile === void 0 ? void 0 : profile.login) === 'string' ? profile === null || profile === void 0 ? void 0 : profile.login : null);\n  }\n\n}\n\nclass GoogleAdditionalUserInfo extends GenericAdditionalUserInfo {\n  constructor(isNewUser, profile) {\n    super(isNewUser, \"google.com\"\n    /* GOOGLE */\n    , profile);\n  }\n\n}\n\nclass TwitterAdditionalUserInfo extends FederatedAdditionalUserInfoWithUsername {\n  constructor(isNewUser, profile, screenName) {\n    super(isNewUser, \"twitter.com\"\n    /* TWITTER */\n    , profile, screenName);\n  }\n\n}\n/**\r\n * Extracts provider specific {@link AdditionalUserInfo} for the given credential.\r\n *\r\n * @param userCredential - The user credential.\r\n *\r\n * @public\r\n */\n\n\nfunction getAdditionalUserInfo(userCredential) {\n  const {\n    user,\n    _tokenResponse\n  } = userCredential;\n\n  if (user.isAnonymous && !_tokenResponse) {\n    // Handle the special case where signInAnonymously() gets called twice.\n    // No network call is made so there's nothing to actually fill this in\n    return {\n      providerId: null,\n      isNewUser: false,\n      profile: null\n    };\n  }\n\n  return _fromIdTokenResponse(_tokenResponse);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// Non-optional auth methods.\n\n/**\r\n * Changes the type of persistence on the {@link Auth} instance for the currently saved\r\n * `Auth` session and applies this type of persistence for future sign-in requests, including\r\n * sign-in with redirect requests.\r\n *\r\n * @remarks\r\n * This makes it easy for a user signing in to specify whether their session should be\r\n * remembered or not. It also makes it easier to never persist the `Auth` state for applications\r\n * that are shared by other users or have sensitive data.\r\n *\r\n * @example\r\n * ```javascript\r\n * setPersistence(auth, browserSessionPersistence);\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param persistence - The {@link Persistence} to use.\r\n * @returns A `Promise` that resolves once the persistence change has completed\r\n *\r\n * @public\r\n */\n\n\nfunction setPersistence(auth, persistence) {\n  return (0, _util.getModularInstance)(auth).setPersistence(persistence);\n}\n/**\r\n * Adds an observer for changes to the signed-in user's ID token, which includes sign-in,\r\n * sign-out, and token refresh events.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param nextOrObserver - callback triggered on change.\r\n * @param error - callback triggered on error.\r\n * @param completed - callback triggered when observer is removed.\r\n *\r\n * @public\r\n */\n\n\nfunction onIdTokenChanged(auth, nextOrObserver, error, completed) {\n  return (0, _util.getModularInstance)(auth).onIdTokenChanged(nextOrObserver, error, completed);\n}\n/**\r\n * Adds an observer for changes to the user's sign-in state.\r\n *\r\n * @remarks\r\n * To keep the old behavior, see {@link onIdTokenChanged}.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param nextOrObserver - callback triggered on change.\r\n * @param error - callback triggered on error.\r\n * @param completed - callback triggered when observer is removed.\r\n *\r\n * @public\r\n */\n\n\nfunction onAuthStateChanged(auth, nextOrObserver, error, completed) {\n  return (0, _util.getModularInstance)(auth).onAuthStateChanged(nextOrObserver, error, completed);\n}\n/**\r\n * Sets the current language to the default device/browser preference.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n *\r\n * @public\r\n */\n\n\nfunction useDeviceLanguage(auth) {\n  (0, _util.getModularInstance)(auth).useDeviceLanguage();\n}\n/**\r\n * Asynchronously sets the provided user as {@link Auth.currentUser} on the\r\n * {@link Auth} instance.\r\n *\r\n * @remarks\r\n * A new instance copy of the user provided will be made and set as currentUser.\r\n *\r\n * This will trigger {@link onAuthStateChanged} and {@link onIdTokenChanged} listeners\r\n * like other sign in methods.\r\n *\r\n * The operation fails with an error if the user to be updated belongs to a different Firebase\r\n * project.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param user - The new {@link User}.\r\n *\r\n * @public\r\n */\n\n\nfunction updateCurrentUser(auth, user) {\n  return (0, _util.getModularInstance)(auth).updateCurrentUser(user);\n}\n/**\r\n * Signs out the current user.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n *\r\n * @public\r\n */\n\n\nfunction signOut(auth) {\n  return (0, _util.getModularInstance)(auth).signOut();\n}\n/**\r\n * Deletes and signs out the user.\r\n *\r\n * @remarks\r\n * Important: this is a security-sensitive operation that requires the user to have recently\r\n * signed in. If this requirement isn't met, ask the user to authenticate again and then call\r\n * {@link reauthenticateWithCredential}.\r\n *\r\n * @param user - The user.\r\n *\r\n * @public\r\n */\n\n\nasync function deleteUser(user) {\n  return (0, _util.getModularInstance)(user).delete();\n}\n\nclass MultiFactorSessionImpl {\n  constructor(type, credential) {\n    this.type = type;\n    this.credential = credential;\n  }\n\n  static _fromIdtoken(idToken) {\n    return new MultiFactorSessionImpl(\"enroll\"\n    /* ENROLL */\n    , idToken);\n  }\n\n  static _fromMfaPendingCredential(mfaPendingCredential) {\n    return new MultiFactorSessionImpl(\"signin\"\n    /* SIGN_IN */\n    , mfaPendingCredential);\n  }\n\n  toJSON() {\n    const key = this.type === \"enroll\"\n    /* ENROLL */\n    ? 'idToken' : 'pendingCredential';\n    return {\n      multiFactorSession: {\n        [key]: this.credential\n      }\n    };\n  }\n\n  static fromJSON(obj) {\n    var _a, _b;\n\n    if (obj === null || obj === void 0 ? void 0 : obj.multiFactorSession) {\n      if ((_a = obj.multiFactorSession) === null || _a === void 0 ? void 0 : _a.pendingCredential) {\n        return MultiFactorSessionImpl._fromMfaPendingCredential(obj.multiFactorSession.pendingCredential);\n      } else if ((_b = obj.multiFactorSession) === null || _b === void 0 ? void 0 : _b.idToken) {\n        return MultiFactorSessionImpl._fromIdtoken(obj.multiFactorSession.idToken);\n      }\n    }\n\n    return null;\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass MultiFactorResolverImpl {\n  constructor(session, hints, signInResolver) {\n    this.session = session;\n    this.hints = hints;\n    this.signInResolver = signInResolver;\n  }\n  /** @internal */\n\n\n  static _fromError(authExtern, error) {\n    const auth = _castAuth(authExtern);\n\n    const serverResponse = error.customData._serverResponse;\n    const hints = (serverResponse.mfaInfo || []).map(enrollment => MultiFactorInfoImpl._fromServerResponse(auth, enrollment));\n\n    _assert(serverResponse.mfaPendingCredential, auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    const session = MultiFactorSessionImpl._fromMfaPendingCredential(serverResponse.mfaPendingCredential);\n\n    return new MultiFactorResolverImpl(session, hints, async assertion => {\n      const mfaResponse = await assertion._process(auth, session); // Clear out the unneeded fields from the old login response\n\n      delete serverResponse.mfaInfo;\n      delete serverResponse.mfaPendingCredential; // Use in the new token & refresh token in the old response\n\n      const idTokenResponse = Object.assign(Object.assign({}, serverResponse), {\n        idToken: mfaResponse.idToken,\n        refreshToken: mfaResponse.refreshToken\n      }); // TODO: we should collapse this switch statement into UserCredentialImpl._forOperation and have it support the SIGN_IN case\n\n      switch (error.operationType) {\n        case \"signIn\"\n        /* SIGN_IN */\n        :\n          const userCredential = await UserCredentialImpl._fromIdTokenResponse(auth, error.operationType, idTokenResponse);\n          await auth._updateCurrentUser(userCredential.user);\n          return userCredential;\n\n        case \"reauthenticate\"\n        /* REAUTHENTICATE */\n        :\n          _assert(error.user, auth, \"internal-error\"\n          /* INTERNAL_ERROR */\n          );\n\n          return UserCredentialImpl._forOperation(error.user, error.operationType, idTokenResponse);\n\n        default:\n          _fail(auth, \"internal-error\"\n          /* INTERNAL_ERROR */\n          );\n\n      }\n    });\n  }\n\n  async resolveSignIn(assertionExtern) {\n    const assertion = assertionExtern;\n    return this.signInResolver(assertion);\n  }\n\n}\n/**\r\n * Provides a {@link MultiFactorResolver} suitable for completion of a\r\n * multi-factor flow.\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param error - The {@link MultiFactorError} raised during a sign-in, or\r\n * reauthentication operation.\r\n *\r\n * @public\r\n */\n\n\nfunction getMultiFactorResolver(auth, error) {\n  var _a;\n\n  const authModular = (0, _util.getModularInstance)(auth);\n  const errorInternal = error;\n\n  _assert(error.customData.operationType, authModular, \"argument-error\"\n  /* ARGUMENT_ERROR */\n  );\n\n  _assert((_a = errorInternal.customData._serverResponse) === null || _a === void 0 ? void 0 : _a.mfaPendingCredential, authModular, \"argument-error\"\n  /* ARGUMENT_ERROR */\n  );\n\n  return MultiFactorResolverImpl._fromError(authModular, errorInternal);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction startEnrollPhoneMfa(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v2/accounts/mfaEnrollment:start\"\n  /* START_PHONE_MFA_ENROLLMENT */\n  , _addTidIfNecessary(auth, request));\n}\n\nfunction finalizeEnrollPhoneMfa(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v2/accounts/mfaEnrollment:finalize\"\n  /* FINALIZE_PHONE_MFA_ENROLLMENT */\n  , _addTidIfNecessary(auth, request));\n}\n\nfunction withdrawMfa(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v2/accounts/mfaEnrollment:withdraw\"\n  /* WITHDRAW_MFA */\n  , _addTidIfNecessary(auth, request));\n}\n\nclass MultiFactorUserImpl {\n  constructor(user) {\n    this.user = user;\n    this.enrolledFactors = [];\n\n    user._onReload(userInfo => {\n      if (userInfo.mfaInfo) {\n        this.enrolledFactors = userInfo.mfaInfo.map(enrollment => MultiFactorInfoImpl._fromServerResponse(user.auth, enrollment));\n      }\n    });\n  }\n\n  static _fromUser(user) {\n    return new MultiFactorUserImpl(user);\n  }\n\n  async getSession() {\n    return MultiFactorSessionImpl._fromIdtoken(await this.user.getIdToken());\n  }\n\n  async enroll(assertionExtern, displayName) {\n    const assertion = assertionExtern;\n    const session = await this.getSession();\n    const finalizeMfaResponse = await _logoutIfInvalidated(this.user, assertion._process(this.user.auth, session, displayName)); // New tokens will be issued after enrollment of the new second factors.\n    // They need to be updated on the user.\n\n    await this.user._updateTokensIfNecessary(finalizeMfaResponse); // The user needs to be reloaded to get the new multi-factor information\n    // from server. USER_RELOADED event will be triggered and `enrolledFactors`\n    // will be updated.\n\n    return this.user.reload();\n  }\n\n  async unenroll(infoOrUid) {\n    const mfaEnrollmentId = typeof infoOrUid === 'string' ? infoOrUid : infoOrUid.uid;\n    const idToken = await this.user.getIdToken();\n    const idTokenResponse = await _logoutIfInvalidated(this.user, withdrawMfa(this.user.auth, {\n      idToken,\n      mfaEnrollmentId\n    })); // Remove the second factor from the user's list.\n\n    this.enrolledFactors = this.enrolledFactors.filter(({\n      uid\n    }) => uid !== mfaEnrollmentId); // Depending on whether the backend decided to revoke the user's session,\n    // the tokenResponse may be empty. If the tokens were not updated (and they\n    // are now invalid), reloading the user will discover this and invalidate\n    // the user's state accordingly.\n\n    await this.user._updateTokensIfNecessary(idTokenResponse);\n\n    try {\n      await this.user.reload();\n    } catch (e) {\n      if (e.code !== `auth/${\"user-token-expired\"\n      /* TOKEN_EXPIRED */\n      }`) {\n        throw e;\n      }\n    }\n  }\n\n}\n\nconst multiFactorUserCache = new WeakMap();\n/**\r\n * The {@link MultiFactorUser} corresponding to the user.\r\n *\r\n * @remarks\r\n * This is used to access all multi-factor properties and operations related to the user.\r\n *\r\n * @param user - The user.\r\n *\r\n * @public\r\n */\n\nfunction multiFactor(user) {\n  const userModular = (0, _util.getModularInstance)(user);\n\n  if (!multiFactorUserCache.has(userModular)) {\n    multiFactorUserCache.set(userModular, MultiFactorUserImpl._fromUser(userModular));\n  }\n\n  return multiFactorUserCache.get(userModular);\n}\n\nconst STORAGE_AVAILABLE_KEY = '__sak';\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// There are two different browser persistence types: local and session.\n// Both have the same implementation but use a different underlying storage\n// object.\n\nclass BrowserPersistenceClass {\n  constructor(storageRetriever, type) {\n    this.storageRetriever = storageRetriever;\n    this.type = type;\n  }\n\n  _isAvailable() {\n    try {\n      if (!this.storage) {\n        return Promise.resolve(false);\n      }\n\n      this.storage.setItem(STORAGE_AVAILABLE_KEY, '1');\n      this.storage.removeItem(STORAGE_AVAILABLE_KEY);\n      return Promise.resolve(true);\n    } catch (_a) {\n      return Promise.resolve(false);\n    }\n  }\n\n  _set(key, value) {\n    this.storage.setItem(key, JSON.stringify(value));\n    return Promise.resolve();\n  }\n\n  _get(key) {\n    const json = this.storage.getItem(key);\n    return Promise.resolve(json ? JSON.parse(json) : null);\n  }\n\n  _remove(key) {\n    this.storage.removeItem(key);\n    return Promise.resolve();\n  }\n\n  get storage() {\n    return this.storageRetriever();\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _iframeCannotSyncWebStorage() {\n  const ua = (0, _util.getUA)();\n  return _isSafari(ua) || _isIOS(ua);\n} // The polling period in case events are not supported\n\n\nconst _POLLING_INTERVAL_MS$1 = 1000; // The IE 10 localStorage cross tab synchronization delay in milliseconds\n\nconst IE10_LOCAL_STORAGE_SYNC_DELAY = 10;\n\nclass BrowserLocalPersistence extends BrowserPersistenceClass {\n  constructor() {\n    super(() => window.localStorage, \"LOCAL\"\n    /* LOCAL */\n    );\n\n    this.boundEventHandler = (event, poll) => this.onStorageEvent(event, poll);\n\n    this.listeners = {};\n    this.localCache = {}; // setTimeout return value is platform specific\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.pollTimer = null; // Safari or iOS browser and embedded in an iframe.\n\n    this.safariLocalStorageNotSynced = _iframeCannotSyncWebStorage() && _isIframe(); // Whether to use polling instead of depending on window events\n\n    this.fallbackToPolling = _isMobileBrowser();\n    this._shouldAllowMigration = true;\n  }\n\n  forAllChangedKeys(cb) {\n    // Check all keys with listeners on them.\n    for (const key of Object.keys(this.listeners)) {\n      // Get value from localStorage.\n      const newValue = this.storage.getItem(key);\n      const oldValue = this.localCache[key]; // If local map value does not match, trigger listener with storage event.\n      // Differentiate this simulated event from the real storage event.\n\n      if (newValue !== oldValue) {\n        cb(key, oldValue, newValue);\n      }\n    }\n  }\n\n  onStorageEvent(event, poll = false) {\n    // Key would be null in some situations, like when localStorage is cleared\n    if (!event.key) {\n      this.forAllChangedKeys((key, _oldValue, newValue) => {\n        this.notifyListeners(key, newValue);\n      });\n      return;\n    }\n\n    const key = event.key; // Check the mechanism how this event was detected.\n    // The first event will dictate the mechanism to be used.\n\n    if (poll) {\n      // Environment detects storage changes via polling.\n      // Remove storage event listener to prevent possible event duplication.\n      this.detachListener();\n    } else {\n      // Environment detects storage changes via storage event listener.\n      // Remove polling listener to prevent possible event duplication.\n      this.stopPolling();\n    } // Safari embedded iframe. Storage event will trigger with the delta\n    // changes but no changes will be applied to the iframe localStorage.\n\n\n    if (this.safariLocalStorageNotSynced) {\n      // Get current iframe page value.\n      const storedValue = this.storage.getItem(key); // Value not synchronized, synchronize manually.\n\n      if (event.newValue !== storedValue) {\n        if (event.newValue !== null) {\n          // Value changed from current value.\n          this.storage.setItem(key, event.newValue);\n        } else {\n          // Current value deleted.\n          this.storage.removeItem(key);\n        }\n      } else if (this.localCache[key] === event.newValue && !poll) {\n        // Already detected and processed, do not trigger listeners again.\n        return;\n      }\n    }\n\n    const triggerListeners = () => {\n      // Keep local map up to date in case storage event is triggered before\n      // poll.\n      const storedValue = this.storage.getItem(key);\n\n      if (!poll && this.localCache[key] === storedValue) {\n        // Real storage event which has already been detected, do nothing.\n        // This seems to trigger in some IE browsers for some reason.\n        return;\n      }\n\n      this.notifyListeners(key, storedValue);\n    };\n\n    const storedValue = this.storage.getItem(key);\n\n    if (_isIE10() && storedValue !== event.newValue && event.newValue !== event.oldValue) {\n      // IE 10 has this weird bug where a storage event would trigger with the\n      // correct key, oldValue and newValue but localStorage.getItem(key) does\n      // not yield the updated value until a few milliseconds. This ensures\n      // this recovers from that situation.\n      setTimeout(triggerListeners, IE10_LOCAL_STORAGE_SYNC_DELAY);\n    } else {\n      triggerListeners();\n    }\n  }\n\n  notifyListeners(key, value) {\n    this.localCache[key] = value;\n    const listeners = this.listeners[key];\n\n    if (listeners) {\n      for (const listener of Array.from(listeners)) {\n        listener(value ? JSON.parse(value) : value);\n      }\n    }\n  }\n\n  startPolling() {\n    this.stopPolling();\n    this.pollTimer = setInterval(() => {\n      this.forAllChangedKeys((key, oldValue, newValue) => {\n        this.onStorageEvent(new StorageEvent('storage', {\n          key,\n          oldValue,\n          newValue\n        }),\n        /* poll */\n        true);\n      });\n    }, _POLLING_INTERVAL_MS$1);\n  }\n\n  stopPolling() {\n    if (this.pollTimer) {\n      clearInterval(this.pollTimer);\n      this.pollTimer = null;\n    }\n  }\n\n  attachListener() {\n    window.addEventListener('storage', this.boundEventHandler);\n  }\n\n  detachListener() {\n    window.removeEventListener('storage', this.boundEventHandler);\n  }\n\n  _addListener(key, listener) {\n    if (Object.keys(this.listeners).length === 0) {\n      // Whether browser can detect storage event when it had already been pushed to the background.\n      // This may happen in some mobile browsers. A localStorage change in the foreground window\n      // will not be detected in the background window via the storage event.\n      // This was detected in iOS 7.x mobile browsers\n      if (this.fallbackToPolling) {\n        this.startPolling();\n      } else {\n        this.attachListener();\n      }\n    }\n\n    if (!this.listeners[key]) {\n      this.listeners[key] = new Set(); // Populate the cache to avoid spuriously triggering on first poll.\n\n      this.localCache[key] = this.storage.getItem(key);\n    }\n\n    this.listeners[key].add(listener);\n  }\n\n  _removeListener(key, listener) {\n    if (this.listeners[key]) {\n      this.listeners[key].delete(listener);\n\n      if (this.listeners[key].size === 0) {\n        delete this.listeners[key];\n      }\n    }\n\n    if (Object.keys(this.listeners).length === 0) {\n      this.detachListener();\n      this.stopPolling();\n    }\n  } // Update local cache on base operations:\n\n\n  async _set(key, value) {\n    await super._set(key, value);\n    this.localCache[key] = JSON.stringify(value);\n  }\n\n  async _get(key) {\n    const value = await super._get(key);\n    this.localCache[key] = JSON.stringify(value);\n    return value;\n  }\n\n  async _remove(key) {\n    await super._remove(key);\n    delete this.localCache[key];\n  }\n\n}\n\nBrowserLocalPersistence.type = 'LOCAL';\n/**\r\n * An implementation of {@link Persistence} of type `LOCAL` using `localStorage`\r\n * for the underlying storage.\r\n *\r\n * @public\r\n */\n\nconst browserLocalPersistence = BrowserLocalPersistence;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.b = browserLocalPersistence;\n\nclass BrowserSessionPersistence extends BrowserPersistenceClass {\n  constructor() {\n    super(() => window.sessionStorage, \"SESSION\"\n    /* SESSION */\n    );\n  }\n\n  _addListener(_key, _listener) {\n    // Listeners are not supported for session storage since it cannot be shared across windows\n    return;\n  }\n\n  _removeListener(_key, _listener) {\n    // Listeners are not supported for session storage since it cannot be shared across windows\n    return;\n  }\n\n}\n\nBrowserSessionPersistence.type = 'SESSION';\n/**\r\n * An implementation of {@link Persistence} of `SESSION` using `sessionStorage`\r\n * for the underlying storage.\r\n *\r\n * @public\r\n */\n\nconst browserSessionPersistence = BrowserSessionPersistence;\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Shim for Promise.allSettled, note the slightly different format of `fulfilled` vs `status`.\r\n *\r\n * @param promises - Array of promises to wait on.\r\n */\n\nexports.a = browserSessionPersistence;\n\nfunction _allSettled(promises) {\n  return Promise.all(promises.map(async promise => {\n    try {\n      const value = await promise;\n      return {\n        fulfilled: true,\n        value\n      };\n    } catch (reason) {\n      return {\n        fulfilled: false,\n        reason\n      };\n    }\n  }));\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Interface class for receiving messages.\r\n *\r\n */\n\n\nclass Receiver {\n  constructor(eventTarget) {\n    this.eventTarget = eventTarget;\n    this.handlersMap = {};\n    this.boundEventHandler = this.handleEvent.bind(this);\n  }\n  /**\r\n   * Obtain an instance of a Receiver for a given event target, if none exists it will be created.\r\n   *\r\n   * @param eventTarget - An event target (such as window or self) through which the underlying\r\n   * messages will be received.\r\n   */\n\n\n  static _getInstance(eventTarget) {\n    // The results are stored in an array since objects can't be keys for other\n    // objects. In addition, setting a unique property on an event target as a\n    // hash map key may not be allowed due to CORS restrictions.\n    const existingInstance = this.receivers.find(receiver => receiver.isListeningto(eventTarget));\n\n    if (existingInstance) {\n      return existingInstance;\n    }\n\n    const newInstance = new Receiver(eventTarget);\n    this.receivers.push(newInstance);\n    return newInstance;\n  }\n\n  isListeningto(eventTarget) {\n    return this.eventTarget === eventTarget;\n  }\n  /**\r\n   * Fans out a MessageEvent to the appropriate listeners.\r\n   *\r\n   * @remarks\r\n   * Sends an {@link Status.ACK} upon receipt and a {@link Status.DONE} once all handlers have\r\n   * finished processing.\r\n   *\r\n   * @param event - The MessageEvent.\r\n   *\r\n   */\n\n\n  async handleEvent(event) {\n    const messageEvent = event;\n    const {\n      eventId,\n      eventType,\n      data\n    } = messageEvent.data;\n    const handlers = this.handlersMap[eventType];\n\n    if (!(handlers === null || handlers === void 0 ? void 0 : handlers.size)) {\n      return;\n    }\n\n    messageEvent.ports[0].postMessage({\n      status: \"ack\"\n      /* ACK */\n      ,\n      eventId,\n      eventType\n    });\n    const promises = Array.from(handlers).map(async handler => handler(messageEvent.origin, data));\n    const response = await _allSettled(promises);\n    messageEvent.ports[0].postMessage({\n      status: \"done\"\n      /* DONE */\n      ,\n      eventId,\n      eventType,\n      response\n    });\n  }\n  /**\r\n   * Subscribe an event handler for a particular event.\r\n   *\r\n   * @param eventType - Event name to subscribe to.\r\n   * @param eventHandler - The event handler which should receive the events.\r\n   *\r\n   */\n\n\n  _subscribe(eventType, eventHandler) {\n    if (Object.keys(this.handlersMap).length === 0) {\n      this.eventTarget.addEventListener('message', this.boundEventHandler);\n    }\n\n    if (!this.handlersMap[eventType]) {\n      this.handlersMap[eventType] = new Set();\n    }\n\n    this.handlersMap[eventType].add(eventHandler);\n  }\n  /**\r\n   * Unsubscribe an event handler from a particular event.\r\n   *\r\n   * @param eventType - Event name to unsubscribe from.\r\n   * @param eventHandler - Optinoal event handler, if none provided, unsubscribe all handlers on this event.\r\n   *\r\n   */\n\n\n  _unsubscribe(eventType, eventHandler) {\n    if (this.handlersMap[eventType] && eventHandler) {\n      this.handlersMap[eventType].delete(eventHandler);\n    }\n\n    if (!eventHandler || this.handlersMap[eventType].size === 0) {\n      delete this.handlersMap[eventType];\n    }\n\n    if (Object.keys(this.handlersMap).length === 0) {\n      this.eventTarget.removeEventListener('message', this.boundEventHandler);\n    }\n  }\n\n}\n\nReceiver.receivers = [];\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nfunction _generateEventId(prefix = '', digits = 10) {\n  let random = '';\n\n  for (let i = 0; i < digits; i++) {\n    random += Math.floor(Math.random() * 10);\n  }\n\n  return prefix + random;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Interface for sending messages and waiting for a completion response.\r\n *\r\n */\n\n\nclass Sender {\n  constructor(target) {\n    this.target = target;\n    this.handlers = new Set();\n  }\n  /**\r\n   * Unsubscribe the handler and remove it from our tracking Set.\r\n   *\r\n   * @param handler - The handler to unsubscribe.\r\n   */\n\n\n  removeMessageHandler(handler) {\n    if (handler.messageChannel) {\n      handler.messageChannel.port1.removeEventListener('message', handler.onMessage);\n      handler.messageChannel.port1.close();\n    }\n\n    this.handlers.delete(handler);\n  }\n  /**\r\n   * Send a message to the Receiver located at {@link target}.\r\n   *\r\n   * @remarks\r\n   * We'll first wait a bit for an ACK , if we get one we will wait significantly longer until the\r\n   * receiver has had a chance to fully process the event.\r\n   *\r\n   * @param eventType - Type of event to send.\r\n   * @param data - The payload of the event.\r\n   * @param timeout - Timeout for waiting on an ACK from the receiver.\r\n   *\r\n   * @returns An array of settled promises from all the handlers that were listening on the receiver.\r\n   */\n\n\n  async _send(eventType, data, timeout = 50\n  /* ACK */\n  ) {\n    const messageChannel = typeof MessageChannel !== 'undefined' ? new MessageChannel() : null;\n\n    if (!messageChannel) {\n      throw new Error(\"connection_unavailable\"\n      /* CONNECTION_UNAVAILABLE */\n      );\n    } // Node timers and browser timers return fundamentally different types.\n    // We don't actually care what the value is but TS won't accept unknown and\n    // we can't cast properly in both environments.\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n\n    let completionTimer;\n    let handler;\n    return new Promise((resolve, reject) => {\n      const eventId = _generateEventId('', 20);\n\n      messageChannel.port1.start();\n      const ackTimer = setTimeout(() => {\n        reject(new Error(\"unsupported_event\"\n        /* UNSUPPORTED_EVENT */\n        ));\n      }, timeout);\n      handler = {\n        messageChannel,\n\n        onMessage(event) {\n          const messageEvent = event;\n\n          if (messageEvent.data.eventId !== eventId) {\n            return;\n          }\n\n          switch (messageEvent.data.status) {\n            case \"ack\"\n            /* ACK */\n            :\n              // The receiver should ACK first.\n              clearTimeout(ackTimer);\n              completionTimer = setTimeout(() => {\n                reject(new Error(\"timeout\"\n                /* TIMEOUT */\n                ));\n              }, 3000\n              /* COMPLETION */\n              );\n              break;\n\n            case \"done\"\n            /* DONE */\n            :\n              // Once the receiver's handlers are finished we will get the results.\n              clearTimeout(completionTimer);\n              resolve(messageEvent.data.response);\n              break;\n\n            default:\n              clearTimeout(ackTimer);\n              clearTimeout(completionTimer);\n              reject(new Error(\"invalid_response\"\n              /* INVALID_RESPONSE */\n              ));\n              break;\n          }\n        }\n\n      };\n      this.handlers.add(handler);\n      messageChannel.port1.addEventListener('message', handler.onMessage);\n      this.target.postMessage({\n        eventType,\n        eventId,\n        data\n      }, [messageChannel.port2]);\n    }).finally(() => {\n      if (handler) {\n        this.removeMessageHandler(handler);\n      }\n    });\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Lazy accessor for window, since the compat layer won't tree shake this out,\r\n * we need to make sure not to mess with window unless we have to\r\n */\n\n\nfunction _window() {\n  return window;\n}\n\nfunction _setWindowLocation(url) {\n  _window().location.href = url;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction _isWorker() {\n  return typeof _window()['WorkerGlobalScope'] !== 'undefined' && typeof _window()['importScripts'] === 'function';\n}\n\nasync function _getActiveServiceWorker() {\n  if (!(navigator === null || navigator === void 0 ? void 0 : navigator.serviceWorker)) {\n    return null;\n  }\n\n  try {\n    const registration = await navigator.serviceWorker.ready;\n    return registration.active;\n  } catch (_a) {\n    return null;\n  }\n}\n\nfunction _getServiceWorkerController() {\n  var _a;\n\n  return ((_a = navigator === null || navigator === void 0 ? void 0 : navigator.serviceWorker) === null || _a === void 0 ? void 0 : _a.controller) || null;\n}\n\nfunction _getWorkerGlobalScope() {\n  return _isWorker() ? self : null;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst DB_NAME = 'firebaseLocalStorageDb';\nconst DB_VERSION = 1;\nconst DB_OBJECTSTORE_NAME = 'firebaseLocalStorage';\nconst DB_DATA_KEYPATH = 'fbase_key';\n/**\r\n * Promise wrapper for IDBRequest\r\n *\r\n * Unfortunately we can't cleanly extend Promise<T> since promises are not callable in ES6\r\n *\r\n */\n\nclass DBPromise {\n  constructor(request) {\n    this.request = request;\n  }\n\n  toPromise() {\n    return new Promise((resolve, reject) => {\n      this.request.addEventListener('success', () => {\n        resolve(this.request.result);\n      });\n      this.request.addEventListener('error', () => {\n        reject(this.request.error);\n      });\n    });\n  }\n\n}\n\nfunction getObjectStore(db, isReadWrite) {\n  return db.transaction([DB_OBJECTSTORE_NAME], isReadWrite ? 'readwrite' : 'readonly').objectStore(DB_OBJECTSTORE_NAME);\n}\n\nfunction _deleteDatabase() {\n  const request = indexedDB.deleteDatabase(DB_NAME);\n  return new DBPromise(request).toPromise();\n}\n\nfunction _openDatabase() {\n  const request = indexedDB.open(DB_NAME, DB_VERSION);\n  return new Promise((resolve, reject) => {\n    request.addEventListener('error', () => {\n      reject(request.error);\n    });\n    request.addEventListener('upgradeneeded', () => {\n      const db = request.result;\n\n      try {\n        db.createObjectStore(DB_OBJECTSTORE_NAME, {\n          keyPath: DB_DATA_KEYPATH\n        });\n      } catch (e) {\n        reject(e);\n      }\n    });\n    request.addEventListener('success', async () => {\n      const db = request.result; // Strange bug that occurs in Firefox when multiple tabs are opened at the\n      // same time. The only way to recover seems to be deleting the database\n      // and re-initializing it.\n      // https://github.com/firebase/firebase-js-sdk/issues/634\n\n      if (!db.objectStoreNames.contains(DB_OBJECTSTORE_NAME)) {\n        // Need to close the database or else you get a `blocked` event\n        db.close();\n        await _deleteDatabase();\n        resolve(await _openDatabase());\n      } else {\n        resolve(db);\n      }\n    });\n  });\n}\n\nasync function _putObject(db, key, value) {\n  const request = getObjectStore(db, true).put({\n    [DB_DATA_KEYPATH]: key,\n    value\n  });\n  return new DBPromise(request).toPromise();\n}\n\nasync function getObject(db, key) {\n  const request = getObjectStore(db, false).get(key);\n  const data = await new DBPromise(request).toPromise();\n  return data === undefined ? null : data.value;\n}\n\nfunction _deleteObject(db, key) {\n  const request = getObjectStore(db, true).delete(key);\n  return new DBPromise(request).toPromise();\n}\n\nconst _POLLING_INTERVAL_MS = 800;\nconst _TRANSACTION_RETRY_COUNT = 3;\n\nclass IndexedDBLocalPersistence {\n  constructor() {\n    this.type = \"LOCAL\"\n    /* LOCAL */\n    ;\n    this._shouldAllowMigration = true;\n    this.listeners = {};\n    this.localCache = {}; // setTimeout return value is platform specific\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n\n    this.pollTimer = null;\n    this.pendingWrites = 0;\n    this.receiver = null;\n    this.sender = null;\n    this.serviceWorkerReceiverAvailable = false;\n    this.activeServiceWorker = null; // Fire & forget the service worker registration as it may never resolve\n\n    this._workerInitializationPromise = this.initializeServiceWorkerMessaging().then(() => {}, () => {});\n  }\n\n  async _openDb() {\n    if (this.db) {\n      return this.db;\n    }\n\n    this.db = await _openDatabase();\n    return this.db;\n  }\n\n  async _withRetries(op) {\n    let numAttempts = 0;\n\n    while (true) {\n      try {\n        const db = await this._openDb();\n        return await op(db);\n      } catch (e) {\n        if (numAttempts++ > _TRANSACTION_RETRY_COUNT) {\n          throw e;\n        }\n\n        if (this.db) {\n          this.db.close();\n          this.db = undefined;\n        } // TODO: consider adding exponential backoff\n\n      }\n    }\n  }\n  /**\r\n   * IndexedDB events do not propagate from the main window to the worker context.  We rely on a\r\n   * postMessage interface to send these events to the worker ourselves.\r\n   */\n\n\n  async initializeServiceWorkerMessaging() {\n    return _isWorker() ? this.initializeReceiver() : this.initializeSender();\n  }\n  /**\r\n   * As the worker we should listen to events from the main window.\r\n   */\n\n\n  async initializeReceiver() {\n    this.receiver = Receiver._getInstance(_getWorkerGlobalScope()); // Refresh from persistence if we receive a KeyChanged message.\n\n    this.receiver._subscribe(\"keyChanged\"\n    /* KEY_CHANGED */\n    , async (_origin, data) => {\n      const keys = await this._poll();\n      return {\n        keyProcessed: keys.includes(data.key)\n      };\n    }); // Let the sender know that we are listening so they give us more timeout.\n\n\n    this.receiver._subscribe(\"ping\"\n    /* PING */\n    , async (_origin, _data) => {\n      return [\"keyChanged\"\n      /* KEY_CHANGED */\n      ];\n    });\n  }\n  /**\r\n   * As the main window, we should let the worker know when keys change (set and remove).\r\n   *\r\n   * @remarks\r\n   * {@link https://developer.mozilla.org/en-US/docs/Web/API/ServiceWorkerContainer/ready | ServiceWorkerContainer.ready}\r\n   * may not resolve.\r\n   */\n\n\n  async initializeSender() {\n    var _a, _b; // Check to see if there's an active service worker.\n\n\n    this.activeServiceWorker = await _getActiveServiceWorker();\n\n    if (!this.activeServiceWorker) {\n      return;\n    }\n\n    this.sender = new Sender(this.activeServiceWorker); // Ping the service worker to check what events they can handle.\n\n    const results = await this.sender._send(\"ping\"\n    /* PING */\n    , {}, 800\n    /* LONG_ACK */\n    );\n\n    if (!results) {\n      return;\n    }\n\n    if (((_a = results[0]) === null || _a === void 0 ? void 0 : _a.fulfilled) && ((_b = results[0]) === null || _b === void 0 ? void 0 : _b.value.includes(\"keyChanged\"\n    /* KEY_CHANGED */\n    ))) {\n      this.serviceWorkerReceiverAvailable = true;\n    }\n  }\n  /**\r\n   * Let the worker know about a changed key, the exact key doesn't technically matter since the\r\n   * worker will just trigger a full sync anyway.\r\n   *\r\n   * @remarks\r\n   * For now, we only support one service worker per page.\r\n   *\r\n   * @param key - Storage key which changed.\r\n   */\n\n\n  async notifyServiceWorker(key) {\n    if (!this.sender || !this.activeServiceWorker || _getServiceWorkerController() !== this.activeServiceWorker) {\n      return;\n    }\n\n    try {\n      await this.sender._send(\"keyChanged\"\n      /* KEY_CHANGED */\n      , {\n        key\n      }, // Use long timeout if receiver has previously responded to a ping from us.\n      this.serviceWorkerReceiverAvailable ? 800\n      /* LONG_ACK */\n      : 50\n      /* ACK */\n      );\n    } catch (_a) {// This is a best effort approach. Ignore errors.\n    }\n  }\n\n  async _isAvailable() {\n    try {\n      if (!indexedDB) {\n        return false;\n      }\n\n      const db = await _openDatabase();\n      await _putObject(db, STORAGE_AVAILABLE_KEY, '1');\n      await _deleteObject(db, STORAGE_AVAILABLE_KEY);\n      return true;\n    } catch (_a) {}\n\n    return false;\n  }\n\n  async _withPendingWrite(write) {\n    this.pendingWrites++;\n\n    try {\n      await write();\n    } finally {\n      this.pendingWrites--;\n    }\n  }\n\n  async _set(key, value) {\n    return this._withPendingWrite(async () => {\n      await this._withRetries(db => _putObject(db, key, value));\n      this.localCache[key] = value;\n      return this.notifyServiceWorker(key);\n    });\n  }\n\n  async _get(key) {\n    const obj = await this._withRetries(db => getObject(db, key));\n    this.localCache[key] = obj;\n    return obj;\n  }\n\n  async _remove(key) {\n    return this._withPendingWrite(async () => {\n      await this._withRetries(db => _deleteObject(db, key));\n      delete this.localCache[key];\n      return this.notifyServiceWorker(key);\n    });\n  }\n\n  async _poll() {\n    // TODO: check if we need to fallback if getAll is not supported\n    const result = await this._withRetries(db => {\n      const getAllRequest = getObjectStore(db, false).getAll();\n      return new DBPromise(getAllRequest).toPromise();\n    });\n\n    if (!result) {\n      return [];\n    } // If we have pending writes in progress abort, we'll get picked up on the next poll\n\n\n    if (this.pendingWrites !== 0) {\n      return [];\n    }\n\n    const keys = [];\n    const keysInResult = new Set();\n\n    for (const {\n      fbase_key: key,\n      value\n    } of result) {\n      keysInResult.add(key);\n\n      if (JSON.stringify(this.localCache[key]) !== JSON.stringify(value)) {\n        this.notifyListeners(key, value);\n        keys.push(key);\n      }\n    }\n\n    for (const localKey of Object.keys(this.localCache)) {\n      if (this.localCache[localKey] && !keysInResult.has(localKey)) {\n        // Deleted\n        this.notifyListeners(localKey, null);\n        keys.push(localKey);\n      }\n    }\n\n    return keys;\n  }\n\n  notifyListeners(key, newValue) {\n    this.localCache[key] = newValue;\n    const listeners = this.listeners[key];\n\n    if (listeners) {\n      for (const listener of Array.from(listeners)) {\n        listener(newValue);\n      }\n    }\n  }\n\n  startPolling() {\n    this.stopPolling();\n    this.pollTimer = setInterval(async () => this._poll(), _POLLING_INTERVAL_MS);\n  }\n\n  stopPolling() {\n    if (this.pollTimer) {\n      clearInterval(this.pollTimer);\n      this.pollTimer = null;\n    }\n  }\n\n  _addListener(key, listener) {\n    if (Object.keys(this.listeners).length === 0) {\n      this.startPolling();\n    }\n\n    if (!this.listeners[key]) {\n      this.listeners[key] = new Set(); // Populate the cache to avoid spuriously triggering on first poll.\n\n      void this._get(key); // This can happen in the background async and we can return immediately.\n    }\n\n    this.listeners[key].add(listener);\n  }\n\n  _removeListener(key, listener) {\n    if (this.listeners[key]) {\n      this.listeners[key].delete(listener);\n\n      if (this.listeners[key].size === 0) {\n        delete this.listeners[key];\n      }\n    }\n\n    if (Object.keys(this.listeners).length === 0) {\n      this.stopPolling();\n    }\n  }\n\n}\n\nIndexedDBLocalPersistence.type = 'LOCAL';\n/**\r\n * An implementation of {@link Persistence} of type `LOCAL` using `indexedDB`\r\n * for the underlying storage.\r\n *\r\n * @public\r\n */\n\nconst indexedDBLocalPersistence = IndexedDBLocalPersistence;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nexports.i = indexedDBLocalPersistence;\n\nfunction startSignInPhoneMfa(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v2/accounts/mfaSignIn:start\"\n  /* START_PHONE_MFA_SIGN_IN */\n  , _addTidIfNecessary(auth, request));\n}\n\nfunction finalizeSignInPhoneMfa(auth, request) {\n  return _performApiRequest(auth, \"POST\"\n  /* POST */\n  , \"/v2/accounts/mfaSignIn:finalize\"\n  /* FINALIZE_PHONE_MFA_SIGN_IN */\n  , _addTidIfNecessary(auth, request));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function getRecaptchaParams(auth) {\n  return (await _performApiRequest(auth, \"GET\"\n  /* GET */\n  , \"/v1/recaptchaParams\"\n  /* GET_RECAPTCHA_PARAM */\n  )).recaptchaSiteKey || '';\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction getScriptParentElement() {\n  var _a, _b;\n\n  return (_b = (_a = document.getElementsByTagName('head')) === null || _a === void 0 ? void 0 : _a[0]) !== null && _b !== void 0 ? _b : document;\n}\n\nfunction _loadJS(url) {\n  // TODO: consider adding timeout support & cancellation\n  return new Promise((resolve, reject) => {\n    const el = document.createElement('script');\n    el.setAttribute('src', url);\n    el.onload = resolve;\n\n    el.onerror = e => {\n      const error = _createError(\"internal-error\"\n      /* INTERNAL_ERROR */\n      );\n\n      error.customData = e;\n      reject(error);\n    };\n\n    el.type = 'text/javascript';\n    el.charset = 'UTF-8';\n    getScriptParentElement().appendChild(el);\n  });\n}\n\nfunction _generateCallbackName(prefix) {\n  return `__${prefix}${Math.floor(Math.random() * 1000000)}`;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst _SOLVE_TIME_MS = 500;\nconst _EXPIRATION_TIME_MS = 60000;\nconst _WIDGET_ID_START = 1000000000000;\n\nclass MockReCaptcha {\n  constructor(auth) {\n    this.auth = auth;\n    this.counter = _WIDGET_ID_START;\n    this._widgets = new Map();\n  }\n\n  render(container, parameters) {\n    const id = this.counter;\n\n    this._widgets.set(id, new MockWidget(container, this.auth.name, parameters || {}));\n\n    this.counter++;\n    return id;\n  }\n\n  reset(optWidgetId) {\n    var _a;\n\n    const id = optWidgetId || _WIDGET_ID_START;\n    void ((_a = this._widgets.get(id)) === null || _a === void 0 ? void 0 : _a.delete());\n\n    this._widgets.delete(id);\n  }\n\n  getResponse(optWidgetId) {\n    var _a;\n\n    const id = optWidgetId || _WIDGET_ID_START;\n    return ((_a = this._widgets.get(id)) === null || _a === void 0 ? void 0 : _a.getResponse()) || '';\n  }\n\n  async execute(optWidgetId) {\n    var _a;\n\n    const id = optWidgetId || _WIDGET_ID_START;\n    void ((_a = this._widgets.get(id)) === null || _a === void 0 ? void 0 : _a.execute());\n    return '';\n  }\n\n}\n\nclass MockWidget {\n  constructor(containerOrId, appName, params) {\n    this.params = params;\n    this.timerId = null;\n    this.deleted = false;\n    this.responseToken = null;\n\n    this.clickHandler = () => {\n      this.execute();\n    };\n\n    const container = typeof containerOrId === 'string' ? document.getElementById(containerOrId) : containerOrId;\n\n    _assert(container, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    , {\n      appName\n    });\n\n    this.container = container;\n    this.isVisible = this.params.size !== 'invisible';\n\n    if (this.isVisible) {\n      this.execute();\n    } else {\n      this.container.addEventListener('click', this.clickHandler);\n    }\n  }\n\n  getResponse() {\n    this.checkIfDeleted();\n    return this.responseToken;\n  }\n\n  delete() {\n    this.checkIfDeleted();\n    this.deleted = true;\n\n    if (this.timerId) {\n      clearTimeout(this.timerId);\n      this.timerId = null;\n    }\n\n    this.container.removeEventListener('click', this.clickHandler);\n  }\n\n  execute() {\n    this.checkIfDeleted();\n\n    if (this.timerId) {\n      return;\n    }\n\n    this.timerId = window.setTimeout(() => {\n      this.responseToken = generateRandomAlphaNumericString(50);\n      const {\n        callback,\n        'expired-callback': expiredCallback\n      } = this.params;\n\n      if (callback) {\n        try {\n          callback(this.responseToken);\n        } catch (e) {}\n      }\n\n      this.timerId = window.setTimeout(() => {\n        this.timerId = null;\n        this.responseToken = null;\n\n        if (expiredCallback) {\n          try {\n            expiredCallback();\n          } catch (e) {}\n        }\n\n        if (this.isVisible) {\n          this.execute();\n        }\n      }, _EXPIRATION_TIME_MS);\n    }, _SOLVE_TIME_MS);\n  }\n\n  checkIfDeleted() {\n    if (this.deleted) {\n      throw new Error('reCAPTCHA mock was already deleted!');\n    }\n  }\n\n}\n\nfunction generateRandomAlphaNumericString(len) {\n  const chars = [];\n  const allowedChars = '1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';\n\n  for (let i = 0; i < len; i++) {\n    chars.push(allowedChars.charAt(Math.floor(Math.random() * allowedChars.length)));\n  }\n\n  return chars.join('');\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// ReCaptcha will load using the same callback, so the callback function needs\n// to be kept around\n\n\nconst _JSLOAD_CALLBACK = _generateCallbackName('rcb');\n\nconst NETWORK_TIMEOUT_DELAY = new Delay(30000, 60000);\nconst RECAPTCHA_BASE = 'https://www.google.com/recaptcha/api.js?';\n/**\r\n * Loader for the GReCaptcha library. There should only ever be one of this.\r\n */\n\nclass ReCaptchaLoaderImpl {\n  constructor() {\n    this.hostLanguage = '';\n    this.counter = 0;\n    this.librarySeparatelyLoaded = !!_window().grecaptcha;\n  }\n\n  load(auth, hl = '') {\n    _assert(isHostLanguageValid(hl), auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    if (this.shouldResolveImmediately(hl)) {\n      return Promise.resolve(_window().grecaptcha);\n    }\n\n    return new Promise((resolve, reject) => {\n      const networkTimeout = _window().setTimeout(() => {\n        reject(_createError(auth, \"network-request-failed\"\n        /* NETWORK_REQUEST_FAILED */\n        ));\n      }, NETWORK_TIMEOUT_DELAY.get());\n\n      _window()[_JSLOAD_CALLBACK] = () => {\n        _window().clearTimeout(networkTimeout);\n\n        delete _window()[_JSLOAD_CALLBACK];\n\n        const recaptcha = _window().grecaptcha;\n\n        if (!recaptcha) {\n          reject(_createError(auth, \"internal-error\"\n          /* INTERNAL_ERROR */\n          ));\n          return;\n        } // Wrap the greptcha render function so that we know if the developer has\n        // called it separately\n\n\n        const render = recaptcha.render;\n\n        recaptcha.render = (container, params) => {\n          const widgetId = render(container, params);\n          this.counter++;\n          return widgetId;\n        };\n\n        this.hostLanguage = hl;\n        resolve(recaptcha);\n      };\n\n      const url = `${RECAPTCHA_BASE}?${(0, _util.querystring)({\n        onload: _JSLOAD_CALLBACK,\n        render: 'explicit',\n        hl\n      })}`;\n\n      _loadJS(url).catch(() => {\n        clearTimeout(networkTimeout);\n        reject(_createError(auth, \"internal-error\"\n        /* INTERNAL_ERROR */\n        ));\n      });\n    });\n  }\n\n  clearedOneInstance() {\n    this.counter--;\n  }\n\n  shouldResolveImmediately(hl) {\n    // We can resolve immediately if:\n    //   \u2022 grecaptcha is already defined AND (\n    //     1. the requested language codes are the same OR\n    //     2. there exists already a ReCaptcha on the page\n    //     3. the library was already loaded by the app\n    // In cases (2) and (3), we _can't_ reload as it would break the recaptchas\n    // that are already in the page\n    return !!_window().grecaptcha && (hl === this.hostLanguage || this.counter > 0 || this.librarySeparatelyLoaded);\n  }\n\n}\n\nfunction isHostLanguageValid(hl) {\n  return hl.length <= 6 && /^\\s*[a-zA-Z0-9\\-]*\\s*$/.test(hl);\n}\n\nclass MockReCaptchaLoaderImpl {\n  async load(auth) {\n    return new MockReCaptcha(auth);\n  }\n\n  clearedOneInstance() {}\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst RECAPTCHA_VERIFIER_TYPE = 'recaptcha';\nconst DEFAULT_PARAMS = {\n  theme: 'light',\n  type: 'image'\n};\n/**\r\n * An {@link https://www.google.com/recaptcha/ | reCAPTCHA}-based application verifier.\r\n *\r\n * @public\r\n */\n\nclass RecaptchaVerifier {\n  /**\r\n   *\r\n   * @param containerOrId - The reCAPTCHA container parameter.\r\n   *\r\n   * @remarks\r\n   * This has different meaning depending on whether the reCAPTCHA is hidden or visible. For a\r\n   * visible reCAPTCHA the container must be empty. If a string is used, it has to correspond to\r\n   * an element ID. The corresponding element must also must be in the DOM at the time of\r\n   * initialization.\r\n   *\r\n   * @param parameters - The optional reCAPTCHA parameters.\r\n   *\r\n   * @remarks\r\n   * Check the reCAPTCHA docs for a comprehensive list. All parameters are accepted except for\r\n   * the sitekey. Firebase Auth backend provisions a reCAPTCHA for each project and will\r\n   * configure this upon rendering. For an invisible reCAPTCHA, a size key must have the value\r\n   * 'invisible'.\r\n   *\r\n   * @param authExtern - The corresponding Firebase {@link Auth} instance.\r\n   *\r\n   * @remarks\r\n   * If none is provided, the default Firebase {@link Auth} instance is used. A Firebase {@link Auth} instance\r\n   * must be initialized with an API key, otherwise an error will be thrown.\r\n   */\n  constructor(containerOrId, parameters = Object.assign({}, DEFAULT_PARAMS), authExtern) {\n    this.parameters = parameters;\n    /**\r\n     * The application verifier type.\r\n     *\r\n     * @remarks\r\n     * For a reCAPTCHA verifier, this is 'recaptcha'.\r\n     */\n\n    this.type = RECAPTCHA_VERIFIER_TYPE;\n    this.destroyed = false;\n    this.widgetId = null;\n    this.tokenChangeListeners = new Set();\n    this.renderPromise = null;\n    this.recaptcha = null;\n    this.auth = _castAuth(authExtern);\n    this.isInvisible = this.parameters.size === 'invisible';\n\n    _assert(typeof document !== 'undefined', this.auth, \"operation-not-supported-in-this-environment\"\n    /* OPERATION_NOT_SUPPORTED */\n    );\n\n    const container = typeof containerOrId === 'string' ? document.getElementById(containerOrId) : containerOrId;\n\n    _assert(container, this.auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    this.container = container;\n    this.parameters.callback = this.makeTokenCallback(this.parameters.callback);\n    this._recaptchaLoader = this.auth.settings.appVerificationDisabledForTesting ? new MockReCaptchaLoaderImpl() : new ReCaptchaLoaderImpl();\n    this.validateStartingState(); // TODO: Figure out if sdk version is needed\n  }\n  /**\r\n   * Waits for the user to solve the reCAPTCHA and resolves with the reCAPTCHA token.\r\n   *\r\n   * @returns A Promise for the reCAPTCHA token.\r\n   */\n\n\n  async verify() {\n    this.assertNotDestroyed();\n    const id = await this.render();\n    const recaptcha = this.getAssertedRecaptcha();\n    const response = recaptcha.getResponse(id);\n\n    if (response) {\n      return response;\n    }\n\n    return new Promise(resolve => {\n      const tokenChange = token => {\n        if (!token) {\n          return; // Ignore token expirations.\n        }\n\n        this.tokenChangeListeners.delete(tokenChange);\n        resolve(token);\n      };\n\n      this.tokenChangeListeners.add(tokenChange);\n\n      if (this.isInvisible) {\n        recaptcha.execute(id);\n      }\n    });\n  }\n  /**\r\n   * Renders the reCAPTCHA widget on the page.\r\n   *\r\n   * @returns A Promise that resolves with the reCAPTCHA widget ID.\r\n   */\n\n\n  render() {\n    try {\n      this.assertNotDestroyed();\n    } catch (e) {\n      // This method returns a promise. Since it's not async (we want to return the\n      // _same_ promise if rendering is still occurring), the API surface should\n      // reject with the error rather than just throw\n      return Promise.reject(e);\n    }\n\n    if (this.renderPromise) {\n      return this.renderPromise;\n    }\n\n    this.renderPromise = this.makeRenderPromise().catch(e => {\n      this.renderPromise = null;\n      throw e;\n    });\n    return this.renderPromise;\n  }\n  /** @internal */\n\n\n  _reset() {\n    this.assertNotDestroyed();\n\n    if (this.widgetId !== null) {\n      this.getAssertedRecaptcha().reset(this.widgetId);\n    }\n  }\n  /**\r\n   * Clears the reCAPTCHA widget from the page and destroys the instance.\r\n   */\n\n\n  clear() {\n    this.assertNotDestroyed();\n    this.destroyed = true;\n\n    this._recaptchaLoader.clearedOneInstance();\n\n    if (!this.isInvisible) {\n      this.container.childNodes.forEach(node => {\n        this.container.removeChild(node);\n      });\n    }\n  }\n\n  validateStartingState() {\n    _assert(!this.parameters.sitekey, this.auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    _assert(this.isInvisible || !this.container.hasChildNodes(), this.auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    _assert(typeof document !== 'undefined', this.auth, \"operation-not-supported-in-this-environment\"\n    /* OPERATION_NOT_SUPPORTED */\n    );\n  }\n\n  makeTokenCallback(existing) {\n    return token => {\n      this.tokenChangeListeners.forEach(listener => listener(token));\n\n      if (typeof existing === 'function') {\n        existing(token);\n      } else if (typeof existing === 'string') {\n        const globalFunc = _window()[existing];\n\n        if (typeof globalFunc === 'function') {\n          globalFunc(token);\n        }\n      }\n    };\n  }\n\n  assertNotDestroyed() {\n    _assert(!this.destroyed, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n  }\n\n  async makeRenderPromise() {\n    await this.init();\n\n    if (!this.widgetId) {\n      let container = this.container;\n\n      if (!this.isInvisible) {\n        const guaranteedEmpty = document.createElement('div');\n        container.appendChild(guaranteedEmpty);\n        container = guaranteedEmpty;\n      }\n\n      this.widgetId = this.getAssertedRecaptcha().render(container, this.parameters);\n    }\n\n    return this.widgetId;\n  }\n\n  async init() {\n    _assert(_isHttpOrHttps() && !_isWorker(), this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    await domReady();\n    this.recaptcha = await this._recaptchaLoader.load(this.auth, this.auth.languageCode || undefined);\n    const siteKey = await getRecaptchaParams(this.auth);\n\n    _assert(siteKey, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    this.parameters.sitekey = siteKey;\n  }\n\n  getAssertedRecaptcha() {\n    _assert(this.recaptcha, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    return this.recaptcha;\n  }\n\n}\n\nexports.R = RecaptchaVerifier;\n\nfunction domReady() {\n  let resolver = null;\n  return new Promise(resolve => {\n    if (document.readyState === 'complete') {\n      resolve();\n      return;\n    } // Document not ready, wait for load before resolving.\n    // Save resolver, so we can remove listener in case it was externally\n    // cancelled.\n\n\n    resolver = () => resolve();\n\n    window.addEventListener('load', resolver);\n  }).catch(e => {\n    if (resolver) {\n      window.removeEventListener('load', resolver);\n    }\n\n    throw e;\n  });\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass ConfirmationResultImpl {\n  constructor(verificationId, onConfirmation) {\n    this.verificationId = verificationId;\n    this.onConfirmation = onConfirmation;\n  }\n\n  confirm(verificationCode) {\n    const authCredential = PhoneAuthCredential._fromVerification(this.verificationId, verificationCode);\n\n    return this.onConfirmation(authCredential);\n  }\n\n}\n/**\r\n * Asynchronously signs in using a phone number.\r\n *\r\n * @remarks\r\n * This method sends a code via SMS to the given\r\n * phone number, and returns a {@link ConfirmationResult}. After the user\r\n * provides the code sent to their phone, call {@link ConfirmationResult.confirm}\r\n * with the code to sign the user in.\r\n *\r\n * For abuse prevention, this method also requires a {@link ApplicationVerifier}.\r\n * This SDK includes a reCAPTCHA-based implementation, {@link RecaptchaVerifier}.\r\n * This function can work on other platforms that do not support the\r\n * {@link RecaptchaVerifier} (like React Native), but you need to use a\r\n * third-party {@link ApplicationVerifier} implementation.\r\n *\r\n * @example\r\n * ```javascript\r\n * // 'recaptcha-container' is the ID of an element in the DOM.\r\n * const applicationVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');\r\n * const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, applicationVerifier);\r\n * // Obtain a verificationCode from the user.\r\n * const credential = await confirmationResult.confirm(verificationCode);\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param phoneNumber - The user's phone number in E.164 format (e.g. +16505550101).\r\n * @param appVerifier - The {@link ApplicationVerifier}.\r\n *\r\n * @public\r\n */\n\n\nasync function signInWithPhoneNumber(auth, phoneNumber, appVerifier) {\n  const authInternal = _castAuth(auth);\n\n  const verificationId = await _verifyPhoneNumber(authInternal, phoneNumber, (0, _util.getModularInstance)(appVerifier));\n  return new ConfirmationResultImpl(verificationId, cred => signInWithCredential(authInternal, cred));\n}\n/**\r\n * Links the user account with the given phone number.\r\n *\r\n * @param user - The user.\r\n * @param phoneNumber - The user's phone number in E.164 format (e.g. +16505550101).\r\n * @param appVerifier - The {@link ApplicationVerifier}.\r\n *\r\n * @public\r\n */\n\n\nasync function linkWithPhoneNumber(user, phoneNumber, appVerifier) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  await _assertLinkedStatus(false, userInternal, \"phone\"\n  /* PHONE */\n  );\n  const verificationId = await _verifyPhoneNumber(userInternal.auth, phoneNumber, (0, _util.getModularInstance)(appVerifier));\n  return new ConfirmationResultImpl(verificationId, cred => linkWithCredential(userInternal, cred));\n}\n/**\r\n * Re-authenticates a user using a fresh phone credential.\r\n *\r\n * @remarks Use before operations such as {@link updatePassword} that require tokens from recent sign-in attempts.\r\n *\r\n * @param user - The user.\r\n * @param phoneNumber - The user's phone number in E.164 format (e.g. +16505550101).\r\n * @param appVerifier - The {@link ApplicationVerifier}.\r\n *\r\n * @public\r\n */\n\n\nasync function reauthenticateWithPhoneNumber(user, phoneNumber, appVerifier) {\n  const userInternal = (0, _util.getModularInstance)(user);\n  const verificationId = await _verifyPhoneNumber(userInternal.auth, phoneNumber, (0, _util.getModularInstance)(appVerifier));\n  return new ConfirmationResultImpl(verificationId, cred => reauthenticateWithCredential(userInternal, cred));\n}\n/**\r\n * Returns a verification ID to be used in conjunction with the SMS code that is sent.\r\n *\r\n */\n\n\nasync function _verifyPhoneNumber(auth, options, verifier) {\n  var _a;\n\n  const recaptchaToken = await verifier.verify();\n\n  try {\n    _assert(typeof recaptchaToken === 'string', auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    _assert(verifier.type === RECAPTCHA_VERIFIER_TYPE, auth, \"argument-error\"\n    /* ARGUMENT_ERROR */\n    );\n\n    let phoneInfoOptions;\n\n    if (typeof options === 'string') {\n      phoneInfoOptions = {\n        phoneNumber: options\n      };\n    } else {\n      phoneInfoOptions = options;\n    }\n\n    if ('session' in phoneInfoOptions) {\n      const session = phoneInfoOptions.session;\n\n      if ('phoneNumber' in phoneInfoOptions) {\n        _assert(session.type === \"enroll\"\n        /* ENROLL */\n        , auth, \"internal-error\"\n        /* INTERNAL_ERROR */\n        );\n\n        const response = await startEnrollPhoneMfa(auth, {\n          idToken: session.credential,\n          phoneEnrollmentInfo: {\n            phoneNumber: phoneInfoOptions.phoneNumber,\n            recaptchaToken\n          }\n        });\n        return response.phoneSessionInfo.sessionInfo;\n      } else {\n        _assert(session.type === \"signin\"\n        /* SIGN_IN */\n        , auth, \"internal-error\"\n        /* INTERNAL_ERROR */\n        );\n\n        const mfaEnrollmentId = ((_a = phoneInfoOptions.multiFactorHint) === null || _a === void 0 ? void 0 : _a.uid) || phoneInfoOptions.multiFactorUid;\n\n        _assert(mfaEnrollmentId, auth, \"missing-multi-factor-info\"\n        /* MISSING_MFA_INFO */\n        );\n\n        const response = await startSignInPhoneMfa(auth, {\n          mfaPendingCredential: session.credential,\n          mfaEnrollmentId,\n          phoneSignInInfo: {\n            recaptchaToken\n          }\n        });\n        return response.phoneResponseInfo.sessionInfo;\n      }\n    } else {\n      const {\n        sessionInfo\n      } = await sendPhoneVerificationCode(auth, {\n        phoneNumber: phoneInfoOptions.phoneNumber,\n        recaptchaToken\n      });\n      return sessionInfo;\n    }\n  } finally {\n    verifier._reset();\n  }\n}\n/**\r\n * Updates the user's phone number.\r\n *\r\n * @example\r\n * ```\r\n * // 'recaptcha-container' is the ID of an element in the DOM.\r\n * const applicationVerifier = new RecaptchaVerifier('recaptcha-container');\r\n * const provider = new PhoneAuthProvider(auth);\r\n * const verificationId = await provider.verifyPhoneNumber('+16505550101', applicationVerifier);\r\n * // Obtain the verificationCode from the user.\r\n * const phoneCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\r\n * await updatePhoneNumber(user, phoneCredential);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param credential - A credential authenticating the new phone number.\r\n *\r\n * @public\r\n */\n\n\nasync function updatePhoneNumber(user, credential) {\n  await _link$1((0, _util.getModularInstance)(user), credential);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Provider for generating an {@link PhoneAuthCredential}.\r\n *\r\n * @example\r\n * ```javascript\r\n * // 'recaptcha-container' is the ID of an element in the DOM.\r\n * const applicationVerifier = new RecaptchaVerifier('recaptcha-container');\r\n * const provider = new PhoneAuthProvider(auth);\r\n * const verificationId = await provider.verifyPhoneNumber('+16505550101', applicationVerifier);\r\n * // Obtain the verificationCode from the user.\r\n * const phoneCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\r\n * const userCredential = await signInWithCredential(auth, phoneCredential);\r\n * ```\r\n *\r\n * @public\r\n */\n\n\nclass PhoneAuthProvider {\n  /**\r\n   * @param auth - The Firebase {@link Auth} instance in which sign-ins should occur.\r\n   *\r\n   */\n  constructor(auth) {\n    /** Always set to {@link ProviderId}.PHONE. */\n    this.providerId = PhoneAuthProvider.PROVIDER_ID;\n    this.auth = _castAuth(auth);\n  }\n  /**\r\n   *\r\n   * Starts a phone number authentication flow by sending a verification code to the given phone\r\n   * number.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const provider = new PhoneAuthProvider(auth);\r\n   * const verificationId = await provider.verifyPhoneNumber(phoneNumber, applicationVerifier);\r\n   * // Obtain verificationCode from the user.\r\n   * const authCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\r\n   * const userCredential = await signInWithCredential(auth, authCredential);\r\n   * ```\r\n   *\r\n   * @example\r\n   * An alternative flow is provided using the `signInWithPhoneNumber` method.\r\n   * ```javascript\r\n   * const confirmationResult = signInWithPhoneNumber(auth, phoneNumber, applicationVerifier);\r\n   * // Obtain verificationCode from the user.\r\n   * const userCredential = confirmationResult.confirm(verificationCode);\r\n   * ```\r\n   *\r\n   * @param phoneInfoOptions - The user's {@link PhoneInfoOptions}. The phone number should be in\r\n   * E.164 format (e.g. +16505550101).\r\n   * @param applicationVerifier - For abuse prevention, this method also requires a\r\n   * {@link ApplicationVerifier}. This SDK includes a reCAPTCHA-based implementation,\r\n   * {@link RecaptchaVerifier}.\r\n   *\r\n   * @returns A Promise for a verification ID that can be passed to\r\n   * {@link PhoneAuthProvider.credential} to identify this flow..\r\n   */\n\n\n  verifyPhoneNumber(phoneOptions, applicationVerifier) {\n    return _verifyPhoneNumber(this.auth, phoneOptions, (0, _util.getModularInstance)(applicationVerifier));\n  }\n  /**\r\n   * Creates a phone auth credential, given the verification ID from\r\n   * {@link PhoneAuthProvider.verifyPhoneNumber} and the code that was sent to the user's\r\n   * mobile device.\r\n   *\r\n   * @example\r\n   * ```javascript\r\n   * const provider = new PhoneAuthProvider(auth);\r\n   * const verificationId = provider.verifyPhoneNumber(phoneNumber, applicationVerifier);\r\n   * // Obtain verificationCode from the user.\r\n   * const authCredential = PhoneAuthProvider.credential(verificationId, verificationCode);\r\n   * const userCredential = signInWithCredential(auth, authCredential);\r\n   * ```\r\n   *\r\n   * @example\r\n   * An alternative flow is provided using the `signInWithPhoneNumber` method.\r\n   * ```javascript\r\n   * const confirmationResult = await signInWithPhoneNumber(auth, phoneNumber, applicationVerifier);\r\n   * // Obtain verificationCode from the user.\r\n   * const userCredential = await confirmationResult.confirm(verificationCode);\r\n   * ```\r\n   *\r\n   * @param verificationId - The verification ID returned from {@link PhoneAuthProvider.verifyPhoneNumber}.\r\n   * @param verificationCode - The verification code sent to the user's mobile device.\r\n   *\r\n   * @returns The auth provider credential.\r\n   */\n\n\n  static credential(verificationId, verificationCode) {\n    return PhoneAuthCredential._fromVerification(verificationId, verificationCode);\n  }\n  /**\r\n   * Generates an {@link AuthCredential} from a {@link UserCredential}.\r\n   * @param userCredential - The user credential.\r\n   */\n\n\n  static credentialFromResult(userCredential) {\n    const credential = userCredential;\n    return PhoneAuthProvider.credentialFromTaggedObject(credential);\n  }\n  /**\r\n   * Returns an {@link AuthCredential} when passed an error.\r\n   *\r\n   * @remarks\r\n   *\r\n   * This method works for errors like\r\n   * `auth/account-exists-with-different-credentials`. This is useful for\r\n   * recovering when attempting to set a user's phone number but the number\r\n   * in question is already tied to another account. For example, the following\r\n   * code tries to update the current user's phone number, and if that\r\n   * fails, links the user with the account associated with that number:\r\n   *\r\n   * ```js\r\n   * const provider = new PhoneAuthProvider(auth);\r\n   * const verificationId = await provider.verifyPhoneNumber(number, verifier);\r\n   * try {\r\n   *   const code = ''; // Prompt the user for the verification code\r\n   *   await updatePhoneNumber(\r\n   *       auth.currentUser,\r\n   *       PhoneAuthProvider.credential(verificationId, code));\r\n   * } catch (e) {\r\n   *   if (e.code === 'auth/account-exists-with-different-credential') {\r\n   *     const cred = PhoneAuthProvider.credentialFromError(e);\r\n   *     await linkWithCredential(auth.currentUser, cred);\r\n   *   }\r\n   * }\r\n   *\r\n   * // At this point, auth.currentUser.phoneNumber === number.\r\n   * ```\r\n   *\r\n   * @param error - The error to generate a credential from.\r\n   */\n\n\n  static credentialFromError(error) {\n    return PhoneAuthProvider.credentialFromTaggedObject(error.customData || {});\n  }\n\n  static credentialFromTaggedObject({\n    _tokenResponse: tokenResponse\n  }) {\n    if (!tokenResponse) {\n      return null;\n    }\n\n    const {\n      phoneNumber,\n      temporaryProof\n    } = tokenResponse;\n\n    if (phoneNumber && temporaryProof) {\n      return PhoneAuthCredential._fromTokenResponse(phoneNumber, temporaryProof);\n    }\n\n    return null;\n  }\n\n}\n/** Always set to {@link ProviderId}.PHONE. */\n\n\nexports.P = PhoneAuthProvider;\nPhoneAuthProvider.PROVIDER_ID = \"phone\"\n/* PHONE */\n;\n/** Always set to {@link SignInMethod}.PHONE. */\n\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = \"phone\"\n/* PHONE */\n;\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Chooses a popup/redirect resolver to use. This prefers the override (which\r\n * is directly passed in), and falls back to the property set on the auth\r\n * object. If neither are available, this function errors w/ an argument error.\r\n */\n\nfunction _withDefaultResolver(auth, resolverOverride) {\n  if (resolverOverride) {\n    return _getInstance(resolverOverride);\n  }\n\n  _assert(auth._popupRedirectResolver, auth, \"argument-error\"\n  /* ARGUMENT_ERROR */\n  );\n\n  return auth._popupRedirectResolver;\n}\n/**\r\n * @license\r\n * Copyright 2019 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass IdpCredential extends AuthCredential {\n  constructor(params) {\n    super(\"custom\"\n    /* CUSTOM */\n    , \"custom\"\n    /* CUSTOM */\n    );\n    this.params = params;\n  }\n\n  _getIdTokenResponse(auth) {\n    return signInWithIdp(auth, this._buildIdpRequest());\n  }\n\n  _linkToIdToken(auth, idToken) {\n    return signInWithIdp(auth, this._buildIdpRequest(idToken));\n  }\n\n  _getReauthenticationResolver(auth) {\n    return signInWithIdp(auth, this._buildIdpRequest());\n  }\n\n  _buildIdpRequest(idToken) {\n    const request = {\n      requestUri: this.params.requestUri,\n      sessionId: this.params.sessionId,\n      postBody: this.params.postBody,\n      tenantId: this.params.tenantId,\n      pendingToken: this.params.pendingToken,\n      returnSecureToken: true,\n      returnIdpCredential: true\n    };\n\n    if (idToken) {\n      request.idToken = idToken;\n    }\n\n    return request;\n  }\n\n}\n\nfunction _signIn(params) {\n  return _signInWithCredential(params.auth, new IdpCredential(params), params.bypassAuthState);\n}\n\nfunction _reauth(params) {\n  const {\n    auth,\n    user\n  } = params;\n\n  _assert(user, auth, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  return _reauthenticate(user, new IdpCredential(params), params.bypassAuthState);\n}\n\nasync function _link(params) {\n  const {\n    auth,\n    user\n  } = params;\n\n  _assert(user, auth, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  return _link$1(user, new IdpCredential(params), params.bypassAuthState);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Popup event manager. Handles the popup's entire lifecycle; listens to auth\r\n * events\r\n */\n\n\nclass AbstractPopupRedirectOperation {\n  constructor(auth, filter, resolver, user, bypassAuthState = false) {\n    this.auth = auth;\n    this.resolver = resolver;\n    this.user = user;\n    this.bypassAuthState = bypassAuthState;\n    this.pendingPromise = null;\n    this.eventManager = null;\n    this.filter = Array.isArray(filter) ? filter : [filter];\n  }\n\n  execute() {\n    return new Promise(async (resolve, reject) => {\n      this.pendingPromise = {\n        resolve,\n        reject\n      };\n\n      try {\n        this.eventManager = await this.resolver._initialize(this.auth);\n        await this.onExecution();\n        this.eventManager.registerConsumer(this);\n      } catch (e) {\n        this.reject(e);\n      }\n    });\n  }\n\n  async onAuthEvent(event) {\n    const {\n      urlResponse,\n      sessionId,\n      postBody,\n      tenantId,\n      error,\n      type\n    } = event;\n\n    if (error) {\n      this.reject(error);\n      return;\n    }\n\n    const params = {\n      auth: this.auth,\n      requestUri: urlResponse,\n      sessionId: sessionId,\n      tenantId: tenantId || undefined,\n      postBody: postBody || undefined,\n      user: this.user,\n      bypassAuthState: this.bypassAuthState\n    };\n\n    try {\n      this.resolve(await this.getIdpTask(type)(params));\n    } catch (e) {\n      this.reject(e);\n    }\n  }\n\n  onError(error) {\n    this.reject(error);\n  }\n\n  getIdpTask(type) {\n    switch (type) {\n      case \"signInViaPopup\"\n      /* SIGN_IN_VIA_POPUP */\n      :\n      case \"signInViaRedirect\"\n      /* SIGN_IN_VIA_REDIRECT */\n      :\n        return _signIn;\n\n      case \"linkViaPopup\"\n      /* LINK_VIA_POPUP */\n      :\n      case \"linkViaRedirect\"\n      /* LINK_VIA_REDIRECT */\n      :\n        return _link;\n\n      case \"reauthViaPopup\"\n      /* REAUTH_VIA_POPUP */\n      :\n      case \"reauthViaRedirect\"\n      /* REAUTH_VIA_REDIRECT */\n      :\n        return _reauth;\n\n      default:\n        _fail(this.auth, \"internal-error\"\n        /* INTERNAL_ERROR */\n        );\n\n    }\n  }\n\n  resolve(cred) {\n    debugAssert(this.pendingPromise, 'Pending promise was never set');\n    this.pendingPromise.resolve(cred);\n    this.unregisterAndCleanUp();\n  }\n\n  reject(error) {\n    debugAssert(this.pendingPromise, 'Pending promise was never set');\n    this.pendingPromise.reject(error);\n    this.unregisterAndCleanUp();\n  }\n\n  unregisterAndCleanUp() {\n    if (this.eventManager) {\n      this.eventManager.unregisterConsumer(this);\n    }\n\n    this.pendingPromise = null;\n    this.cleanUp();\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst _POLL_WINDOW_CLOSE_TIMEOUT = new Delay(2000, 10000);\n/**\r\n * Authenticates a Firebase client using a popup-based OAuth authentication flow.\r\n *\r\n * @remarks\r\n * If succeeds, returns the signed in user along with the provider's credential. If sign in was\r\n * unsuccessful, returns an error object containing additional information about the error.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new FacebookAuthProvider();\r\n * const result = await signInWithPopup(auth, provider);\r\n *\r\n * // The signed-in user info.\r\n * const user = result.user;\r\n * // This gives you a Facebook Access Token.\r\n * const credential = provider.credentialFromResult(auth, result);\r\n * const token = credential.accessToken;\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\r\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n *\r\n * @public\r\n */\n\n\nasync function signInWithPopup(auth, provider, resolver) {\n  const authInternal = _castAuth(auth);\n\n  _assertInstanceOf(auth, provider, FederatedAuthProvider);\n\n  const resolverInternal = _withDefaultResolver(authInternal, resolver);\n\n  const action = new PopupOperation(authInternal, \"signInViaPopup\"\n  /* SIGN_IN_VIA_POPUP */\n  , provider, resolverInternal);\n  return action.executeNotNull();\n}\n/**\r\n * Reauthenticates the current user with the specified {@link OAuthProvider} using a pop-up based\r\n * OAuth flow.\r\n *\r\n * @remarks\r\n * If the reauthentication is successful, the returned result will contain the user and the\r\n * provider's credential.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a popup.\r\n * const provider = new FacebookAuthProvider();\r\n * const result = await signInWithPopup(auth, provider);\r\n * // Reauthenticate using a popup.\r\n * await reauthenticateWithPopup(result.user, provider);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\r\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n * @public\r\n */\n\n\nasync function reauthenticateWithPopup(user, provider, resolver) {\n  const userInternal = (0, _util.getModularInstance)(user);\n\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider);\n\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n\n  const action = new PopupOperation(userInternal.auth, \"reauthViaPopup\"\n  /* REAUTH_VIA_POPUP */\n  , provider, resolverInternal, userInternal);\n  return action.executeNotNull();\n}\n/**\r\n * Links the authenticated provider to the user account using a pop-up based OAuth flow.\r\n *\r\n * @remarks\r\n * If the linking is successful, the returned result will contain the user and the provider's credential.\r\n *\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using some other provider.\r\n * const result = await signInWithEmailAndPassword(auth, email, password);\r\n * // Link using a popup.\r\n * const provider = new FacebookAuthProvider();\r\n * await linkWithPopup(result.user, provider);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\r\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n * @public\r\n */\n\n\nasync function linkWithPopup(user, provider, resolver) {\n  const userInternal = (0, _util.getModularInstance)(user);\n\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider);\n\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n\n  const action = new PopupOperation(userInternal.auth, \"linkViaPopup\"\n  /* LINK_VIA_POPUP */\n  , provider, resolverInternal, userInternal);\n  return action.executeNotNull();\n}\n/**\r\n * Popup event manager. Handles the popup's entire lifecycle; listens to auth\r\n * events\r\n *\r\n */\n\n\nclass PopupOperation extends AbstractPopupRedirectOperation {\n  constructor(auth, filter, provider, resolver, user) {\n    super(auth, filter, resolver, user);\n    this.provider = provider;\n    this.authWindow = null;\n    this.pollId = null;\n\n    if (PopupOperation.currentPopupAction) {\n      PopupOperation.currentPopupAction.cancel();\n    }\n\n    PopupOperation.currentPopupAction = this;\n  }\n\n  async executeNotNull() {\n    const result = await this.execute();\n\n    _assert(result, this.auth, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    return result;\n  }\n\n  async onExecution() {\n    debugAssert(this.filter.length === 1, 'Popup operations only handle one event');\n\n    const eventId = _generateEventId();\n\n    this.authWindow = await this.resolver._openPopup(this.auth, this.provider, this.filter[0], // There's always one, see constructor\n    eventId);\n    this.authWindow.associatedEvent = eventId; // Check for web storage support and origin validation _after_ the popup is\n    // loaded. These operations are slow (~1 second or so) Rather than\n    // waiting on them before opening the window, optimistically open the popup\n    // and check for storage support at the same time. If storage support is\n    // not available, this will cause the whole thing to reject properly. It\n    // will also close the popup, but since the promise has already rejected,\n    // the popup closed by user poll will reject into the void.\n\n    this.resolver._originValidation(this.auth).catch(e => {\n      this.reject(e);\n    });\n\n    this.resolver._isIframeWebStorageSupported(this.auth, isSupported => {\n      if (!isSupported) {\n        this.reject(_createError(this.auth, \"web-storage-unsupported\"\n        /* WEB_STORAGE_UNSUPPORTED */\n        ));\n      }\n    }); // Handle user closure. Notice this does *not* use await\n\n\n    this.pollUserCancellation();\n  }\n\n  get eventId() {\n    var _a;\n\n    return ((_a = this.authWindow) === null || _a === void 0 ? void 0 : _a.associatedEvent) || null;\n  }\n\n  cancel() {\n    this.reject(_createError(this.auth, \"cancelled-popup-request\"\n    /* EXPIRED_POPUP_REQUEST */\n    ));\n  }\n\n  cleanUp() {\n    if (this.authWindow) {\n      this.authWindow.close();\n    }\n\n    if (this.pollId) {\n      window.clearTimeout(this.pollId);\n    }\n\n    this.authWindow = null;\n    this.pollId = null;\n    PopupOperation.currentPopupAction = null;\n  }\n\n  pollUserCancellation() {\n    const poll = () => {\n      var _a, _b;\n\n      if ((_b = (_a = this.authWindow) === null || _a === void 0 ? void 0 : _a.window) === null || _b === void 0 ? void 0 : _b.closed) {\n        // Make sure that there is sufficient time for whatever action to\n        // complete. The window could have closed but the sign in network\n        // call could still be in flight.\n        this.pollId = window.setTimeout(() => {\n          this.pollId = null;\n          this.reject(_createError(this.auth, \"popup-closed-by-user\"\n          /* POPUP_CLOSED_BY_USER */\n          ));\n        }, 2000\n        /* AUTH_EVENT */\n        );\n        return;\n      }\n\n      this.pollId = window.setTimeout(poll, _POLL_WINDOW_CLOSE_TIMEOUT.get());\n    };\n\n    poll();\n  }\n\n} // Only one popup is ever shown at once. The lifecycle of the current popup\n// can be managed / cancelled by the constructor.\n\n\nPopupOperation.currentPopupAction = null;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nconst PENDING_REDIRECT_KEY = 'pendingRedirect'; // We only get one redirect outcome for any one auth, so just store it\n// in here.\n\nconst redirectOutcomeMap = new Map();\n\nclass RedirectAction extends AbstractPopupRedirectOperation {\n  constructor(auth, resolver, bypassAuthState = false) {\n    super(auth, [\"signInViaRedirect\"\n    /* SIGN_IN_VIA_REDIRECT */\n    , \"linkViaRedirect\"\n    /* LINK_VIA_REDIRECT */\n    , \"reauthViaRedirect\"\n    /* REAUTH_VIA_REDIRECT */\n    , \"unknown\"\n    /* UNKNOWN */\n    ], resolver, undefined, bypassAuthState);\n    this.eventId = null;\n  }\n  /**\r\n   * Override the execute function; if we already have a redirect result, then\r\n   * just return it.\r\n   */\n\n\n  async execute() {\n    let readyOutcome = redirectOutcomeMap.get(this.auth._key());\n\n    if (!readyOutcome) {\n      try {\n        const hasPendingRedirect = await _getAndClearPendingRedirectStatus(this.resolver, this.auth);\n        const result = hasPendingRedirect ? await super.execute() : null;\n\n        readyOutcome = () => Promise.resolve(result);\n      } catch (e) {\n        readyOutcome = () => Promise.reject(e);\n      }\n\n      redirectOutcomeMap.set(this.auth._key(), readyOutcome);\n    } // If we're not bypassing auth state, the ready outcome should be set to\n    // null.\n\n\n    if (!this.bypassAuthState) {\n      redirectOutcomeMap.set(this.auth._key(), () => Promise.resolve(null));\n    }\n\n    return readyOutcome();\n  }\n\n  async onAuthEvent(event) {\n    if (event.type === \"signInViaRedirect\"\n    /* SIGN_IN_VIA_REDIRECT */\n    ) {\n      return super.onAuthEvent(event);\n    } else if (event.type === \"unknown\"\n    /* UNKNOWN */\n    ) {\n      // This is a sentinel value indicating there's no pending redirect\n      this.resolve(null);\n      return;\n    }\n\n    if (event.eventId) {\n      const user = await this.auth._redirectUserForId(event.eventId);\n\n      if (user) {\n        this.user = user;\n        return super.onAuthEvent(event);\n      } else {\n        this.resolve(null);\n      }\n    }\n  }\n\n  async onExecution() {}\n\n  cleanUp() {}\n\n}\n\nasync function _getAndClearPendingRedirectStatus(resolver, auth) {\n  const key = pendingRedirectKey(auth);\n  const persistence = resolverPersistence(resolver);\n\n  if (!(await persistence._isAvailable())) {\n    return false;\n  }\n\n  const hasPendingRedirect = (await persistence._get(key)) === 'true';\n  await persistence._remove(key);\n  return hasPendingRedirect;\n}\n\nasync function _setPendingRedirectStatus(resolver, auth) {\n  return resolverPersistence(resolver)._set(pendingRedirectKey(auth), 'true');\n}\n\nfunction _clearRedirectOutcomes() {\n  redirectOutcomeMap.clear();\n}\n\nfunction resolverPersistence(resolver) {\n  return _getInstance(resolver._redirectPersistence);\n}\n\nfunction pendingRedirectKey(auth) {\n  return _persistenceKeyName(PENDING_REDIRECT_KEY, auth.config.apiKey, auth.name);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Authenticates a Firebase client using a full-page redirect flow.\r\n *\r\n * @remarks\r\n * To handle the results and errors for this operation, refer to {@link getRedirectResult}.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new FacebookAuthProvider();\r\n * // You can add additional scopes to the provider:\r\n * provider.addScope('user_birthday');\r\n * // Start a sign in process for an unauthenticated user.\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a Facebook Access Token.\r\n *   const credential = provider.credentialFromResult(auth, result);\r\n *   const token = credential.accessToken;\r\n * }\r\n * // As this API can be used for sign-in, linking and reauthentication,\r\n * // check the operationType to determine what triggered this redirect\r\n * // operation.\r\n * const operationType = result.operationType;\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\r\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n * @public\r\n */\n\n\nfunction signInWithRedirect(auth, provider, resolver) {\n  return _signInWithRedirect(auth, provider, resolver);\n}\n\nasync function _signInWithRedirect(auth, provider, resolver) {\n  const authInternal = _castAuth(auth);\n\n  _assertInstanceOf(auth, provider, FederatedAuthProvider);\n\n  const resolverInternal = _withDefaultResolver(authInternal, resolver);\n\n  await _setPendingRedirectStatus(resolverInternal, authInternal);\n  return resolverInternal._openRedirect(authInternal, provider, \"signInViaRedirect\"\n  /* SIGN_IN_VIA_REDIRECT */\n  );\n}\n/**\r\n * Reauthenticates the current user with the specified {@link OAuthProvider} using a full-page redirect flow.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new FacebookAuthProvider();\r\n * const result = await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * // Link using a redirect.\r\n * await linkWithRedirect(result.user, provider);\r\n * // This will again trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\r\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n * @public\r\n */\n\n\nfunction reauthenticateWithRedirect(user, provider, resolver) {\n  return _reauthenticateWithRedirect(user, provider, resolver);\n}\n\nasync function _reauthenticateWithRedirect(user, provider, resolver) {\n  const userInternal = (0, _util.getModularInstance)(user);\n\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider); // Allow the resolver to error before persisting the redirect user\n\n\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n\n  await _setPendingRedirectStatus(resolverInternal, userInternal.auth);\n  const eventId = await prepareUserForRedirect(userInternal);\n  return resolverInternal._openRedirect(userInternal.auth, provider, \"reauthViaRedirect\"\n  /* REAUTH_VIA_REDIRECT */\n  , eventId);\n}\n/**\r\n * Links the {@link OAuthProvider} to the user account using a full-page redirect flow.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using some other provider.\r\n * const result = await signInWithEmailAndPassword(auth, email, password);\r\n * // Link using a redirect.\r\n * const provider = new FacebookAuthProvider();\r\n * await linkWithRedirect(result.user, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * ```\r\n *\r\n * @param user - The user.\r\n * @param provider - The provider to authenticate. The provider has to be an {@link OAuthProvider}.\r\n * Non-OAuth providers like {@link EmailAuthProvider} will throw an error.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n *\r\n * @public\r\n */\n\n\nfunction linkWithRedirect(user, provider, resolver) {\n  return _linkWithRedirect(user, provider, resolver);\n}\n\nasync function _linkWithRedirect(user, provider, resolver) {\n  const userInternal = (0, _util.getModularInstance)(user);\n\n  _assertInstanceOf(userInternal.auth, provider, FederatedAuthProvider); // Allow the resolver to error before persisting the redirect user\n\n\n  const resolverInternal = _withDefaultResolver(userInternal.auth, resolver);\n\n  await _assertLinkedStatus(false, userInternal, provider.providerId);\n  await _setPendingRedirectStatus(resolverInternal, userInternal.auth);\n  const eventId = await prepareUserForRedirect(userInternal);\n  return resolverInternal._openRedirect(userInternal.auth, provider, \"linkViaRedirect\"\n  /* LINK_VIA_REDIRECT */\n  , eventId);\n}\n/**\r\n * Returns a {@link UserCredential} from the redirect-based sign-in flow.\r\n *\r\n * @remarks\r\n * If sign-in succeeded, returns the signed in user. If sign-in was unsuccessful, fails with an\r\n * error. If no redirect operation was called, returns a {@link UserCredential}\r\n * with a null `user`.\r\n *\r\n * @example\r\n * ```javascript\r\n * // Sign in using a redirect.\r\n * const provider = new FacebookAuthProvider();\r\n * // You can add additional scopes to the provider:\r\n * provider.addScope('user_birthday');\r\n * // Start a sign in process for an unauthenticated user.\r\n * await signInWithRedirect(auth, provider);\r\n * // This will trigger a full page redirect away from your app\r\n *\r\n * // After returning from the redirect when your app initializes you can obtain the result\r\n * const result = await getRedirectResult(auth);\r\n * if (result) {\r\n *   // This is the signed-in user\r\n *   const user = result.user;\r\n *   // This gives you a Facebook Access Token.\r\n *   const credential = provider.credentialFromResult(auth, result);\r\n *   const token = credential.accessToken;\r\n * }\r\n * // As this API can be used for sign-in, linking and reauthentication,\r\n * // check the operationType to determine what triggered this redirect\r\n * // operation.\r\n * const operationType = result.operationType;\r\n * ```\r\n *\r\n * @param auth - The {@link Auth} instance.\r\n * @param resolver - An instance of {@link PopupRedirectResolver}, optional\r\n * if already supplied to {@link initializeAuth} or provided by {@link getAuth}.\r\n *\r\n * @public\r\n */\n\n\nasync function getRedirectResult(auth, resolver) {\n  await _castAuth(auth)._initializationPromise;\n  return _getRedirectResult(auth, resolver, false);\n}\n\nasync function _getRedirectResult(auth, resolverExtern, bypassAuthState = false) {\n  const authInternal = _castAuth(auth);\n\n  const resolver = _withDefaultResolver(authInternal, resolverExtern);\n\n  const action = new RedirectAction(authInternal, resolver, bypassAuthState);\n  const result = await action.execute();\n\n  if (result && !bypassAuthState) {\n    delete result.user._redirectEventId;\n    await authInternal._persistUserIfCurrent(result.user);\n    await authInternal._setRedirectUser(null, resolverExtern);\n  }\n\n  return result;\n}\n\nasync function prepareUserForRedirect(user) {\n  const eventId = _generateEventId(`${user.uid}:::`);\n\n  user._redirectEventId = eventId;\n  await user.auth._setRedirectUser(user);\n  await user.auth._persistUserIfCurrent(user);\n  return eventId;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n// The amount of time to store the UIDs of seen events; this is\n// set to 10 min by default\n\n\nconst EVENT_DUPLICATION_CACHE_DURATION_MS = 10 * 60 * 1000;\n\nclass AuthEventManager {\n  constructor(auth) {\n    this.auth = auth;\n    this.cachedEventUids = new Set();\n    this.consumers = new Set();\n    this.queuedRedirectEvent = null;\n    this.hasHandledPotentialRedirect = false;\n    this.lastProcessedEventTime = Date.now();\n  }\n\n  registerConsumer(authEventConsumer) {\n    this.consumers.add(authEventConsumer);\n\n    if (this.queuedRedirectEvent && this.isEventForConsumer(this.queuedRedirectEvent, authEventConsumer)) {\n      this.sendToConsumer(this.queuedRedirectEvent, authEventConsumer);\n      this.saveEventToCache(this.queuedRedirectEvent);\n      this.queuedRedirectEvent = null;\n    }\n  }\n\n  unregisterConsumer(authEventConsumer) {\n    this.consumers.delete(authEventConsumer);\n  }\n\n  onEvent(event) {\n    // Check if the event has already been handled\n    if (this.hasEventBeenHandled(event)) {\n      return false;\n    }\n\n    let handled = false;\n    this.consumers.forEach(consumer => {\n      if (this.isEventForConsumer(event, consumer)) {\n        handled = true;\n        this.sendToConsumer(event, consumer);\n        this.saveEventToCache(event);\n      }\n    });\n\n    if (this.hasHandledPotentialRedirect || !isRedirectEvent(event)) {\n      // If we've already seen a redirect before, or this is a popup event,\n      // bail now\n      return handled;\n    }\n\n    this.hasHandledPotentialRedirect = true; // If the redirect wasn't handled, hang on to it\n\n    if (!handled) {\n      this.queuedRedirectEvent = event;\n      handled = true;\n    }\n\n    return handled;\n  }\n\n  sendToConsumer(event, consumer) {\n    var _a;\n\n    if (event.error && !isNullRedirectEvent(event)) {\n      const code = ((_a = event.error.code) === null || _a === void 0 ? void 0 : _a.split('auth/')[1]) || \"internal-error\"\n      /* INTERNAL_ERROR */\n      ;\n      consumer.onError(_createError(this.auth, code));\n    } else {\n      consumer.onAuthEvent(event);\n    }\n  }\n\n  isEventForConsumer(event, consumer) {\n    const eventIdMatches = consumer.eventId === null || !!event.eventId && event.eventId === consumer.eventId;\n    return consumer.filter.includes(event.type) && eventIdMatches;\n  }\n\n  hasEventBeenHandled(event) {\n    if (Date.now() - this.lastProcessedEventTime >= EVENT_DUPLICATION_CACHE_DURATION_MS) {\n      this.cachedEventUids.clear();\n    }\n\n    return this.cachedEventUids.has(eventUid(event));\n  }\n\n  saveEventToCache(event) {\n    this.cachedEventUids.add(eventUid(event));\n    this.lastProcessedEventTime = Date.now();\n  }\n\n}\n\nexports.az = AuthEventManager;\n\nfunction eventUid(e) {\n  return [e.type, e.eventId, e.sessionId, e.tenantId].filter(v => v).join('-');\n}\n\nfunction isNullRedirectEvent({\n  type,\n  error\n}) {\n  return type === \"unknown\"\n  /* UNKNOWN */\n  && (error === null || error === void 0 ? void 0 : error.code) === `auth/${\"no-auth-event\"\n  /* NO_AUTH_EVENT */\n  }`;\n}\n\nfunction isRedirectEvent(event) {\n  switch (event.type) {\n    case \"signInViaRedirect\"\n    /* SIGN_IN_VIA_REDIRECT */\n    :\n    case \"linkViaRedirect\"\n    /* LINK_VIA_REDIRECT */\n    :\n    case \"reauthViaRedirect\"\n    /* REAUTH_VIA_REDIRECT */\n    :\n      return true;\n\n    case \"unknown\"\n    /* UNKNOWN */\n    :\n      return isNullRedirectEvent(event);\n\n    default:\n      return false;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nasync function _getProjectConfig(auth, request = {}) {\n  return _performApiRequest(auth, \"GET\"\n  /* GET */\n  , \"/v1/projects\"\n  /* GET_PROJECT_CONFIG */\n  , request);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst IP_ADDRESS_REGEX = /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/;\nconst HTTP_REGEX = /^https?/;\n\nasync function _validateOrigin(auth) {\n  // Skip origin validation if we are in an emulated environment\n  if (auth.config.emulator) {\n    return;\n  }\n\n  const {\n    authorizedDomains\n  } = await _getProjectConfig(auth);\n\n  for (const domain of authorizedDomains) {\n    try {\n      if (matchDomain(domain)) {\n        return;\n      }\n    } catch (_a) {// Do nothing if there's a URL error; just continue searching\n    }\n  } // In the old SDK, this error also provides helpful messages.\n\n\n  _fail(auth, \"unauthorized-domain\"\n  /* INVALID_ORIGIN */\n  );\n}\n\nfunction matchDomain(expected) {\n  const currentUrl = _getCurrentUrl();\n\n  const {\n    protocol,\n    hostname\n  } = new URL(currentUrl);\n\n  if (expected.startsWith('chrome-extension://')) {\n    const ceUrl = new URL(expected);\n\n    if (ceUrl.hostname === '' && hostname === '') {\n      // For some reason we're not parsing chrome URLs properly\n      return protocol === 'chrome-extension:' && expected.replace('chrome-extension://', '') === currentUrl.replace('chrome-extension://', '');\n    }\n\n    return protocol === 'chrome-extension:' && ceUrl.hostname === hostname;\n  }\n\n  if (!HTTP_REGEX.test(protocol)) {\n    return false;\n  }\n\n  if (IP_ADDRESS_REGEX.test(expected)) {\n    // The domain has to be exactly equal to the pattern, as an IP domain will\n    // only contain the IP, no extra character.\n    return hostname === expected;\n  } // Dots in pattern should be escaped.\n\n\n  const escapedDomainPattern = expected.replace(/\\./g, '\\\\.'); // Non ip address domains.\n  // domain.com = *.domain.com OR domain.com\n\n  const re = new RegExp('^(.+\\\\.' + escapedDomainPattern + '|' + escapedDomainPattern + ')$', 'i');\n  return re.test(hostname);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst NETWORK_TIMEOUT = new Delay(30000, 60000);\n/**\r\n * Reset unlaoded GApi modules. If gapi.load fails due to a network error,\r\n * it will stop working after a retrial. This is a hack to fix this issue.\r\n */\n\nfunction resetUnloadedGapiModules() {\n  // Clear last failed gapi.load state to force next gapi.load to first\n  // load the failed gapi.iframes module.\n  // Get gapix.beacon context.\n  const beacon = _window().___jsl; // Get current hint.\n\n\n  if (beacon === null || beacon === void 0 ? void 0 : beacon.H) {\n    // Get gapi hint.\n    for (const hint of Object.keys(beacon.H)) {\n      // Requested modules.\n      beacon.H[hint].r = beacon.H[hint].r || []; // Loaded modules.\n\n      beacon.H[hint].L = beacon.H[hint].L || []; // Set requested modules to a copy of the loaded modules.\n\n      beacon.H[hint].r = [...beacon.H[hint].L]; // Clear pending callbacks.\n\n      if (beacon.CP) {\n        for (let i = 0; i < beacon.CP.length; i++) {\n          // Remove all failed pending callbacks.\n          beacon.CP[i] = null;\n        }\n      }\n    }\n  }\n}\n\nfunction loadGapi(auth) {\n  return new Promise((resolve, reject) => {\n    var _a, _b, _c; // Function to run when gapi.load is ready.\n\n\n    function loadGapiIframe() {\n      // The developer may have tried to previously run gapi.load and failed.\n      // Run this to fix that.\n      resetUnloadedGapiModules();\n      gapi.load('gapi.iframes', {\n        callback: () => {\n          resolve(gapi.iframes.getContext());\n        },\n        ontimeout: () => {\n          // The above reset may be sufficient, but having this reset after\n          // failure ensures that if the developer calls gapi.load after the\n          // connection is re-established and before another attempt to embed\n          // the iframe, it would work and would not be broken because of our\n          // failed attempt.\n          // Timeout when gapi.iframes.Iframe not loaded.\n          resetUnloadedGapiModules();\n          reject(_createError(auth, \"network-request-failed\"\n          /* NETWORK_REQUEST_FAILED */\n          ));\n        },\n        timeout: NETWORK_TIMEOUT.get()\n      });\n    }\n\n    if ((_b = (_a = _window().gapi) === null || _a === void 0 ? void 0 : _a.iframes) === null || _b === void 0 ? void 0 : _b.Iframe) {\n      // If gapi.iframes.Iframe available, resolve.\n      resolve(gapi.iframes.getContext());\n    } else if (!!((_c = _window().gapi) === null || _c === void 0 ? void 0 : _c.load)) {\n      // Gapi loader ready, load gapi.iframes.\n      loadGapiIframe();\n    } else {\n      // Create a new iframe callback when this is called so as not to overwrite\n      // any previous defined callback. This happens if this method is called\n      // multiple times in parallel and could result in the later callback\n      // overwriting the previous one. This would end up with a iframe\n      // timeout.\n      const cbName = _generateCallbackName('iframefcb'); // GApi loader not available, dynamically load platform.js.\n\n\n      _window()[cbName] = () => {\n        // GApi loader should be ready.\n        if (!!gapi.load) {\n          loadGapiIframe();\n        } else {\n          // Gapi loader failed, throw error.\n          reject(_createError(auth, \"network-request-failed\"\n          /* NETWORK_REQUEST_FAILED */\n          ));\n        }\n      }; // Load GApi loader.\n\n\n      return _loadJS(`https://apis.google.com/js/api.js?onload=${cbName}`).catch(e => reject(e));\n    }\n  }).catch(error => {\n    // Reset cached promise to allow for retrial.\n    cachedGApiLoader = null;\n    throw error;\n  });\n}\n\nlet cachedGApiLoader = null;\n\nfunction _loadGapi(auth) {\n  cachedGApiLoader = cachedGApiLoader || loadGapi(auth);\n  return cachedGApiLoader;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst PING_TIMEOUT = new Delay(5000, 15000);\nconst IFRAME_PATH = '__/auth/iframe';\nconst EMULATED_IFRAME_PATH = 'emulator/auth/iframe';\nconst IFRAME_ATTRIBUTES = {\n  style: {\n    position: 'absolute',\n    top: '-100px',\n    width: '1px',\n    height: '1px'\n  },\n  'aria-hidden': 'true',\n  tabindex: '-1'\n}; // Map from apiHost to endpoint ID for passing into iframe. In current SDK, apiHost can be set to\n// anything (not from a list of endpoints with IDs as in legacy), so this is the closest we can get.\n\nconst EID_FROM_APIHOST = new Map([[\"identitytoolkit.googleapis.com\"\n/* API_HOST */\n, 'p'], ['staging-identitytoolkit.sandbox.googleapis.com', 's'], ['test-identitytoolkit.sandbox.googleapis.com', 't'] // test\n]);\n\nfunction getIframeUrl(auth) {\n  const config = auth.config;\n\n  _assert(config.authDomain, auth, \"auth-domain-config-required\"\n  /* MISSING_AUTH_DOMAIN */\n  );\n\n  const url = config.emulator ? _emulatorUrl(config, EMULATED_IFRAME_PATH) : `https://${auth.config.authDomain}/${IFRAME_PATH}`;\n  const params = {\n    apiKey: config.apiKey,\n    appName: auth.name,\n    v: _app.SDK_VERSION\n  };\n  const eid = EID_FROM_APIHOST.get(auth.config.apiHost);\n\n  if (eid) {\n    params.eid = eid;\n  }\n\n  const frameworks = auth._getFrameworks();\n\n  if (frameworks.length) {\n    params.fw = frameworks.join(',');\n  }\n\n  return `${url}?${(0, _util.querystring)(params).slice(1)}`;\n}\n\nasync function _openIframe(auth) {\n  const context = await _loadGapi(auth);\n\n  const gapi = _window().gapi;\n\n  _assert(gapi, auth, \"internal-error\"\n  /* INTERNAL_ERROR */\n  );\n\n  return context.open({\n    where: document.body,\n    url: getIframeUrl(auth),\n    messageHandlersFilter: gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER,\n    attributes: IFRAME_ATTRIBUTES,\n    dontclear: true\n  }, iframe => new Promise(async (resolve, reject) => {\n    await iframe.restyle({\n      // Prevent iframe from closing on mouse out.\n      setHideOnLeave: false\n    });\n\n    const networkError = _createError(auth, \"network-request-failed\"\n    /* NETWORK_REQUEST_FAILED */\n    ); // Confirm iframe is correctly loaded.\n    // To fallback on failure, set a timeout.\n\n\n    const networkErrorTimer = _window().setTimeout(() => {\n      reject(networkError);\n    }, PING_TIMEOUT.get()); // Clear timer and resolve pending iframe ready promise.\n\n\n    function clearTimerAndResolve() {\n      _window().clearTimeout(networkErrorTimer);\n\n      resolve(iframe);\n    } // This returns an IThenable. However the reject part does not call\n    // when the iframe is not loaded.\n\n\n    iframe.ping(clearTimerAndResolve).then(clearTimerAndResolve, () => {\n      reject(networkError);\n    });\n  }));\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst BASE_POPUP_OPTIONS = {\n  location: 'yes',\n  resizable: 'yes',\n  statusbar: 'yes',\n  toolbar: 'no'\n};\nconst DEFAULT_WIDTH = 500;\nconst DEFAULT_HEIGHT = 600;\nconst TARGET_BLANK = '_blank';\nconst FIREFOX_EMPTY_URL = 'http://localhost';\n\nclass AuthPopup {\n  constructor(window) {\n    this.window = window;\n    this.associatedEvent = null;\n  }\n\n  close() {\n    if (this.window) {\n      try {\n        this.window.close();\n      } catch (e) {}\n    }\n  }\n\n}\n\nexports.aH = AuthPopup;\n\nfunction _open(auth, url, name, width = DEFAULT_WIDTH, height = DEFAULT_HEIGHT) {\n  const top = Math.max((window.screen.availHeight - height) / 2, 0).toString();\n  const left = Math.max((window.screen.availWidth - width) / 2, 0).toString();\n  let target = '';\n  const options = Object.assign(Object.assign({}, BASE_POPUP_OPTIONS), {\n    width: width.toString(),\n    height: height.toString(),\n    top,\n    left\n  }); // Chrome iOS 7 and 8 is returning an undefined popup win when target is\n  // specified, even though the popup is not necessarily blocked.\n\n  const ua = (0, _util.getUA)().toLowerCase();\n\n  if (name) {\n    target = _isChromeIOS(ua) ? TARGET_BLANK : name;\n  }\n\n  if (_isFirefox(ua)) {\n    // Firefox complains when invalid URLs are popped out. Hacky way to bypass.\n    url = url || FIREFOX_EMPTY_URL; // Firefox disables by default scrolling on popup windows, which can create\n    // issues when the user has many Google accounts, for instance.\n\n    options.scrollbars = 'yes';\n  }\n\n  const optionsString = Object.entries(options).reduce((accum, [key, value]) => `${accum}${key}=${value},`, '');\n\n  if (_isIOSStandalone(ua) && target !== '_self') {\n    openAsNewWindowIOS(url || '', target);\n    return new AuthPopup(null);\n  } // about:blank getting sanitized causing browsers like IE/Edge to display\n  // brief error message before redirecting to handler.\n\n\n  const newWin = window.open(url || '', target, optionsString);\n\n  _assert(newWin, auth, \"popup-blocked\"\n  /* POPUP_BLOCKED */\n  ); // Flaky on IE edge, encapsulate with a try and catch.\n\n\n  try {\n    newWin.focus();\n  } catch (e) {}\n\n  return new AuthPopup(newWin);\n}\n\nfunction openAsNewWindowIOS(url, target) {\n  const el = document.createElement('a');\n  el.href = url;\n  el.target = target;\n  const click = document.createEvent('MouseEvent');\n  click.initMouseEvent('click', true, true, window, 1, 0, 0, 0, 0, false, false, false, false, 1, null);\n  el.dispatchEvent(click);\n}\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * URL for Authentication widget which will initiate the OAuth handshake\r\n *\r\n * @internal\r\n */\n\n\nconst WIDGET_PATH = '__/auth/handler';\n/**\r\n * URL for emulated environment\r\n *\r\n * @internal\r\n */\n\nconst EMULATOR_WIDGET_PATH = 'emulator/auth/handler';\n\nfunction _getRedirectUrl(auth, provider, authType, redirectUrl, eventId, additionalParams) {\n  _assert(auth.config.authDomain, auth, \"auth-domain-config-required\"\n  /* MISSING_AUTH_DOMAIN */\n  );\n\n  _assert(auth.config.apiKey, auth, \"invalid-api-key\"\n  /* INVALID_API_KEY */\n  );\n\n  const params = {\n    apiKey: auth.config.apiKey,\n    appName: auth.name,\n    authType,\n    redirectUrl,\n    v: _app.SDK_VERSION,\n    eventId\n  };\n\n  if (provider instanceof FederatedAuthProvider) {\n    provider.setDefaultLanguage(auth.languageCode);\n    params.providerId = provider.providerId || '';\n\n    if (!(0, _util.isEmpty)(provider.getCustomParameters())) {\n      params.customParameters = JSON.stringify(provider.getCustomParameters());\n    } // TODO set additionalParams from the provider as well?\n\n\n    for (const [key, value] of Object.entries(additionalParams || {})) {\n      params[key] = value;\n    }\n  }\n\n  if (provider instanceof BaseOAuthProvider) {\n    const scopes = provider.getScopes().filter(scope => scope !== '');\n\n    if (scopes.length > 0) {\n      params.scopes = scopes.join(',');\n    }\n  }\n\n  if (auth.tenantId) {\n    params.tid = auth.tenantId;\n  } // TODO: maybe set eid as endipointId\n  // TODO: maybe set fw as Frameworks.join(\",\")\n\n\n  const paramsDict = params;\n\n  for (const key of Object.keys(paramsDict)) {\n    if (paramsDict[key] === undefined) {\n      delete paramsDict[key];\n    }\n  }\n\n  return `${getHandlerBase(auth)}?${(0, _util.querystring)(paramsDict).slice(1)}`;\n}\n\nfunction getHandlerBase({\n  config\n}) {\n  if (!config.emulator) {\n    return `https://${config.authDomain}/${WIDGET_PATH}`;\n  }\n\n  return _emulatorUrl(config, EMULATOR_WIDGET_PATH);\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * The special web storage event\r\n *\r\n */\n\n\nconst WEB_STORAGE_SUPPORT_KEY = 'webStorageSupport';\n\nclass BrowserPopupRedirectResolver {\n  constructor() {\n    this.eventManagers = {};\n    this.iframes = {};\n    this.originValidationPromises = {};\n    this._redirectPersistence = browserSessionPersistence;\n    this._completeRedirectFn = _getRedirectResult;\n  } // Wrapping in async even though we don't await anywhere in order\n  // to make sure errors are raised as promise rejections\n\n\n  async _openPopup(auth, provider, authType, eventId) {\n    var _a;\n\n    debugAssert((_a = this.eventManagers[auth._key()]) === null || _a === void 0 ? void 0 : _a.manager, '_initialize() not called before _openPopup()');\n\n    const url = _getRedirectUrl(auth, provider, authType, _getCurrentUrl(), eventId);\n\n    return _open(auth, url, _generateEventId());\n  }\n\n  async _openRedirect(auth, provider, authType, eventId) {\n    await this._originValidation(auth);\n\n    _setWindowLocation(_getRedirectUrl(auth, provider, authType, _getCurrentUrl(), eventId));\n\n    return new Promise(() => {});\n  }\n\n  _initialize(auth) {\n    const key = auth._key();\n\n    if (this.eventManagers[key]) {\n      const {\n        manager,\n        promise\n      } = this.eventManagers[key];\n\n      if (manager) {\n        return Promise.resolve(manager);\n      } else {\n        debugAssert(promise, 'If manager is not set, promise should be');\n        return promise;\n      }\n    }\n\n    const promise = this.initAndGetManager(auth);\n    this.eventManagers[key] = {\n      promise\n    }; // If the promise is rejected, the key should be removed so that the\n    // operation can be retried later.\n\n    promise.catch(() => {\n      delete this.eventManagers[key];\n    });\n    return promise;\n  }\n\n  async initAndGetManager(auth) {\n    const iframe = await _openIframe(auth);\n    const manager = new AuthEventManager(auth);\n    iframe.register('authEvent', iframeEvent => {\n      _assert(iframeEvent === null || iframeEvent === void 0 ? void 0 : iframeEvent.authEvent, auth, \"invalid-auth-event\"\n      /* INVALID_AUTH_EVENT */\n      ); // TODO: Consider splitting redirect and popup events earlier on\n\n\n      const handled = manager.onEvent(iframeEvent.authEvent);\n      return {\n        status: handled ? \"ACK\"\n        /* ACK */\n        : \"ERROR\"\n        /* ERROR */\n\n      };\n    }, gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER);\n    this.eventManagers[auth._key()] = {\n      manager\n    };\n    this.iframes[auth._key()] = iframe;\n    return manager;\n  }\n\n  _isIframeWebStorageSupported(auth, cb) {\n    const iframe = this.iframes[auth._key()];\n\n    iframe.send(WEB_STORAGE_SUPPORT_KEY, {\n      type: WEB_STORAGE_SUPPORT_KEY\n    }, result => {\n      var _a;\n\n      const isSupported = (_a = result === null || result === void 0 ? void 0 : result[0]) === null || _a === void 0 ? void 0 : _a[WEB_STORAGE_SUPPORT_KEY];\n\n      if (isSupported !== undefined) {\n        cb(!!isSupported);\n      }\n\n      _fail(auth, \"internal-error\"\n      /* INTERNAL_ERROR */\n      );\n    }, gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER);\n  }\n\n  _originValidation(auth) {\n    const key = auth._key();\n\n    if (!this.originValidationPromises[key]) {\n      this.originValidationPromises[key] = _validateOrigin(auth);\n    }\n\n    return this.originValidationPromises[key];\n  }\n\n  get _shouldInitProactively() {\n    // Mobile browsers and Safari need to optimistically initialize\n    return _isMobileBrowser() || _isSafari() || _isIOS();\n  }\n\n}\n/**\r\n * An implementation of {@link PopupRedirectResolver} suitable for browser\r\n * based applications.\r\n *\r\n * @public\r\n */\n\n\nconst browserPopupRedirectResolver = BrowserPopupRedirectResolver;\nexports.k = browserPopupRedirectResolver;\n\nclass MultiFactorAssertionImpl {\n  constructor(factorId) {\n    this.factorId = factorId;\n  }\n\n  _process(auth, session, displayName) {\n    switch (session.type) {\n      case \"enroll\"\n      /* ENROLL */\n      :\n        return this._finalizeEnroll(auth, session.credential, displayName);\n\n      case \"signin\"\n      /* SIGN_IN */\n      :\n        return this._finalizeSignIn(auth, session.credential);\n\n      default:\n        return debugFail('unexpected MultiFactorSessionType');\n    }\n  }\n\n}\n/**\r\n * {@inheritdoc PhoneMultiFactorAssertion}\r\n *\r\n * @public\r\n */\n\n\nclass PhoneMultiFactorAssertionImpl extends MultiFactorAssertionImpl {\n  constructor(credential) {\n    super(\"phone\"\n    /* PHONE */\n    );\n    this.credential = credential;\n  }\n  /** @internal */\n\n\n  static _fromCredential(credential) {\n    return new PhoneMultiFactorAssertionImpl(credential);\n  }\n  /** @internal */\n\n\n  _finalizeEnroll(auth, idToken, displayName) {\n    return finalizeEnrollPhoneMfa(auth, {\n      idToken,\n      displayName,\n      phoneVerificationInfo: this.credential._makeVerificationRequest()\n    });\n  }\n  /** @internal */\n\n\n  _finalizeSignIn(auth, mfaPendingCredential) {\n    return finalizeSignInPhoneMfa(auth, {\n      mfaPendingCredential,\n      phoneVerificationInfo: this.credential._makeVerificationRequest()\n    });\n  }\n\n}\n/**\r\n * Provider for generating a {@link PhoneMultiFactorAssertion}.\r\n *\r\n * @public\r\n */\n\n\nclass PhoneMultiFactorGenerator {\n  constructor() {}\n  /**\r\n   * Provides a {@link PhoneMultiFactorAssertion} to confirm ownership of the phone second factor.\r\n   *\r\n   * @param phoneAuthCredential - A credential provided by {@link PhoneAuthProvider.credential}.\r\n   * @returns A {@link PhoneMultiFactorAssertion} which can be used with\r\n   * {@link MultiFactorResolver.resolveSignIn}\r\n   */\n\n\n  static assertion(credential) {\n    return PhoneMultiFactorAssertionImpl._fromCredential(credential);\n  }\n\n}\n/**\r\n * The identifier of the phone second factor: `phone`.\r\n */\n\n\nexports.m = PhoneMultiFactorGenerator;\nPhoneMultiFactorGenerator.FACTOR_ID = 'phone';\nvar name = \"@firebase/auth\";\nvar version = \"0.19.12\";\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nclass AuthInterop {\n  constructor(auth) {\n    this.auth = auth;\n    this.internalListeners = new Map();\n  }\n\n  getUid() {\n    var _a;\n\n    this.assertAuthConfigured();\n    return ((_a = this.auth.currentUser) === null || _a === void 0 ? void 0 : _a.uid) || null;\n  }\n\n  async getToken(forceRefresh) {\n    this.assertAuthConfigured();\n    await this.auth._initializationPromise;\n\n    if (!this.auth.currentUser) {\n      return null;\n    }\n\n    const accessToken = await this.auth.currentUser.getIdToken(forceRefresh);\n    return {\n      accessToken\n    };\n  }\n\n  addAuthTokenListener(listener) {\n    this.assertAuthConfigured();\n\n    if (this.internalListeners.has(listener)) {\n      return;\n    }\n\n    const unsubscribe = this.auth.onIdTokenChanged(user => {\n      var _a;\n\n      listener(((_a = user) === null || _a === void 0 ? void 0 : _a.stsTokenManager.accessToken) || null);\n    });\n    this.internalListeners.set(listener, unsubscribe);\n    this.updateProactiveRefresh();\n  }\n\n  removeAuthTokenListener(listener) {\n    this.assertAuthConfigured();\n    const unsubscribe = this.internalListeners.get(listener);\n\n    if (!unsubscribe) {\n      return;\n    }\n\n    this.internalListeners.delete(listener);\n    unsubscribe();\n    this.updateProactiveRefresh();\n  }\n\n  assertAuthConfigured() {\n    _assert(this.auth._initializationPromise, \"dependent-sdk-initialized-before-auth\"\n    /* DEPENDENT_SDK_INIT_BEFORE_AUTH */\n    );\n  }\n\n  updateProactiveRefresh() {\n    if (this.internalListeners.size > 0) {\n      this.auth._startProactiveRefresh();\n    } else {\n      this.auth._stopProactiveRefresh();\n    }\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction getVersionForPlatform(clientPlatform) {\n  switch (clientPlatform) {\n    case \"Node\"\n    /* NODE */\n    :\n      return 'node';\n\n    case \"ReactNative\"\n    /* REACT_NATIVE */\n    :\n      return 'rn';\n\n    case \"Worker\"\n    /* WORKER */\n    :\n      return 'webworker';\n\n    case \"Cordova\"\n    /* CORDOVA */\n    :\n      return 'cordova';\n\n    default:\n      return undefined;\n  }\n}\n/** @internal */\n\n\nfunction registerAuth(clientPlatform) {\n  (0, _app._registerComponent)(new _component.Component(\"auth\"\n  /* AUTH */\n  , (container, {\n    options: deps\n  }) => {\n    const app = container.getProvider('app').getImmediate();\n    const heartbeatServiceProvider = container.getProvider('heartbeat');\n    const {\n      apiKey,\n      authDomain\n    } = app.options;\n    return ((app, heartbeatServiceProvider) => {\n      _assert(apiKey && !apiKey.includes(':'), \"invalid-api-key\"\n      /* INVALID_API_KEY */\n      , {\n        appName: app.name\n      }); // Auth domain is optional if IdP sign in isn't being used\n\n\n      _assert(!(authDomain === null || authDomain === void 0 ? void 0 : authDomain.includes(':')), \"argument-error\"\n      /* ARGUMENT_ERROR */\n      , {\n        appName: app.name\n      });\n\n      const config = {\n        apiKey,\n        authDomain,\n        clientPlatform,\n        apiHost: \"identitytoolkit.googleapis.com\"\n        /* API_HOST */\n        ,\n        tokenApiHost: \"securetoken.googleapis.com\"\n        /* TOKEN_API_HOST */\n        ,\n        apiScheme: \"https\"\n        /* API_SCHEME */\n        ,\n        sdkClientVersion: _getClientVersion(clientPlatform)\n      };\n      const authInstance = new AuthImpl(app, heartbeatServiceProvider, config);\n\n      _initializeAuthInstance(authInstance, deps);\n\n      return authInstance;\n    })(app, heartbeatServiceProvider);\n  }, \"PUBLIC\"\n  /* PUBLIC */\n  )\n  /**\r\n   * Auth can only be initialized by explicitly calling getAuth() or initializeAuth()\r\n   * For why we do this, See go/firebase-next-auth-init\r\n   */\n  .setInstantiationMode(\"EXPLICIT\"\n  /* EXPLICIT */\n  )\n  /**\r\n   * Because all firebase products that depend on auth depend on auth-internal directly,\r\n   * we need to initialize auth-internal after auth is initialized to make it available to other firebase products.\r\n   */\n  .setInstanceCreatedCallback((container, _instanceIdentifier, _instance) => {\n    const authInternalProvider = container.getProvider(\"auth-internal\"\n    /* AUTH_INTERNAL */\n    );\n    authInternalProvider.initialize();\n  }));\n  (0, _app._registerComponent)(new _component.Component(\"auth-internal\"\n  /* AUTH_INTERNAL */\n  , container => {\n    const auth = _castAuth(container.getProvider(\"auth\"\n    /* AUTH */\n    ).getImmediate());\n\n    return (auth => new AuthInterop(auth))(auth);\n  }, \"PRIVATE\"\n  /* PRIVATE */\n  ).setInstantiationMode(\"EXPLICIT\"\n  /* EXPLICIT */\n  ));\n  (0, _app.registerVersion)(name, version, getVersionForPlatform(clientPlatform)); // BUILD_TARGET will be replaced by values like esm5, esm2017, cjs5, etc during the compilation\n\n  (0, _app.registerVersion)(name, version, 'esm2017');\n}\n/**\r\n * @license\r\n * Copyright 2021 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n/**\r\n * Returns the Auth instance associated with the provided {@link @firebase/app#FirebaseApp}.\r\n * If no instance exists, initializes an Auth instance with platform-specific default dependencies.\r\n *\r\n * @param app - The Firebase App.\r\n *\r\n * @public\r\n */\n\n\nfunction getAuth(app = (0, _app.getApp)()) {\n  const provider = (0, _app._getProvider)(app, 'auth');\n\n  if (provider.isInitialized()) {\n    return provider.getImmediate();\n  }\n\n  return initializeAuth(app, {\n    popupRedirectResolver: browserPopupRedirectResolver,\n    persistence: [indexedDBLocalPersistence, browserLocalPersistence, browserSessionPersistence]\n  });\n}\n\nregisterAuth(\"Browser\"\n/* BROWSER */\n);\n};"],
"names":["shadow$provide","global","require","module","exports","_prodErrorMap","_logError","msg","args","logClient","logLevel","_logger","LogLevel","ERROR","error","_app","SDK_VERSION","_fail","authOrCode","rest","createErrorInternal","_createError","_errorWithCustomMessage","auth","code","message","errorMap","Object","assign","prodErrorMap","create","factory","_util","ErrorFactory","appName","name","_assertInstanceOf","object","instance","constructor","fullParams","slice","_errorFactory","_DEFAULT_AUTH_ERROR_FACTORY","_assert","assertion","debugFail","failure","Error","debugAssert","_getInstance","cls","Function","instanceCache","get","set","initializeAuth","app","deps","provider","_getProvider","isInitialized","getImmediate","initialOptions","getOptions","deepEqual","initialize","options","_getCurrentUrl","_a","self","location","href","_isHttpOrHttps","_getCurrentScheme","protocol","_emulatorUrl","config","path","emulator","url","startsWith","_addTidIfNecessary","request","tenantId","_performApiRequest","method","customErrorMap","_performFetchWithErrorHandling","body","params","JSON","stringify","query","querystring","key","apiKey","headers","_getAdditionalHeaders","languageCode","FetchProvider","fetch","_getFinalTarget","apiHost","referrerPolicy","fetchFn","_canInitEmulator","SERVER_ERROR_MAP","networkTimeout","NetworkTimeout","response","Promise","race","promise","clearNetworkTimeout","json","_makeTaggedError","ok","serverErrorCode","serverErrorMessage","split","errorMessage","authError","toLowerCase","replace","e","FirebaseError","_performSignInRequest","serverResponse","_serverResponse","host","base","apiScheme","errorParams","email","phoneNumber","customData","_tokenResponse","deleteAccount","deleteLinkedAccounts","getAccountInfo","utcTimestampToDateString","utcTimestamp","date","Date","Number","isNaN","getTime","toUTCString","getIdTokenResult","user","forceRefresh","userInternal","getModularInstance","token","getIdToken","claims","_parseToken","exp","auth_time","iat","firebase","undefined","signInProvider","authTime","issuedAtTime","expirationTime","signInSecondFactor","algorithm","payload","signature","decoded","base64Decode","parse","_logoutIfInvalidated","bypassAuthState","isUserInvalidated","currentUser","signOut","_reloadWithoutSaving","idToken","users","length","coreAccount","_notifyReloadListener","newProviderData","providerUserInfo","extractProviderData","providerData","mergeProviderData","newIsAnonymous","passwordHash","isAnonymous","updates","uid","localId","displayName","photoURL","photoUrl","emailVerified","metadata","UserMetadata","createdAt","lastLoginAt","reload","_persistUserIfCurrent","_notifyListenersIfCurrent","original","newData","filter","deduped","o","some","n","providerId","providers","map","_tslib","__rest","rawId","requestStsToken","refreshToken","tokenApiHost","accessToken","access_token","expiresIn","expires_in","refresh_token","assertStringOrUndefined","_persistenceKeyName","_getBrowserName","userAgent","ua","includes","_isIEMobile","_isFirefox","_isBlackBerry","_isWebOS","_isSafari","_isChromeIOS","_isAndroid","matches","match","re","getUA","test","_isIOS","_isIOSStandalone","window","navigator","standalone","_isMobileBrowser","_getClientVersion","clientPlatform","frameworks","reportedPlatform","reportedFrameworks","join","_castAuth","extractProtocol","protocolEnd","indexOf","substr","parsePort","portStr","port","emitEmulatorWarning","attachBanner","el","document","createElement","sty","style","innerText","position","width","backgroundColor","border","color","bottom","left","margin","zIndex","textAlign","classList","add","appendChild","console","info","readyState","addEventListener","resetPassword","updateEmailPassword","applyActionCode$1","signInWithPassword","sendOobCode","sendEmailVerification$1","sendPasswordResetEmail$1","sendSignInLinkToEmail$1","verifyAndChangeEmail","signInWithEmailLink$1","signInWithEmailLinkForLinking","signInWithIdp","sendPhoneVerificationCode","signInWithPhoneNumber$1","linkWithPhoneNumber$1","temporaryProof","verifyPhoneNumberForExisting","apiRequest","operation","VERIFY_PHONE_NUMBER_FOR_EXISTING_ERROR_MAP_","parseMode","mode","signUp","providerIdForResponse","_processCredentialSavingMfaContextIfNecessary","operationType","credential","catch","idTokenProvider","_getReauthenticationResolver","_getIdTokenResponse","MultiFactorError","_fromErrorAndOperation","providerDataAsNames","Set","pid","_link$1","_linkToIdToken","UserCredentialImpl","_forOperation","_assertLinkedStatus","expected","providerIds","has","_reauthenticate","parsed","_signInWithCredential","userCredential","_fromIdTokenResponse","_updateCurrentUser","signInWithCredential","linkWithCredential","reauthenticateWithCredential","signInWithCustomToken$1","_setActionCodeSettingsOnRequest","actionCodeSettings","dynamicLinkDomain","continueUrl","canHandleCodeInApp","handleCodeInApp","iOS","bundleId","iOSBundleId","android","packageName","androidInstallApp","installApp","androidMinimumVersionCode","minimumVersion","androidPackageName","checkActionCode","oobCode","authModular","requestType","newEmail","mfaInfo","multiFactorInfo","MultiFactorInfoImpl","_fromServerResponse","data","previousEmail","createAuthUri","updateProfile$1","updateEmailOrPassword","password","returnSecureToken","_updateTokensIfNecessary","idTokenResponse","_b","profile","rawUserInfo","isNewUser","kind","GenericAdditionalUserInfo","filteredProviderId","FacebookAdditionalUserInfo","GithubAdditionalUserInfo","GoogleAdditionalUserInfo","TwitterAdditionalUserInfo","screenName","withdrawMfa","_iframeCannotSyncWebStorage","_allSettled","promises","all","fulfilled","value","reason","_generateEventId","prefix","digits","random","i","Math","floor","_isWorker","_getActiveServiceWorker","serviceWorker","active","registration","ready","getObjectStore","db","isReadWrite","transaction","DB_OBJECTSTORE_NAME","objectStore","_openDatabase","indexedDB","open","DB_NAME","DB_VERSION","resolve","reject","result","createObjectStore","keyPath","DB_DATA_KEYPATH","objectStoreNames","contains","close","deleteDatabase","toPromise","DBPromise","_putObject","put","getObject","_deleteObject","delete","getRecaptchaParams","recaptchaSiteKey","getScriptParentElement","getElementsByTagName","_loadJS","setAttribute","onload","onerror","el.onerror","type","charset","generateRandomAlphaNumericString","len","chars","push","allowedChars","charAt","domReady","resolver","removeEventListener","_verifyPhoneNumber","verifier","recaptchaToken","verify","RECAPTCHA_VERIFIER_TYPE","phoneInfoOptions","session","sessionInfo","phoneSessionInfo","phoneEnrollmentInfo","mfaEnrollmentId","multiFactorHint","multiFactorUid","phoneResponseInfo","mfaPendingCredential","phoneSignInInfo","_reset","_withDefaultResolver","resolverOverride","_popupRedirectResolver","_signIn","IdpCredential","_reauth","_link","_getAndClearPendingRedirectStatus","PENDING_REDIRECT_KEY","persistence","_redirectPersistence","_isAvailable","hasPendingRedirect","_get","_remove","_setPendingRedirectStatus","_set","_signInWithRedirect","authInternal","FederatedAuthProvider","resolverInternal","_openRedirect","_reauthenticateWithRedirect","eventId","prepareUserForRedirect","_linkWithRedirect","_getRedirectResult","resolverExtern","execute","action","RedirectAction","_redirectEventId","_setRedirectUser","eventUid","sessionId","v","isNullRedirectEvent","_getProjectConfig","_validateOrigin","authorizedDomains","domain","matchDomain","currentUrl","hostname","URL","ceUrl","HTTP_REGEX","IP_ADDRESS_REGEX","escapedDomainPattern","RegExp","resetUnloadedGapiModules","beacon","___jsl","H","hint","keys","r","CP","L","loadGapi","loadGapiIframe","gapi","load","callback","iframes","getContext","ontimeout","timeout","NETWORK_TIMEOUT","_c","Iframe","cbName","cachedGApiLoader","getIframeUrl","authDomain","EMULATED_IFRAME_PATH","IFRAME_PATH","eid","EID_FROM_APIHOST","_getFrameworks","fw","_openIframe","context","where","messageHandlersFilter","CROSS_ORIGIN_IFRAMES_FILTER","attributes","IFRAME_ATTRIBUTES","dontclear","iframe","clearTimerAndResolve","clearTimeout","networkErrorTimer","restyle","setHideOnLeave","networkError","setTimeout","PING_TIMEOUT","ping","then","_open","DEFAULT_WIDTH","height","DEFAULT_HEIGHT","top","max","screen","availHeight","toString","availWidth","target","BASE_POPUP_OPTIONS","TARGET_BLANK","FIREFOX_EMPTY_URL","scrollbars","optionsString","entries","reduce","accum","openAsNewWindowIOS","AuthPopup","newWin","focus","click","createEvent","initMouseEvent","dispatchEvent","_getRedirectUrl","authType","redirectUrl","additionalParams","setDefaultLanguage","isEmpty","getCustomParameters","customParameters","BaseOAuthProvider","scopes","getScopes","scope","tid","getHandlerBase","EMULATOR_WIDGET_PATH","WIDGET_PATH","getVersionForPlatform","defineProperty","$","sendPasswordResetEmail","D","E","connectAuthEmulator","disableWarnings","authority","exec","hostAndPort","bracketedIPv6","pop","settings","appVerificationDisabledForTesting","emulatorConfig","freeze","W","signInAnonymously","_initializationPromise","X","Y","Z","_","signInWithCustomToken","customToken","cred","a0","confirmPasswordReset","newPassword","a1","applyActionCode","a2","a3","verifyPasswordResetCode","a4","createUserWithEmailAndPassword","a5","signInWithEmailAndPassword","EmailAuthProvider","a6","sendSignInLinkToEmail","a7","isSignInWithEmailLink","emailLink","actionCodeUrl","ActionCodeURL","parseLink","a8","signInWithEmailLink","credentialWithLink","_tenantId","a9","fetchSignInMethodsForEmail","continueUri","identifier","signinMethods","aA","aB","_clearRedirectOutcomes","redirectOutcomeMap","clear","aC","aF","aG","aa","sendEmailVerification","ab","verifyBeforeUpdateEmail","ad","parseActionCodeURL","link","ae","updateProfile","profileRequest","passwordProvider","find","af","updateEmail","ag","updatePassword","ah","ai","aj","unlink","deleteProvider","providersLeft","pd","ak","getAdditionalUserInfo","al","am","getMultiFactorResolver","MultiFactorResolverImpl","_fromError","an","multiFactor","userModular","multiFactorUserCache","MultiFactorUserImpl","_fromUser","ao","_isIOS7Or8","ap","aq","ar","as","at","au","av","aw","ax","ay","c","signInWithPopup","executeNotNull","PopupOperation","d","linkWithPopup","reauthenticateWithPopup","f","signInWithRedirect","g","linkWithRedirect","h","reauthenticateWithRedirect","j","getRedirectResult","l","linkWithPhoneNumber","appVerifier","verificationId","ConfirmationResultImpl","getAuth","getApp","popupRedirectResolver","browserPopupRedirectResolver","indexedDBLocalPersistence","browserLocalPersistence","browserSessionPersistence","p","setPersistence","q","onIdTokenChanged","nextOrObserver","completed","reauthenticateWithPhoneNumber","s","signInWithPhoneNumber","t","onAuthStateChanged","u","updatePhoneNumber","useDeviceLanguage","w","updateCurrentUser","x","y","deleteUser","z","m","k","b","az","ac","aJ","aI","aH","aE","aD","a","V","U","T","S","R","Q","P","O","N","M","K","J","I","G","F","C","B","A","_component","FactorId","PHONE","ProviderId","FACEBOOK","GITHUB","GOOGLE","PASSWORD","TWITTER","SignInMethod","EMAIL_LINK","EMAIL_PASSWORD","OperationType","LINK","REAUTHENTICATE","SIGN_IN","ActionCodeOperation","EMAIL_SIGNIN","PASSWORD_RESET","RECOVER_EMAIL","REVERT_SECOND_FACTOR_ADDITION","VERIFY_AND_CHANGE_EMAIL","VERIFY_EMAIL","_debugErrorMap","AUTH_ERROR_CODES_MAP_DO_NOT_USE_INTERNALLY","ADMIN_ONLY_OPERATION","ARGUMENT_ERROR","APP_NOT_AUTHORIZED","APP_NOT_INSTALLED","CAPTCHA_CHECK_FAILED","CODE_EXPIRED","CORDOVA_NOT_READY","CORS_UNSUPPORTED","CREDENTIAL_ALREADY_IN_USE","CREDENTIAL_MISMATCH","CREDENTIAL_TOO_OLD_LOGIN_AGAIN","DEPENDENT_SDK_INIT_BEFORE_AUTH","DYNAMIC_LINK_NOT_ACTIVATED","EMAIL_CHANGE_NEEDS_VERIFICATION","EMAIL_EXISTS","EMULATOR_CONFIG_FAILED","EXPIRED_OOB_CODE","EXPIRED_POPUP_REQUEST","INTERNAL_ERROR","INVALID_API_KEY","INVALID_APP_CREDENTIAL","INVALID_APP_ID","INVALID_AUTH","INVALID_AUTH_EVENT","INVALID_CERT_HASH","INVALID_CODE","INVALID_CONTINUE_URI","INVALID_CORDOVA_CONFIGURATION","INVALID_CUSTOM_TOKEN","INVALID_DYNAMIC_LINK_DOMAIN","INVALID_EMAIL","INVALID_EMULATOR_SCHEME","INVALID_IDP_RESPONSE","INVALID_MESSAGE_PAYLOAD","INVALID_MFA_SESSION","INVALID_OAUTH_CLIENT_ID","INVALID_OAUTH_PROVIDER","INVALID_OOB_CODE","INVALID_ORIGIN","INVALID_PASSWORD","INVALID_PERSISTENCE","INVALID_PHONE_NUMBER","INVALID_PROVIDER_ID","INVALID_RECIPIENT_EMAIL","INVALID_SENDER","INVALID_SESSION_INFO","INVALID_TENANT_ID","MFA_INFO_NOT_FOUND","MFA_REQUIRED","MISSING_ANDROID_PACKAGE_NAME","MISSING_APP_CREDENTIAL","MISSING_AUTH_DOMAIN","MISSING_CODE","MISSING_CONTINUE_URI","MISSING_IFRAME_START","MISSING_IOS_BUNDLE_ID","MISSING_OR_INVALID_NONCE","MISSING_MFA_INFO","MISSING_MFA_SESSION","MISSING_PHONE_NUMBER","MISSING_SESSION_INFO","MODULE_DESTROYED","NEED_CONFIRMATION","NETWORK_REQUEST_FAILED","NULL_USER","NO_AUTH_EVENT","NO_SUCH_PROVIDER","OPERATION_NOT_ALLOWED","OPERATION_NOT_SUPPORTED","POPUP_BLOCKED","POPUP_CLOSED_BY_USER","PROVIDER_ALREADY_LINKED","QUOTA_EXCEEDED","REDIRECT_CANCELLED_BY_USER","REDIRECT_OPERATION_PENDING","REJECTED_CREDENTIAL","SECOND_FACTOR_ALREADY_ENROLLED","SECOND_FACTOR_LIMIT_EXCEEDED","TENANT_ID_MISMATCH","TIMEOUT","TOKEN_EXPIRED","TOO_MANY_ATTEMPTS_TRY_LATER","UNAUTHORIZED_DOMAIN","UNSUPPORTED_FIRST_FACTOR","UNSUPPORTED_PERSISTENCE","UNSUPPORTED_TENANT_OPERATION","UNVERIFIED_EMAIL","USER_CANCELLED","USER_DELETED","USER_DISABLED","USER_MISMATCH","USER_SIGNED_OUT","WEAK_PASSWORD","WEB_STORAGE_UNSUPPORTED","ALREADY_INITIALIZED","Logger","Map","Delay","shortDelay","longDelay","isMobile","isMobileCordova","isReactNative","onLine","isBrowserExtension","min","fetchImpl","headersImpl","responseImpl","Headers","Response","DEFAULT_API_TIMEOUT_MS","timer","ProactiveRefresh","isRunning","timerId","errorBackoff","_start","schedule","_stop","getInterval","wasError","interval","expTime","stsTokenManager","now","iteration","_initializeTime","lastSignInTime","creationTime","_copy","toJSON","StsTokenManager","updateFromServerResponse","parsedToken","updateTokensAndExpiration","getToken","isExpired","refresh","clearRefreshToken","oldToken","expiresInSec","fromJSON","manager","_assign","_clone","_performRefresh","UserImpl","opt","proactiveRefresh","reloadListener","reloadUserInfo","userInfo","_onReload","_startProactiveRefresh","_stopProactiveRefresh","tokensRefreshed","_fromJSON","_d","_e","_f","_g","_h","plainObjectTokenManager","Array","isArray","InMemoryPersistence","storage","_addListener","_key","_listener","_removeListener","inMemoryPersistence","PersistenceUserManager","userKey","fullUserKey","fullPersistenceKey","boundEventHandler","_onStorageEvent","bind","setCurrentUser","getCurrentUser","blob","removeCurrentUser","savePersistenceForRedirect","newPersistence","persistenceHierarchy","availablePersistences","selectedPersistence","userToMigrate","migrationHierarchy","_shouldAllowMigration","AuthImpl","heartbeatServiceProvider","operations","authStateSubscription","Subscription","idTokenSubscription","redirectUser","isProactiveRefreshEnabled","_deleted","_isInitialized","lastNotifiedUid","clientVersion","sdkClientVersion","_initializeWithPersistence","queue","persistenceManager","_shouldInitProactively","_initialize","initializeCurrentUser","assertedPersistence","_currentUser","storedUser","getOrInitRedirectPersistenceManager","redirectUserEventId","storedUserEventId","tryRedirectSignIn","directlySetCurrentUser","reloadAndSetCurrentUserOrClear","redirectResolver","_completeRedirectFn","navigatorLanguage","languages","language","_delete","userExtern","notifyAuthListeners","redirectPersistenceManager","_getPersistence","_updateErrorMap","registerStateListener","redirectManager","_redirectUserForId","id","next","currentUid","subscription","cb","addObserver","_logFramework","framework","sort","appId","heartbeatsHeader","optional","getHeartbeatsHeader","observer","createSubscribe","AuthCredential","signInMethod","_auth","_idToken","EmailAuthCredential","_email","_password","_fromEmailAndPassword","_fromEmailAndCode","obj","OAuthCredential","arguments","pendingToken","_fromParams","nonce","oauthToken","oauthTokenSecret","secret","buildRequest","autoCreate","requestUri","IDP_REQUEST_URI$1","postBody","PhoneAuthCredential","_fromVerification","verificationCode","_fromTokenResponse","_makeVerificationRequest","actionLink","searchParams","querystringDecode","extractQuerystring","doubleDeepLink","iOSDeepLink","iOSDoubleDeepLink","PROVIDER_ID","EMAIL_PASSWORD_SIGN_IN_METHOD","EMAIL_LINK_SIGN_IN_METHOD","defaultLanguageCode","setCustomParameters","customOAuthParameters","addScope","OAuthProvider","credentialFromJSON","_credential","rawNonce","credentialFromResult","oauthCredentialFromTaggedObject","credentialFromError","tokenResponse","oauthIdToken","oauthAccessToken","FacebookAuthProvider","FACEBOOK_SIGN_IN_METHOD","credentialFromTaggedObject","GoogleAuthProvider","GOOGLE_SIGN_IN_METHOD","GithubAuthProvider","GITHUB_SIGN_IN_METHOD","SAMLAuthCredential","_create","IDP_REQUEST_URI","SAMLAuthProvider","SAML_PROVIDER_PREFIX","samlCredentialFromTaggedObject","TwitterAuthProvider","TWITTER_SIGN_IN_METHOD","userCred","setPrototypeOf","prototype","factorId","enrollmentTime","enrolledAt","enrollment","PhoneMultiFactorInfoImpl","phoneInfo","FederatedAdditionalUserInfoWithUsername","username","login","MultiFactorSessionImpl","_fromIdtoken","_fromMfaPendingCredential","multiFactorSession","pendingCredential","hints","signInResolver","authExtern","mfaResponse","_process","resolveSignIn","assertionExtern","enrolledFactors","getSession","enroll","finalizeMfaResponse","unenroll","infoOrUid","WeakMap","BrowserPersistenceClass","storageRetriever","setItem","STORAGE_AVAILABLE_KEY","removeItem","getItem","BrowserLocalPersistence","localStorage","event","poll","this.boundEventHandler","onStorageEvent","listeners","localCache","pollTimer","safariLocalStorageNotSynced","fallbackToPolling","forAllChangedKeys","newValue","oldValue","detachListener","stopPolling","storedValue","triggerListeners","notifyListeners","isIE","documentMode","IE10_LOCAL_STORAGE_SYNC_DELAY","_oldValue","listener","from","startPolling","setInterval","StorageEvent","_POLLING_INTERVAL_MS$1","clearInterval","attachListener","size","BrowserSessionPersistence","sessionStorage","Receiver","eventTarget","handlersMap","handleEvent","existingInstance","receivers","receiver","isListeningto","newInstance","eventType","handlers","ports","postMessage","status","handler","origin","_subscribe","eventHandler","_unsubscribe","Sender","removeMessageHandler","messageChannel","port1","onMessage","_send","MessageChannel","completionTimer","finally","start","ackTimer","port2","IndexedDBLocalPersistence","pendingWrites","sender","serviceWorkerReceiverAvailable","activeServiceWorker","_workerInitializationPromise","initializeServiceWorkerMessaging","_openDb","_withRetries","op","numAttempts","_TRANSACTION_RETRY_COUNT","initializeReceiver","initializeSender","_origin","keyProcessed","_poll","_data","results","notifyServiceWorker","controller","_withPendingWrite","write","getAllRequest","getAll","keysInResult","localKey","_POLLING_INTERVAL_MS","MockReCaptcha","counter","_WIDGET_ID_START","_widgets","render","container","parameters","MockWidget","reset","optWidgetId","getResponse","containerOrId","deleted","responseToken","clickHandler","this.clickHandler","getElementById","isVisible","checkIfDeleted","expiredCallback","_EXPIRATION_TIME_MS","_SOLVE_TIME_MS","_JSLOAD_CALLBACK","NETWORK_TIMEOUT_DELAY","ReCaptchaLoaderImpl","hostLanguage","librarySeparatelyLoaded","grecaptcha","hl","shouldResolveImmediately","recaptcha","recaptcha.render","widgetId","RECAPTCHA_BASE","clearedOneInstance","MockReCaptchaLoaderImpl","DEFAULT_PARAMS","theme","RecaptchaVerifier","destroyed","tokenChangeListeners","renderPromise","isInvisible","makeTokenCallback","_recaptchaLoader","validateStartingState","assertNotDestroyed","getAssertedRecaptcha","tokenChange","makeRenderPromise","childNodes","forEach","node","removeChild","sitekey","hasChildNodes","existing","globalFunc","init","guaranteedEmpty","siteKey","onConfirmation","confirm","authCredential","PhoneAuthProvider","verifyPhoneNumber","phoneOptions","applicationVerifier","PHONE_SIGN_IN_METHOD","_buildIdpRequest","returnIdpCredential","AbstractPopupRedirectOperation","eventManager","pendingPromise","onExecution","registerConsumer","onAuthEvent","urlResponse","getIdpTask","onError","unregisterAndCleanUp","unregisterConsumer","cleanUp","_POLL_WINDOW_CLOSE_TIMEOUT","pollId","authWindow","currentPopupAction","cancel","_openPopup","associatedEvent","_originValidation","_isIframeWebStorageSupported","isSupported","pollUserCancellation","closed","readyOutcome","AuthEventManager","cachedEventUids","consumers","queuedRedirectEvent","hasHandledPotentialRedirect","lastProcessedEventTime","authEventConsumer","isEventForConsumer","sendToConsumer","saveEventToCache","onEvent","hasEventBeenHandled","handled","consumer","eventIdMatches","EVENT_DUPLICATION_CACHE_DURATION_MS","tabindex","resizable","statusbar","toolbar","BrowserPopupRedirectResolver","eventManagers","originValidationPromises","initAndGetManager","register","iframeEvent","authEvent","send","WEB_STORAGE_SUPPORT_KEY","MultiFactorAssertionImpl","_finalizeEnroll","_finalizeSignIn","PhoneMultiFactorAssertionImpl","_fromCredential","phoneVerificationInfo","PhoneMultiFactorGenerator","FACTOR_ID","AuthInterop","internalListeners","getUid","assertAuthConfigured","addAuthTokenListener","unsubscribe","updateProactiveRefresh","removeAuthTokenListener","registerAuth","_registerComponent","setInstantiationMode","Component","getProvider","authInstance","hierarchy","setInstanceCreatedCallback","_instanceIdentifier","_instance","authInternalProvider","registerVersion","version"]
}
